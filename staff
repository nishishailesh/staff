<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;diabled:true
}

.section_header
{
	background-color:gray;
}
</style>



<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		

function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="gray";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					myself.style.background="#E4DDDD";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
      
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>




<!-- A4=210x297 so width=840 height=1200 -->

<body style="background-color:lightgray;">



<?php 
//Form element at this place (outside table below , with closing outside required to make  POST visible if added by javascript
echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '<table class=noborder style="background-color:lightblue;"><tr><td>';
//<!-- menu() have its own <form>. Never enclose it in another form -->
menu();
echo '</td><td valign=top >';

//Form element at this place (inside a table, with closing outside donot make POST visible if added by javascript
//echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '</td><td  valign=top>';
echo $save_msg;
echo '</td></tr></table>';
?>


<h2><p align=center><b><u>DECLARATION FORM : 2017 - 2018 - FACULTY</u></b></p></h2>
<h4><p align=center><b><u><span style="background:lightpink;">Note: Use Declaration->Check menu to varify the correctness of details filled</span></u></b></p></h4>

<p>
<span>
<?php
	echo '<input style="background-color:lightgreen;width:40px;" name=action type=submit value=save title="save frequently to prevent repeat attempts">';
?>
<br>
</span>
<!--<span class=section_header onclick="showhide_with_tab('for_assessors'			,'section','section_header',this)">For Assessors</span>-->
<span class=section_header onclick="showhide_with_tab('identity'					,'section','section_header',this)">Identity Information</span>
<span class=section_header onclick="showhide_with_tab('contact'					,'section','section_header',this)">Contact</span>
<span class=section_header onclick="showhide_with_tab('service'					,'section','section_header',this)">Service</span>
<span class=section_header onclick="showhide_with_tab('qualification_section'	,'section','section_header',this)">Qualification</span>
<span class=section_header onclick="showhide_with_tab('experience_section'		,'section','section_header',this)">Experience</span>
<span class=section_header onclick="showhide_with_tab('present_appointment'		,'section','section_header',this)">Present Appointment</span>
<span class=section_header onclick="showhide_with_tab('MET'						,'section','section_header',this)">MET</span>
<span class=section_header onclick="showhide_with_tab('MCI'						,'section','section_header',this)">MCI</span>
<span class=section_header onclick="showhide_with_tab('publication'				,'section','section_header',this)">Publication</span>
<span class=section_header onclick="showhide_with_tab('income'					,'section','section_header',this)">Income</span>
<span class=section_header onclick="showhide_with_tab('declaration'				,'section','section_header',this)">Declaration</span>

</p>
<!--<div  id=for_assessors style="border-style: solid;padding:10px;"  class=section>

<p><b>NAME OF THE COLLEGE: 
	<input type=text placeholder="autofilled" readonly size=30 name=declaration_college id=declaration_college value=
	<?php 
	//echo '\''.$current_appointment['institute'].'\'';
	?>
	>
	<input type=text placeholder="autofilled" readonly size=15  name=declaration_city id=declaration_city value=
		<?php 
			//$ex=explode(" ",$current_appointment['institute']);
		//	$tot=count($ex);
			//echo $ex[$tot-1];
		?>
	>
</b></p>
<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>



<br>
<?php

	//echo '<input class="section" style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>
</div>

-->


</p>
<div id=identity style="border-style:solid;padding:10px;"  class=section>
	

<table class="noborder">
<tr>
<td>
	
	<p>1.(a)Name<input type=text placeholder="Lastname Firstname Middlename" name=name id=name size=40 value=

	<?php echo '\''.$staff_detail['fullname'].'\''; ?>

	></p>

	<p>1.(b) Date of Birth 


	<input readonly	id=dob class="datepicker" size="10" name=dob value=
	<?php echo '\''.mysql_to_india_date($staff_detail['dob']).'\''; ?>
	>

	&amp; Age<input readonly type=text name=age value=

	<?php 
	//$diff=date_diff_to_year_month_days($staff_detail['dob'],strftime("%Y-%m-%d"));
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo '\''.$diff.'\'';
	?>

	>

	</p>

	<p><button style="background-color:yellow;" type=button onclick="alert('(1) Upload pdf/jpg copy of photo ID proof. (2) Upload pdf/jpg of passport size photo')"><b>1.(c)</b></button>Submit Photo ID proof issued by Govt. Authorities :</p>

	<p>
	<?php
		echo '<table class=border><tr><td>';
		echo 'Photo ID submitted :';
		echo '</td>';
		echo '<td>';
		mk_select_from_sql($link,'select * from photo_id_proof_type','photo_id_proof_type','photo_id','',$photo['proof_type']);
		echo '</td></tr>';
		echo '<tr><td  class=upload>';
		echo '<input name=photo_id type=file><--Upload photo id';		
		echo '</td>';
		echo '<td class=upload>';
		echo 'uploaded:'.$photo['photo_id_filename']; 
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number:<input type=text name=photo_id_number value=\''.$photo['proof_number'].'\'';	
		echo '</td>';
		echo '<td>';
		echo 'Issued by:<input type=text name=photo_id_issued_by value=\''.$photo['proof_issued_by'].'\'';	
		echo '</td></tr>';
		echo '</table>';
	?>
	</p>

</td>

<td>
	<?php
			echo '<table class=noborder>
			<tr>
			<td align=center>';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>
			<tr><td  class=upload>';
			echo '<input name=photo type=file><--Upload photo';
			
			echo '</td></tr>
			<tr>';
			echo '<td class=upload>';
			echo 'uploaded:'.$photo['photo_filename']; 
			echo '</td></tr></table>';
	?>

</td>
</tr>
</table>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>

</div>
<br>
<?php

$de=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');
$opt=array('','Yes','No','Exempted');
$catagory=array('','General','SEBC','ST','SC');
echo '<div id=service style="border-style: solid;padding:10px;"  class=section>';
echo '<table align=center class=border>';
	echo '<tr>';
		echo '<th colspan=2 >';
		echo 'Miscellenious Sevice data';
		echo '</th>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Catagory';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($catagory,'catagory','',$staff_detail['catagory']);
		echo '</td>';
	echo '</tr>';	
	echo '<tr>';
		echo '<td>';
			echo 'CCC+ Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'cccplus','',$de['cccplus']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Gujarati Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'gujarati','',$de['gujarati']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Hindi Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'hindi','',$de['hindi']);
		echo '</td>';
	echo '</tr>';
echo '</table>
<br>
<br>';
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';

echo'
<br>
<br>
<br>
<br>
</div>';
?>

<?php
if($donot_hide=='qualification')
{
	$qualification_style='display:block';
}
else
{
	$qualification_style='display:none';
}

if($donot_hide=='experience')
{
	$experience_style='display:block';
}
else
{
	$experience_style='display:none';
}

?>

<div id=qualification_section style="<?php echo $qualification_style; ?>;border-style:solid;padding:10px;"  class=section>
	
<!---start of qualification and experience -->
<p>
<table class="border" style="background-color:#A6AEC8"  id="qualification_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;" type=button 
			onclick="showhide('qualification_help')"> <b>2.</b></button> Qualifications :</th></tr>
<tr><td colspan=7>
	<table class=border style="background-color:lightblue;display:block;" id=qualification_help>
		<tr><td colspan=7 >(1) Fill Qualification details in blue row</td></tr>
		<tr><td colspan=7 >(2) Click [[Add qualification]]</td></tr>
		<tr><td colspan=7 >(3) College, University and Year are must for saving data</td></tr>
		<tr><td colspan=7 >(4) Click "X" beside the qualification to delete it</td></tr>
		<tr><td colspan=7 >(4) Upload Degree and Registration certificates where relavent</td></tr>
		<tr><td colspan=7 >(4) Delete if any mistake is done/ upload not done and add again</td></tr>
		</table>
</td></tr>	
	
<tr>
	<th>del</th><th>Qualification</th><th>College</th><th>	University	</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
add_qualification_raw($link);
view_table_qualification($link);
?>


<tr>
	<th  colspan=6 style="text-align:left;">Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets
after scoring out whichever is not applicable.</th></tr>
<tr><td  colspan=6 ><b>2.(a)</b> Copy of Degree certificates  of MBBS and PG degree attached - <?php echo $degree_attachment_str; ?></td></tr>
<tr><td  colspan=6 ><b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  <?php echo $reg_attachment_str; ?></td></tr>
</table>

</p>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>
</div>
<div id=experience_section style="<?php echo $experience_style; ?>;border-style:solid;padding:10px;"   class=section>

<p>
<table class="border"   style="background-color:#90939A" id="experience_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;" type=button 
			onclick="showhide('experience_help')"> <b>3.(a)</b></button> Details of the teaching experience till date.</th></tr>
<tr><td colspan=7>
	<table class=border style="background-color:lightblue;display:block;" id=experience_help>
		<tr><td colspan=7 >(1) Add all appointments/transfers/promotions saparately in new row.</td></tr>
		<tr><td colspan=7 >(2) Click [[Add experience]].</td></tr>
		<tr><td colspan=7 >(3) Change of type of appointment (e.g Adhoc->GPSC) also needs to be indicated saparately in new row.</td></tr>
		<tr><td colspan=7 >(4) Put CheckMark checkbox in "Name of Institution" column to write name of institute not present in dropdown list.</td></tr>
		<tr><td colspan=7 >(5) Ex-Army person can use this table to fill their details</td></tr>
		<tr><td colspan=7 >(6) Appointments with transfers shall be entered as respective appointment type</td></tr>
		<tr><td colspan=7 >(7) Each transfers will require different entry. Indicate correct TYPE of appointment appicable to transfer.</td></tr>
		<tr><td colspan=7 >(8) For Current appointment select 'till date' for 'to date'</td></tr>
		</table>
</td></tr>
<tr>
	<th>Del</th>
	<th >Designation</th>
	<th >Type</th>
	<th >Department</th>
	<th >Name of Institution</th>
	<th >From - To - Total</th>
</tr>

<?php
add_experience_raw($link);

view_table_experience($link);

?>



<tr>
<tr><td  colspan=7><b>Note:-</b>Tutor working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized/permitted
medical institute to be consider as senior resident.</td></tr>
</table>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>

</div>
<!--
	<table class=border style="width:100%;">
		<tr><td colspan=10><b>3(b).</b>To be filled in by Ex Army Personnel only: <b>(Not used for online filling of declaration)</b></td></tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
-->
</p>

<!-- end of qualification and experience -->



<div id=present_appointment style="border-style: solid;padding:10px;"   class=section>
<p><b>Note:1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty. 2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</b></p>
<p>1.(d)i.Present Designation:
<?php 
	echo '<input type=text readonly value=\''.$current_appointment['post'].'\'>';
	//mk_select_from_sql($link,'select * from designation_type','designation_type','present_designation','',
	//$current_appointment['post']);
?>

</p>

<p><table class="border">
	<tr>
		<td>
			<button style="background-color:yellow;" type=button onclick="alert('Upload  not implemented yet')"><b>1.(d)(i)a</b></button> Certified copies of present appointment order at present institute attached.</td></tr><tr class=upload><td>
	
			<?php
				echo '<input name=present_appointment_order type=file ><--Upload appt/trnsfr order</td></tr><tr><td  class=upload>';	
				echo 'uploaded:'.$current_appointment_order['attachment_filename']; 
				
			?>
	
		</td>
	</tr>	
</table></p>

<p>1.(d)ii. Department: 

	<?php
		echo '<input type=text readonly value=\''.$current_appointment['department'].'\'>';

	//mk_select_from_sql($link,'select department from department','department','present_department','',$current_appointment['department']);
	?>

</p>
<p>1.(d)iii.College: 
	<?php
		echo '<input  size=40  type=text 
				id=present_college_name 
				name=present_college_name readonly 
				value=\''.$current_appointment['institute'].'\'>';
	?>

<!-- <input size=40 type=text name=present_college_name id=present_college_name value="Government Medical College" ></p> -->


<p>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo '<input  size=10  type=text 
				id=present_city 
				name=present_city readonly 
				value=\''.$city.'\'>';
	?>

<p>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo 'Contactual';}else{echo 'Regular';}
?>

</p>

<p>


	<tr>
		<td>1.(e)Residential  Address of employee :</td>
		<td><textarea cols=40 name=residencial_address>
<?php

		echo $staff_detail['residencial_address'];

?>		
		</textarea></td>
	</tr>
</table>
</p>


<p><table class=noborder style="width:190mm;"><tr><td>Signature of Faculty</td><td><input type=text readonly placeholder="required in physical copy"></td><td>Signature of Dean</td<td><input type=text  placeholder="required in physical copy" readonly></td></tr><table></p>

<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="border">
	<tr>
		<td><button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of photo ID proof')"><b>1.(j)</b></button> Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td></tr><tr>
			
		<td class=upload>
		<?php
		echo '<input type=file  name=present_joining_order><--Upload joining order</td></tr><tr><td  class=upload>';
		?>	
		Uploaded:
		<?php  echo $current_joining_order['attachment_filename'] ?>
		</td>
	</tr>
</table>

<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=border>
	<tr>
		<td>
			<button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of last relieving order ')"><b>4.(a)</b></button> Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
	<tr class=upload>
		<td>
		<?php
		echo '<input  name=last_relieving_order type=file><--Upload relieving order';
			echo '</td></tr>
			<tr  class=upload><td>';
		echo 'Uploaded:';
		echo $previous_relieving_order['attachment_filename']; 
		?>

		</td>
	</tr>
	<tr>
		<td>
			<b>4.(b)</b> I am not working in any other medical college/dental college in the State or outside the State in any capacity Regular / Contractual.
		</td>
	</tr>
</table>
	
</p>
 <br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>

</div>

<div id=MET style="border-style: solid;padding:10px;"   class=section>

<p><b>1.(f) </b>Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo '<input type=radio name=MET value=yes checked onclick="show(\'MET_details\')">Yes /<input type=radio name=MET value=no onclick="hide(\'MET_details\')">No</p>';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo '<input type=radio name=MET value=yes onclick="show(\'MET_details\')">Yes /<input type=radio name=MET checked value=no onclick="hide(\'MET_details\')">No</p>';
 
	echo '<table class=border id=MET_details style="display:none;">';
}

?>
		
		<tr>
			<th colspan=2  style="width:60%">Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td><input type=text style="width:95%;height:100%;" name=met_center value=
			<?php 
					echo '\''.$met['center'].'\'';
			?>
			
			></td>
			<td style="width:20%">MET Place:</td><td><input type=text  style="width:95%;height:100%;"  name=met_place
			value=
			<?php 
					echo '\''.$met['place'].'\'';
			?>
			
			></td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td><input type=text style="width:95%;height:100%;"  name=met_observer value=
			<?php 
					echo '\''.$met['observer'].'\'';
			?>></td>
			<td  style="width:20%">MET Date:</td><td><input readonly	id=met_date class="datepicker" size="10" name=met_date value=
			<?php 
					echo '\''.mysql_to_india_date($met['date']).'\'';
			?>></td>

		</tr>
	</table>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>

</div>


<div id=contact style="border-style: solid;padding:10px;"   class=section>
	
<p>
	<table class="border">
		<tr>
			<td colspan=2><button style="background-color:yellow;Mobile Number" type=button onclick="alert('Upload pdf/jpg copy of address proof')"><b>1.(g)</b></button>Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo $proof_of_residence_attached.'</td>';	
				echo '</tr><tr><td class=upload>';
				echo '<input name=proof_of_residence type=file><--Upload resi proof';
				echo '</td></tr>
							<tr><td class=upload>';	
				echo 'uploaded:'.$r_proof['filename'].'</td>'; 
			?>
			
		</tr>
	</table>
</p>
			

<p><b>1.(h)</b>	Contact Particulars:</p>
<p>
<table>
<tr><td>Tel (Office)(with STD code):</td><td><input type=text  size=30 name=office_phone value="0261-2244175"
value=
			<?php 
					echo '\''.$staff_detail['office_phone'].'\'';
			?>
			
></td><tr>
<tr><td>Tel(Residence): (with STD code)</td><td><input size=30 type=text name=residencial_phone
value=
			<?php 
					echo '\''.$staff_detail['residencial_phone'].'\'';
			?>
></td><tr>
<tr><td>E-mail address: </td><td><input type=text  size=30 name=email
value=
			<?php 
					echo '\''.$staff_detail['email'].'\'';
			?>
></td><tr>
<tr><td>Mobile Number: </td><td><input type=text  size=30 name=mobile
value=
			<?php 
					echo '\''.$staff_detail['mobile'].'\'';
			?>
></td><tr>
</table>
<table>
	
</table>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>

</div>


<div id=MCI style="border-style: solid;padding:10px;"   class=section>

<p>
	<table class=border>
	<tr><td  colspan=2><b>Note:</b>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.  <br>If yes, please give details.</td></tr>
	<tr><td   colspan=2 align=center>Give at least date of last appearance</td></tr>
	<tr><td   colspan=2 align=center>other details are automatically obtained from complated experience table</td></tr>
	<tr><th align=center >Dates of appearance in MCI Inspection:</th></tr>
	<tr><td align=center><input name=mci_date id=mci_date class=datepicker>
	<input name=action value=add_mci_date type=submit></td>
	</tr>
	<tr>
	<td colspan=3 align=center><?php view_table_mci($link); ?></td>
	</tr>
	</table>
	
	<table>
		<tr>
			<td>1.(d)vi. Date of appearance in Last MCI - UG/PG/Any Other Assessment:</td><td><b>
	
	
	<?php
			echo mysql_to_india_date($last_mci_date['md']); 
			//echo '<td><input readonly	value=\''.mysql_to_india_date($last_mci['last_mci_date']).'\' type=text id=last_mci_date class="datepicker" size="10" name=last_mci_date></td>';
	?>
	
		</b></td></tr>
	</table>

	</p>

	<?php
	//echo '<pre>';
	//echo 'a';
	//print_r($last_mci_details);
	//echo 'b';

	//print_r($current_appointment);
	//echo '</pre>';
	
	
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<p>1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute - <b>'.$last_mci_in_current_institute.'</b></p>';

		echo '<p>1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></p>';
		 
	?>

<table><tr><td><b>7</b> I have appeared in the last inspection of the same College in the same post. </td><td>

<?php

	if($last_mci_as_current_post=='Yes' && $last_mci_in_current_institute=='Yes')
	{
		echo '<b>Yes</b>';
	}
	else
	{
		echo '<b>No</b>';
	}

?>

</td></tr></table>
</p>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>



</div>

<div id=publication style="border-style: solid;padding:10px;"   class=section>
<p>
<table>
	<tr><td colspan=0><b>5.</b>  Number of  Research publications in Index Journals:</td></tr>
	<tr><td><b>5.(a)</b> International Journals:</td><td><input type=text name=ipublication value=
	<?php
	echo '\''.$publication['international'].'\'';
	?>
	
	></td></tr>
	<tr><td><b>5.(b)</b> National Journals:</td><td><input type=text name=npublication  value=
	<?php
	echo '\''.$publication['national'].'\'';
	?>
	></td></tr>
	<tr><td><b>5.(c)</b> State/Institutional Journals:</td><td><input type=text name=spublication  value=
	<?php
	echo '\''.$publication['state'].'\'';
	?>
	></td></tr>
</table>
</p>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>
</div>

<div id=income style="border-style: solid;padding:10px;"   class=section>
<p>
<table class=border>
	<tr><td><button type=button style="background-color:yellow;" onclick="alert('Upload scanned / camara-photo of PAN card')" ><b>6.(a)</b></button> My PAN Card No. is 

	
	<input type=text name=PAN_number value=
	<?php
		echo $pan['pan'];
	?>
	>
	</td></tr><td class=upload>
	<?php	
	echo '<input type=file name=PAN_card ><--Upload PAN';
	echo '</td></tr>
			<tr><td class=upload>';
	?>
	
	Uploaded: <?php echo $pan['attachment_filename'] ?></td></tr>
	

</table>
</p>
<p>
<table class=border style="width:70%;" >	

	<tr><td colspan=3><button type=button style="background-color:yellow;" type=button onclick="alert('To be of filled manually when declaration form is printed')"><b>6.(b)</b></button> I have drawn total emoluments from this college in the current financial year as under:-</td></tr>
	
	<tr><th>Month</th><th>Amount Received</th><th>TDS</th></tr>
	<tr><td>Apr 2016</td><td></td><td></td></tr>	
	<tr><td>May 2016</td><td></td><td></td></tr>	
	<tr><td>Jun 2016</td><td></td><td></td></tr>	
	<tr><td>Jul 2016</td><td></td><td></td></tr>	
	<tr><td>Aug 2016</td><td></td><td></td></tr>	
	<tr><td>Sep 2016</td><td></td><td></td></tr>	
	<tr><td>Oct 2016</td><td></td><td></td></tr>	
	<tr><td>Nov 2016</td><td></td><td></td></tr>	
	<tr><td>Dec 2016</td><td></td><td></td></tr>	
	<tr><td>Jan 2017</td><td></td><td></td></tr>	
	<tr><td>Feb 2017</td><td></td><td></td></tr>	
	<tr><td>Mar 2017</td><td></td><td></td></tr>	
	</table>
</table>

<table><tr><td><button  type=button style="background-color:yellow;" onclick="alert('PAN uploaded above. Form 16 to be attached manually, when declaration form is printed')"><b>6.(c)</b></button> (Copy of my PAN &amp; Form 16 (TDS certificate) for financial year 2015-16 are attached)</td></tr></table>
</p>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>

</div>

<div id=declaration style="border-style: solid;padding:10px;"   class=section>
<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><button  type=button style="background-color:yellow;" onclick="alert('If doing private practice fill details, when declaration form is printed')"><b>3</b></button></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%"><input readonly type=text placeholder="to written when signed"></td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=border style="width:100%">
	<tr><td  style="width:25%">Date:</td><td  style="width:25%"><input readonly type=text placeholder="to written when signed"></td><td   style="width:25%" align=center>Signed by HOD</td><td  style="width:25%">Countersigned by the Director/Dean/Principal</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>

<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed by the Teacher</th><th>Signed by the HOD</th></tr>
<tr><td><input readonly type=text placeholder="Sign in physical copy"></td><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>
<tr><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
</table>
</p>

<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>
<br>
<?php
	echo '<input style="background-color:#808080;color:white;font-size:20px;font-weight:bold;float:right;" name=action type=submit value=Next title="save frequently to prevent repeat attempts">';
?>

<br>
<br>
<br>
<br>


</div>

</form>
</body>
</html>

<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=noborder><tr><td>
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_qualification value=\''.$ra['qualification_id'].'\'>X</button></td><td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:none;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:none;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}


function view_table_experience($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	while($ra=mysqli_fetch_assoc($result))
	{		
	if(strlen($ra['to_date'])==0)
	{
		$to_date='<span style="background-color:lightpink;">till_date</span>';
		$diff=get_date_diff_as_ymd($ra['from_date'],date('Y-m-d'));
	}
	else
	{
		$to_date=$ra['to_date'];
		$diff=get_date_diff_as_ymd($ra['from_date'],$ra['to_date']);
	}
	/*$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>From:'.$ra['from_date'].','.$ra['from_time'].'<br>To:'.$to_date.','.$ra['to_time'].'<br>
			Total:'.$diff.'</td>
			';
			* */
			
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>'.$ra['from_date'].','.$ra['from_time'].'>>'.$to_date.','.$ra['to_time'].' ('.$diff.')</td>
			';
			echo $raw_html;
		}
}


function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
	
}

?>

<?php
//echo '<pre>';
//print_r($_POST);
//print_r($_FILES);
//echo if_in_interval("2010-11-01","2010-11-01","2010-11-01");
//echo if_in_interval("2010-02-02","2010-02-01","2010-03-03");
//echo if_in_interval("2010-11-01","2011-11-01","2011-11-01");
//echo if_in_interval("2010-11-01","2009-11-01","2009-11-01");
//echo if_in_interval("2010-11-01","2012-11-01","2009-11-01");
//echo get_exterience("2016-12-12","2016-12-13");
//echo '</pre>';

?>
<span class=section_header id=genral_help_sh onclick="showhide_with_label('general_help',this,'general help')">hide General Help</span>



<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>>

<div id=general_help>
<table class=border>

<tr><td>
Click <span style="background-color:gray;">Gray </span> buttons to start filling details of respective section.
</td></tr>
<tr><td>
Click <span style="background-color:yellow;">yellow </span> buttons to get help.
</td></tr> 
<tr><td>
<span style="background-color:lightpink;">Pink fields</span> need  pdf/jpg upload. 
</td></tr> 
<tr><td>
If smart phone is used to fill this form, use camara to snap and <span style="background-color:lightpink;">upload</span> documents
</td></tr> 
<tr><td>
Some of the details will be automatically filled, AFTER data is saved.
</td></tr>
<tr><td>
Save frequently(<span style="background-color:lightgreen;">Green Button</span>). Saved data is automatically retrived.
</td></tr>
<tr><th align=left>
Keep elctronic/physical copy of photo id, photo, degree, registration, current appointment order, current joining order, last relieving order, PAN, address proof ready
</th></tr>
<tr><th align=left>
Keep dates of each and every appointments/transfers/promotions ready
</th></tr>
</table>
</div>
<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:block;diabled:true
}

.section_header
{
	background-color:gray;
}
</style>



<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		

function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="gray";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				//hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					myself.style.background="#E4DDDD";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>




[6~<!-- A4=210x297 so width=840 height=1200 -->




<?php 
//Form element at this place (outside table below , with closing outside required to make  POST visible if added by javascript
echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '<table class=noborder style="background-color:lightblue;"><tr><td>';
//<!-- menu() have its own <form>. Never enclose it in another form -->
//menu();
echo '</td><td valign=top >';

//Form element at this place (inside a table, with closing outside donot make POST visible if added by javascript
//echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '</td><td  valign=top>';
//echo $save_msg;
echo '</td></tr></table>';
?>
<!--
<span class=section_header id=genral_help_sh onclick="showhide_with_label('general_help',this,'general help')">hide General Help</span>
-->


<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>>

<div id=general_help>
<table class=border>
<!--
<tr><td>
Click <span style="background-color:gray;">Gray </span> buttons to start filling details of respective section.
</td></tr>
<tr><td>
Click <span style="background-color:yellow;">yellow </span> buttons to get help.
</td></tr> 
<tr><td>
<span style="background-color:lightpink;">Pink fields</span> need  pdf/jpg upload. 
</td></tr> 
<tr><td>
If smart phone is used to fill this form, use camara to snap and <span style="background-color:lightpink;">upload</span> documents
</td></tr> 
<tr><td>
Some of the details will be automatically filled, AFTER data is saved.
</td></tr>
<tr><td>
Save frequently(<span style="background-color:lightgreen;">Green Button</span>). Saved data is automatically retrived.
</td></tr>
<tr><th align=left>
Keep elctronic/physical copy of photo id, photo, degree, registration, current appointment order, current joining order, last relieving order, PAN, address proof ready
</th></tr>
<tr><th align=left>
Keep dates of each and every appointments/transfers/promotions ready
</th></tr>
-->
</table>
</div>
<div style="width:16cm;background-color:lightpink;">
<h2><p align=center><b><u>DECLARATION FORM : 2017 - 2018 - FACULTY</u></b></p></h2>

<!--
<h4><p align=center><b><u><span style="background:lightpink;">Note: Use Declaration->Check menu to varify the correctness of details filled</span></u></b></p></h4>
-->

<p>
<span>
<?php
//	echo '<input style="background-color:lightgreen;" name=action type=submit value=save title="save frequently to prevent repeat attempts">';
?>
</span>

<!--
<span class=section_header onclick="showhide_with_tab('for_assessors'			,'section','section_header',this)">For Assessors</span>
<span class=section_header onclick="showhide_with_tab('identity'					,'section','section_header',this)">Identity Information</span>
<span class=section_header onclick="showhide_with_tab('contact'					,'section','section_header',this)">Contact</span>
<span class=section_header onclick="showhide_with_tab('service'					,'section','section_header',this)">Service</span>
<span class=section_header onclick="showhide_with_tab('qualification_section'	,'section','section_header',this)">Qualification</span>
<span class=section_header onclick="showhide_with_tab('experience_section'		,'section','section_header',this)">Experience</span>
<span class=section_header onclick="showhide_with_tab('present_appointment'		,'section','section_header',this)">Present Appointment</span>
<span class=section_header onclick="showhide_with_tab('MET'						,'section','section_header',this)">MET</span>
<span class=section_header onclick="showhide_with_tab('MCI'						,'section','section_header',this)">MCI</span>
<span class=section_header onclick="showhide_with_tab('publication'				,'section','section_header',this)">Publication</span>
<span class=section_header onclick="showhide_with_tab('income'					,'section','section_header',this)">Income</span>
<span class=section_header onclick="showhide_with_tab('declaration'				,'section','section_header',this)">Declaration</span>
-->

</p>

<div id=for_assessors style="display:block;"  class=section>

<p><b>NAME OF THE COLLEGE: 
	<input type=text placeholder="autofilled" readonly size=30 name=declaration_college id=declaration_college value=
	<?php echo '\''.$current_appointment['institute'].'\'';?>
	>
	<input type=text placeholder="autofilled" readonly size=15  name=declaration_city id=declaration_city value=
		<?php 
			$ex=explode(" ",$current_appointment['institute']);
			$tot=count($ex);
			echo $ex[$tot-1];
		?>
	>
</b></p>
<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>
</div>




</p>
<div id=identity style="display:block;"  class=section>
	

<table class="noborder">
<tr>
<td>
	
	<p>1.(a)Name<input type=text placeholder="Lastname Firstname Middlename" name=name id=name size=40 value=

	<?php echo '\''.$staff_detail['fullname'].'\''; ?>

	></p>

	<p>1.(b) Date of Birth 


	<input readonly	id=dob class="datepicker" size="10" name=dob value=
	<?php echo '\''.mysql_to_india_date($staff_detail['dob']).'\''; ?>
	>

	&amp; Age<input readonly type=text name=age value=

	<?php 
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo '\''.$diff.'\'';
	?>

	>

	</p>

	<p><b>1.(c)</b>Submit Photo ID proof issued by Govt. Authorities :</p>

	<p>
	<?php
		echo '<table class=border><tr><td>';
		echo 'Photo ID submitted :';
		echo '</td>';
		echo '<td>'.
		$photo['proof_type'];
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number:<input type=text name=photo_id_number value=\''.$photo['proof_number'].'\'';	
		echo '</td>';
		echo '<td>';
		echo 'Issued by:<input type=text name=photo_id_issued_by value=\''.$photo['proof_issued_by'].'\'';	
		echo '</td></tr>';
		echo '</table>';
	?>
	</p>

</td>

<td>
	<?php
			echo '<table class=noborder>
			<tr>
			<td align=center>';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>';
			echo '</table>';
	?>

</td>
</tr>
</table>

</div>
<?php

?>

<?php
if($donot_hide=='qualification')
{
	$qualification_style='display:block';
}
else
{
	$qualification_style='display:block';
}

if($donot_hide=='experience')
{
	$experience_style='display:block';
}
else
{
	$experience_style='display:block';
}

?>

<div id=qualification_section style="<?php echo $qualification_style; ?>"  class=section>
	
<!---start of qualification and experience -->
<p>
<table class="border" style="background-color:#A6AEC8"  id="qualification_table">
<tr><th colspan=7 style="text-align:left;">
<b>2.</b>
 Qualifications :</th></tr>
<tr><td colspan=7>
</td></tr>	
	
<tr>
	<th>del</th><th>Qualification</th><th>College</th><th>	University	</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
view_table_qualification($link);
?>


<tr>
	<th  colspan=6 style="text-align:left;">Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets
7after scoring out whichever is not applicable.</th></tr>
<tr><td  colspan=6 ><b>2.(a)</b> Copy of Degree certificates  of MBBS and PG degree attached - <?php echo $degree_attachment_str; ?></td></tr>
<tr><td  colspan=6 ><b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  <?php echo $reg_attachment_str; ?></td></tr>
</table>

</p>

</div>
<div id=experience_section style="<?php echo $experience_style; ?>"   class=section>

<p>
<table class="border"   style="background-color:#90939A" id="experience_table">
<tr><th colspan=7> <b>3.(a)</b> Details of the teaching experience till date.</th></tr>
<tr>
	<th>Del</th>
	<th >Designation</th>
	<th >Type</th>
	<th >Department</th>
	<th >Name of Institution</th>
	<th >From - To - Total</th>
</tr>

<?php

view_table_experience($link);

?>



<tr>
<tr><td  colspan=7><b>Note:-</b>Tutor working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized/permitted
medical institute to be consider as senior resident.</td></tr>
</table>

</div>
<!--
	<table class=border style="width:100%;">
		<tr><td colspan=10><b>3(b).</b>To be filled in by Ex Army Personnel only: <b>(Not used for online filling of declaration)</b></td></tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
-->
</p>

<!-- end of qualification and experience -->



<div id=present_appointment style="display:block;"   class=section>
<p><b>Note:1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty. 2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</b></p>
<p>1.(d)i.Present Designation:
<?php 
	echo '<input type=text readonly value=\''.$current_appointment['post'].'\'>';
	//mk_select_from_sql($link,'select * from designation_type','designation_type','present_designation','',
	//$current_appointment['post']);
?>

</p>



<p>1.(d)ii. Department: 

	<?php
		echo '<input type=text readonly value=\''.$current_appointment['department'].'\'>';

	//mk_select_from_sql($link,'select department from department','department','present_department','',$current_appointment['department']);
	?>

</p>
<p>1.(d)iii.College: 
	<?php
		echo '<input  size=40  type=text 
				id=present_college_name 
				name=present_college_name readonly 
				value=\''.$current_appointment['institute'].'\'>';
	?>

<!-- <input size=40 type=text name=present_college_name id=present_college_name value="Government Medical College" ></p> -->


<p>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo '<input  size=10  type=text 
				id=present_city 
				name=present_city readonly 
				value=\''.$city.'\'>';
	?>

<p>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo 'Contactual';}else{echo 'Regular';}
?>

</p>

<p>

<table>
	<tr>
		<td>1.(e)Residential  Address of employee :</td>
		<td><?php

		echo $staff_detail['residencial_address'];

?>		
		</td>
	</tr>
</table>
</p>


<p><table class=noborder style="width:190mm;"><tr><td>Signature of Faculty</td><td><input type=text readonly placeholder="required in physical copy"></td><td>Signature of Dean</td<td><input type=text  placeholder="required in physical copy" readonly></td></tr><table></p>

<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="border">
	<tr>
		<td>
<b>1.(j)</b>
Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td></tr><tr>
			
		</td>
	</tr>
</table>

<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=border>
	<tr>
		<td>
<b>4.(a)</b
Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
	<tr class=upload>
		<td>
		<?php
		echo '<input  name=last_relieving_order type=file><--Upload relieving order';
			echo '</td></tr>
			<tr  class=upload><td>';
		echo 'Uploaded:';
		echo $previous_relieving_order['attachment_filename']; 
		?>

		</td>
	</tr>
	<tr>
		<td>
			<b>4.(b)</b> I am not working in any other medical college/dental college in the State or outside the State in any capacity Regular / Contractual.
		</td>
	</tr>
</table>
	
</p>

</div>

<div id=MET style="display:block;"   class=section>

<p><b>1.(f) </b>Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo '<input type=radio name=MET value=yes checked onclick="show(\'MET_details\')">Yes /<input type=radio name=MET value=no onclick="hide(\'MET_details\')">No</p>';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo '<input type=radio name=MET value=yes onclick="show(\'MET_details\')">Yes /<input type=radio name=MET checked value=no onclick="hide(\'MET_details\')">No</p>';
 
	echo '<table class=border id=MET_details style="display:block;">';
}

?>
		
		<tr>
			<th colspan=2  style="width:60%">Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td><input type=text style="width:95%;height:100%;" name=met_center value=
			<?php 
					echo '\''.$met['center'].'\'';
			?>
			
			></td>
			<td style="width:20%">MET Place:</td><td><input type=text  style="width:95%;height:100%;"  name=met_place
			value=
			<?php 
					echo '\''.$met['place'].'\'';
			?>
			
			></td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td><input type=text style="width:95%;height:100%;"  name=met_observer value=
			<?php 
					echo '\''.$met['observer'].'\'';
			?>></td>
			<td  style="width:20%">MET Date:</td><td><input readonly	id=met_date class="datepicker" size="10" name=met_date value=
			<?php 
					echo '\''.mysql_to_india_date($met['date']).'\'';
			?>></td>

		</tr>
	</table>

</div>


<div id=contact style="display:block;"   class=section>
	
<p>
	<table class="border">
		<tr>
			<td colspan=2><button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of address proof')"><b>1.(g)</b></button>Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo $proof_of_residence_attached.'</td>';	
				echo '</tr><tr><td class=upload>';
				echo '<input name=proof_of_residence type=file><--Upload resi proof';
				echo '</td></tr>
							<tr><td class=upload>';	
				echo 'uploaded:'.$r_proof['filename'].'</td>'; 
			?>
			
		</tr>
	</table>
</p>
			

<p><b>1.(h)</b>	Contact Particulars:</p>
<p>
<table>
<tr><td>Tel (Office)(with STD code):</td><td><input type=text  size=30 name=office_phone value="0261-2244175"
value=
			<?php 
					echo '\''.$staff_detail['office_phone'].'\'';
			?>
			
></td><tr>
<tr><td>Tel(Residence): (with STD code)</td><td><input size=30 type=text name=residencial_phone
value=
			<?php 
					echo '\''.$staff_detail['residencial_phone'].'\'';
			?>
></td><tr>
<tr><td>E-mail address: </td><td><input type=text  size=30 name=email
value=
			<?php 
					echo '\''.$staff_detail['email'].'\'';
			?>
></td><tr>
<tr><td>Mobile Number: </td><td><input type=text  size=30 name=mobile
value=
			<?php 
					echo '\''.$staff_detail['mobile'].'\'';
			?>
></td><tr>
</table>
<table>
	
</table>
</div>


<div id=MCI style="display:block;"   class=section>

<p>
	<table class=border>
	<tr><td  colspan=2><b>Note:</b>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.  <br>If yes, please give details.</td></tr>
	<tr><td   colspan=2 align=center>Give at least date of last appearance</td></tr>
	<tr><td   colspan=2 align=center>other details are automatically obtained from complated experience table</td></tr>
	<tr><th align=center >Dates of appearance in MCI Inspection:</th></tr>
	<tr><td align=center><input name=mci_date id=mci_date class=datepicker>
	<input name=action value=add_mci_date type=submit></td>
	</tr>
	<tr>
	<td colspan=3 align=center><?php view_table_mci($link); ?></td>
	</tr>
	</table>
	
	<table>
		<tr>
			<td>1.(d)vi. Date of appearance in Last MCI - UG/PG/Any Other Assessment:</td><td><b>
	
	
	<?php
			echo mysql_to_india_date($last_mci_date['md']); 
			//echo '<td><input readonly	value=\''.mysql_to_india_date($last_mci['last_mci_date']).'\' type=text id=last_mci_date class="datepicker" size="10" name=last_mci_date></td>';
	?>
	
		</b></td></tr>
	</table>

	</p>

	<?php
	//echo '<pre>';
	//echo 'a';
	//print_r($last_mci_details);
	//echo 'b';

	//print_r($current_appointment);
	//echo '</pre>';
	
	
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<p>1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute - <b>'.$last_mci_in_current_institute.'</b></p>';

		echo '<p>1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></p>';
		 
	?>

<table><tr><td><b>7</b> I have appeared in the last inspection of the same College in the same post. </td><td>

<?php

	if($last_mci_as_current_post=='Yes' && $last_mci_in_current_institute=='Yes')
	{
		echo '<b>Yes</b>';
	}
	else
	{
		echo '<b>No</b>';
	}

?>

</td></tr></table>
</p>


</div>

<div id=publication style="display:block;"   class=section>
<p>
<table>
	<tr><td colspan=0><b>5.</b>  Number of  Research publications in Index Journals:</td></tr>
	<tr><td><b>5.(a)</b> International Journals:</td><td><input type=text name=ipublication value=
	<?php
	echo '\''.$publication['international'].'\'';
	?>
	
	></td></tr>
	<tr><td><b>5.(b)</b> National Journals:</td><td><input type=text name=npublication  value=
	<?php
	echo '\''.$publication['national'].'\'';
	?>
	></td></tr>
	<tr><td><b>5.(c)</b> State/Institutional Journals:</td><td><input type=text name=spublication  value=
	<?php
	echo '\''.$publication['state'].'\'';
	?>
	></td></tr>
</table>
</p>

</div>

<div id=income style="display:block;"   class=section>
<p>
<table class=border>
	<tr><td><button type=button style="background-color:yellow;" onclick="alert('Upload scanned / camara-photo of PAN card')" ><b>6.(a)</b></button> My PAN Card No. is 

	
	<input type=text name=PAN_number value=
	<?php
		echo $pan['pan'];
	?>
	>
	</td></tr><td class=upload>
	<?php	
	echo '<input type=file name=PAN_card ><--Upload PAN';
	echo '</td></tr>
			<tr><td class=upload>';
	?>
	
	Uploaded: <?php echo $pan['attachment_filename'] ?></td></tr>
	

</table>
</p>
<p>
<table class=border style="width:70%;" >	

	<tr><td colspan=3><button type=button style="background-color:yellow;" type=button onclick="alert('To be of filled manually when declaration form is printed')"><b>6.(b)</b></button> I have drawn total emoluments from this college in the current financial year as under:-</td></tr>
	
	<tr><th>Month</th><th>Amount Received</th><th>TDS</th></tr>
	<tr><td>Apr 2016</td><td></td><td></td></tr>	
	<tr><td>May 2016</td><td></td><td></td></tr>	
	<tr><td>Jun 2016</td><td></td><td></td></tr>	
	<tr><td>Jul 2016</td><td></td><td></td></tr>	
	<tr><td>Aug 2016</td><td></td><td></td></tr>	
	<tr><td>Sep 2016</td><td></td><td></td></tr>	
	<tr><td>Oct 2016</td><td></td><td></td></tr>	
	<tr><td>Nov 2016</td><td></td><td></td></tr>	
	<tr><td>Dec 2016</td><td></td><td></td></tr>	
	<tr><td>Jan 2017</td><td></td><td></td></tr>	
	<tr><td>Feb 2017</td><td></td><td></td></tr>	
	<tr><td>Mar 2017</td><td></td><td></td></tr>	
	</table>
</table>

<table><tr><td><button  type=button style="background-color:yellow;" onclick="alert('PAN uploaded above. Form 16 to be attached manually, when declaration form is printed')"><b>6.(c)</b></button> (Copy of my PAN &amp; Form 16 (TDS certificate) for financial year 2015-16 are attached)</td></tr></table>
</p>

</div>

<div id=declaration style="display:block;"   class=section>
<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><button  type=button style="background-color:yellow;" onclick="alert('If doing private practice fill details, when declaration form is printed')"><b>3</b></button></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%"><input readonly type=text placeholder="to written when signed"></td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=border style="width:100%">
	<tr><td  style="width:25%">Date:</td><td  style="width:25%"><input readonly type=text placeholder="to written when signed"></td><td   style="width:25%" align=center>Signed by HOD</td><td  style="width:25%">Countersigned by the Director/Dean/Principal</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>

<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed by the Teacher</th><th>Signed by the HOD</th></tr>
<tr><td><input readonly type=text placeholder="Sign in physical copy"></td><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>
<tr><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
</table>
</p>

<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>
</div>

</form>
</body>
</html>

<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=noborder><tr><td>
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_qualification value=\''.$ra['qualification_id'].'\'>X</button></td><td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:block;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:block;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}


function view_table_experience($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	while($ra=mysqli_fetch_assoc($result))
	{		
	if(strlen($ra['to_date'])==0)
	{
		$to_date='<span style="background-color:lightpink;">till_date</span>';
		$diff=get_date_diff_as_ymd($ra['from_date'],date('Y-m-d'));
	}
	else
	{
		$to_date=$ra['to_date'];
		$diff=get_date_diff_as_ymd($ra['from_date'],$ra['to_date']);
	}
	/*$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>From:'.$ra['from_date'].','.$ra['from_time'].'<br>To:'.$to_date.','.$ra['to_time'].'<br>
			Total:'.$diff.'</td>
			';
			* */
			
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>'.$ra['from_date'].','.$ra['from_time'].'>>'.$to_date.','.$ra['to_time'].' ('.$diff.')</td>
			';
			echo $raw_html;
		}
}


function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
}

?>

<?php
//echo '<pre>';
//print_r($_POST);
//print_r($_FILES);
//echo if_in_interval("2010-11-01","2010-11-01","2010-11-01");
//echo if_in_interval("2010-02-02","2010-02-01","2010-03-03");
//echo if_in_interval("2010-11-01","2011-11-01","2011-11-01");
//echo if_in_interval("2010-11-01","2009-11-01","2009-11-01");
//echo if_in_interval("2010-11-01","2012-11-01","2009-11-01");
//echo get_exterience("2016-12-12","2016-12-13");
//echo '</pre>';
echo '</div>';
?>
<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();
menu();


echo '<h2>Please note following. It will help you to complate declaration form</h2>'; 
echo '<h2>Correct errors and refresh this page</h2>'; 
echo '<h2>Ensure there are errors displayed below, for better use of staff data in future</h2>'; 


/////////////staff table////////////////

$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');

if(strlen($staff_detail['fullname'])==0){echo '<h4><li>Write fullname with surname first, as in service records</li></h4>'; }

if(
	strlen($staff_detail['dob'])==0 
	||
	$staff_detail['dob']=='0000-00-00'
	)
	{echo '<h4><li>Write proper date of birth</li></h4>'; }
	
if(strlen($staff_detail['residencial_address'])==0){echo '<h4><li>Write proper recidencial address</li></h4>'; }

if(strlen($staff_detail['residencial_phone'])==0){echo '<h4><li>Write proper residencial phone</li></h4>'; }
if(strlen($staff_detail['mobile'])<10){echo '<h4><li>Write proper mobile number</li></h4>'; }
if(strlen($staff_detail['email'])==0 || !filter_var($staff_detail['email'],FILTER_VALIDATE_EMAIL))
	{echo '<h4><li>Write proper email</li></h4>'; }
if(strlen($staff_detail['catagory'])==0){echo '<h4><li>Select catagory as in service records</li></h4>'; }

/////////////staff table complate////////////////

/////////////photo table////////////////

$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');
if(strlen($photo['proof_type'])==0){echo '<h4><li>Select photo id proof type</li></h4>'; }
if(strlen($photo['proof_number'])==0){echo '<h4><li>Write photo id proof number</li></h4>'; }
if(strlen($photo['proof_issued_by'])==0){echo '<h4><li>Write issue authority of photo id proof</li></h4>'; }
if(strlen($photo['photo_id'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo id. preferably in jpg or pdf format</li></h4>'; }
if(strlen($photo['photo'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo. If it is not jpg format, it will fail to display</li></h4>'; }

/////////////photo table complate////////////////

/////////////departmental_exam table ////////////////
$dep_ex=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['cccplus'])==0){echo '<h4><li>Select CCC+ exam status as per service records</li></h4>'; }
if(strlen($dep_ex['gujarati'])==0){echo '<h4><li>Select GUJARATI exam status as per service records</li></h4>'; }
if(strlen($dep_ex['hindi'])==0){echo '<h4><li>Select HINDI exam status as per service records</li></h4>'; }

/////////////departmental_exam table complate////////////////
 
//////////////Qualification,experience, check for at least one raw/////////

function count_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}
if(count_qualification($link)==0){echo '<h4><li>Add Qualification. You must be having at least one!!</li></h4>'; }

function check_current_experience($link)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is null ';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}

$cur_exp_num=check_current_experience($link);

if($cur_exp_num==0)
{
	echo '<h4><li>Add CURRENT job details in Experience tab. <li>Have you forgotten to select til_date in current experience? <li>current experience needs to be added before its appointment orders, joining order and previous relieving order is uploaded</li></h4>'; 
}
elseif($cur_exp_num>1)
{
	echo '<h4><li>There can not be more than two current experience. Have you added more than one "<span style="background:lightpink;"> till_date"</span></li></h4>';
	
}
else
{
	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
		
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
			
	if($current_appointment_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> Current appointment order</li></h4>'; }
	
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');
	if($current_joining_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> joining order at current institute</li></h4>'; }

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');
	if($previous_relieving_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> relieving order from previous institute (ignore if this is your first appointment</li></h4>'; }
	
}
	
///////PAN card////////////
$dep_ex=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['attachment'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> PAN card</li></h4>'; }

?>

<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<html>
<head>
<!--
<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 
-->
<style>
	
table{
   border-collapse: collapse;
   font-family:arial;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:block;
}

.section_header
{
	background-color:gray;
}
</style>



<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		

function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="gray";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				//hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					myself.style.background="#E4DDDD";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>

<body>


<!-- A4=210x297 so width=840 height=1200 -->



<div style="display:table;width:20cm;background-color:white;margin:1cm 1cm 1cm 1cm;border:1px solid lightgray;">
<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>

<p><b>NAME OF THE COLLEGE: 
	<?php echo $current_appointment['institute'];?>
</b></p>

<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>


<h3><p align=center><b><u>DECLARATION FORM : 2018 - 2019 - FACULTY</u></b></p></h3>
</p>
	
<p>(Note: It is responsibility of Dean, HOD & Faculty to submit only the declaration form of faculty who has not 
appeared for assessment in ny other college during the academic year and working fulltime)</p>

<table class="noborder">
<tr>
<td>
	
	<p>1.(a)Name: 

	<?php echo $staff_detail['fullname']; ?>

	</p>

	<p>1.(b) Date of Birth 


	<?php echo mysql_to_india_date($staff_detail['dob']); ?>

	&amp; Age:

	<?php 
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo $diff;
	?>
	</p>

	<p><b>1.(c)</b>Submit Photo ID proof issued by Govt. Authorities :</p>

	<p>
	<?php
		echo '<table class=noborder><tr><td>';
		echo 'Photo ID submitted: '.$photo['proof_type'];
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number:'.$photo['proof_number'];	
		echo ' </td></tr><td>Issued by:'.$photo['proof_issued_by'];	
		echo '</td></tr>';
		echo '</table>';
	?>
	</p>

</td>

<td>
	<?php
			echo '<table class=noborder>
			<tr>
			<td align=center>';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>';
			echo '</table>';
	?>

</td>
</tr>
</table>

<?php

?>



<p>Note:1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty. 2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</p>
<p>1.(d)i.Present Designation:
<?php 
	echo $current_appointment['post'];
?>
</p>
<p>1.(d)(i)a Certified copies of present appointment order at present institute attached.</p>

<p>1.(d)ii. Department: 

	<?php
		echo $current_appointment['department'];
	?>

</p>
<p>1.(d)iii.College: 
	<?php
		echo $current_appointment['institute'];
	?>

<p>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo $city;
	?>

<p>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo '(a)Contactual';}else{echo '(a)Regular';}
	echo '(b) Full time (c) Without private practice';
?>

</p>

<p>








	<?php
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<p>1.(d)vi. Date of appearance in Last MCI  UG/PG/Any Other Assessment:'.$last_mci_date['md'].'</p>';
		echo '<p>1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute - <b>'.$last_mci_in_current_institute.'</b></p>';

		echo '<p>1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></p>';
		
		echo '<p><table><tr><td valign=top>1.(d)ix</td><td>Whether you have retired from Government Medical College - Yes/No. <br><br>If Yes, Designation ____________________</b></td></tr></table></p>';		 
	?>

<p><br><br><br><table class=noborder style="width:190mm;"><tr><td>_____________</td><td align=right>_______________</td></tr><tr><td>Signature of Faculty</td><td align=right>Signature of Dean with stamp</td></tr><table></p>


<p style="page-break-after:always;"></p> 


<table>
	<tr>
		<td valign=top>1.(e) (a) Present Residential  Address of employee :</td>
		<td><?php
 
/*
 * residencial address column spelling changed and permanent added SMP
 * */
 
		echo '<pre>'.$staff_detail['present_residential_address'].'</pre>';

?>		
		</td>
	</tr>


	<tr>
		<td valign=top>1.(e) (b) Permanent Residential  Address of employee :</td>
		<td><?php
 
/*
 * residencial address column spelling changed and permanent added SMP
 * */
 
		echo '<pre>'.$staff_detail['permanent_residential_address'].'</pre>';

?>		
		</td>
	</tr>
</table>

</p>




<!-- <p style="page-break-after:always;"></p> -->

<p><b>1.(f) </b>Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo ':Yes';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo ':No';
 
	echo '<table class=border id=MET_details style="display:block;">';
}

?>
		
		<tr>
			<th colspan=2  style="width:60%">Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td>
			<?php 
					echo $met['center'];
			?>
			
			</td>
			<td style="width:20%">MET Place:</td><td>
			<?php 
					echo $met['place'];
			?>
			
			</td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td>
			<?php 
					echo $met['observer'];
			?></td><td>Date</td><td>
			<?php 
					echo mysql_to_india_date($met['date']);
			?></td>

		</tr>
	</table>



	
<p>
	<table class="noborder">
		<tr>
			<td colspan=2>
<b>1.(g)</b>
Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo $proof_of_residence_attached.'</td>';
			?>
			
		</tr>
	</table>
</p>
			

<p><b>1.(h)</b>	Contact Particulars:</p>
<p>
<table>
<tr><td>Tel (Office)(with STD code):</td><td>
			<?php 
					echo $staff_detail['office_phone'];
			?>
			
</td><tr>
<tr><td>Tel(Residence): (with STD code)</td><td>
			<?php 
					echo $staff_detail['residencial_phone'];
			?>
</td><tr>
<tr><td>E-mail address: </td><td>
			<?php 
					echo $staff_detail['email'];
			?>
</td><tr>
<tr><td>Mobile Number: </td><td>
			<?php 
					echo $staff_detail['mobile'];
			?>
</td><tr>
</table>


</td></tr></table>
<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="noborder">
	<tr>
		<td><b>1.(j)</b>Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td>
	</tr>
</table>

</p>

	
<!---start of qualification and experience -->
<p>

<b>2.</b>
 Qualifications :</p>
<table class="border" id="qualification_table">
<tr>
	<th>Qualification</th><th>College</th><th>	University	</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
view_table_qualification($link);
?>
</table>

<p>Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets after scoring out whichever is not applicable.</p>
<p><b>2.(a)</b>Copy of Degree certificates  of MBBS and PG degree attached - 
<?php 
if(strlen($degree_attachment_str)>0){echo 'Yes';}else{echo 'No';} 
?>
</p>
<p>
<b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  
<?php 
if(strlen($reg_attachment_str)>0){echo 'Yes';}else{echo 'No';} 
?>
</p>



<p>
 <b>3.(a)</b> Details of the teaching experience till date.
 </p>
 
<p>
	<table class="border"   id="experience_table">

<?php
$ar=get_experience_mci($link,$_SESSION['login']);
print_experience_delcaration($ar);
//view_table_experience($link);

?>
</table>
</font>
</p>


<p><b>Note:-</b>Tutor/Resident working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized /permitted medical institute to be consider as senior resident.</p>


<p><b>3(b).</b>To be filled in by Ex Army Personnel only</p>
	<table class=border style="width:100%;">
		<tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>2.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>3.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
<b>Note:</b>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.  <br>If yes, please give details.
<br>Date of appearance:
<?php echo mysql_to_india_date($last_mci_date['md']);?> 
</p>

<!-- end of qualification and experience -->



<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=noborder>
	<tr>
		<td>
<b>4.</b>
Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring / transfering  .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
</table>
	
</p>





<p>
<table>
	<tr><td colspan=0><b>5.</b>  Number of  Research publications in Index Journals:</td></tr>
	<tr><td><b>5.(a)</b> International Journals:</td><td>
	<?php
	echo $publication['international'];
	?>
	
	</td></tr>
	<tr><td><b>5.(b)</b> National Journals:</td><td>
	<?php
	echo $publication['national'];
	?>
	</td></tr>
	<tr><td><b>5.(c)</b> State/Institutional Journals:</td><td>
	<?php
	echo $publication['state'];
	?>
	</td></tr>
</table>
</p>



<p>
<table class=noborder>
	<tr><td><b>6.(a)</b>My PAN Card No. is :
	<?php
		echo $pan['pan'];
	?>
	
	</td><tr>
	<tr><td><b>6.(b)</b>My AADHAR Card No. is :
	<?php
		echo $staff_detail['id'];
	?>
	
	</td><tr>

</table>
</p>
<p>
	<b>6.(c)</b>I have drawn total emoluments from this college in the current financial year as under:-
<table class=border style="width:80%;" >	

	
	
	<tr><th>Month</th><th>Amount Received</th><th width=30%>TDS</th></tr>
	<tr><td>Apr 2017</td><td></td><td></td></tr>	
	<tr><td>May 2017</td><td></td><td></td></tr>	
	<tr><td>Jun 2017</td><td></td><td></td></tr>	
	<tr><td>Jul 2017</td><td></td><td></td></tr>	
	<tr><td>Aug 2017</td><td></td><td></td></tr>	
	<tr><td>Sep 2017</td><td></td><td></td></tr>	
	<tr><td>Oct 2017</td><td></td><td></td></tr>	
	<tr><td>Nov 2017</td><td></td><td></td></tr>	
	<tr><td>Dec 2017</td><td></td><td></td></tr>	
	<tr><td>Jan 2018</td><td></td><td></td></tr>	
	<tr><td>Feb 2018</td><td></td><td></td></tr>	
	<tr><td>Mar 2018</td><td></td><td></td></tr>	
	</table>
</table>

<table><tr><td><b>6.(d)</b>(Copy of my PAN and Form 16 (TDS certificate) for financial year 2016-17 are attached)</td></tr></table>
</p>

<!--<p style="page-break-after:always;"></p>-->


<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><b>3</b></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>I am not working in any other medical/dental college in the state or outside the state in any capacity Regular/Contractual/Adhoc, Fulltime/Part time/Honorary.</td></tr>
<tr><td valign="top">6.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%">__________</td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td>__________</td><td align=right >__________</td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=noborder style="width:100%">
	<tr>
		<td  style="width:10%">Date:</td>
		<td  style="width:10%">__________</td>
		<td   style="width:40%" align=center>Signed by HOD</td>
		<td  style="width:40%">Countersigned by the Director/Dean/Principal</td>
	</tr>
	<tr>
		<td >Place:</td>
		<td>__________</td>
		<td align=center>__________</td>
		<td>__________</td>
	</tr>
</table>
</p>
<p style="page-break-after:always;"></p>
<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of present residence. </td><td>Yes / No</td></tr>
<tr><td>4(a)</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of permanent residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
<tr><td>13</td><td>Copy of UG recognized teacher, letter from affiliated university</td><td>Yes / No</td></tr>
<tr><td>14</td><td>Copy of PG recognized teacher, letter from affiliated university (for PG Assessment)</td><td>Yes / No</td></tr>
<tr><td>15</td><td>Copy of AADHAR card</td><td>Yes / No</td></tr>


</table>
</p>

<p>
<table class=noborder style="width:100%;">
<tr><td><b>Signed by the Teacher</td><td><b>Signed by the HOD</td></tr>
<tr><td><b>Date</td><td><b>Date</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>

<tr><td><b>Date</td></tr>

</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>

<tr><td><b>Date</td></tr>
</td></tr>
</table>
</p>
<p align=center><b>Note:</b></p>
<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>


</div>
</body>
</html>
<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=noborder><tr><td>
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr>
			<td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:block;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:block;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}



function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
}


function print_experience_delcaration($ar)
{
	echo 	'<table class=border>';
	echo '<th>Designation</th><th>Department</th><th>Institute</th><th>From</th><th>To</th><th width=17%>Total</th>';
	foreach($ar as $v)
	{
		
		if(strlen($v['to_date'])==0)
		{
			$to_date='till date';
			$diff=get_date_diff_as_ymd($v['from_date'],date('Y-m-d'));
		}
		else
		{
			$to_date=mysql_to_india_date($v['to_date']);
			$diff=get_date_diff_as_ymd($v['from_date'],$v['to_date']);
		}
	
		echo 	'<tr>';
		echo '<td>'.$v['post'].'</td>';
		echo '<td>'.$v['department'].'</td>';
		echo '<td>'.$v['institute'].'</td>';
		echo '<td>'.mysql_to_india_date($v['from_date']).'</td>';
		echo '<td>'.$to_date.'</td>';
		echo '<td>'.$diff.'</td>';
		echo 	'</tr>';
		
	}
	echo '</table>';
}

?>


<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;diabled:true
}

.section_header
{
	background-color:gray;
}
</style>



<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		

function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="gray";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					myself.style.background="#E4DDDD";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>




<!-- A4=210x297 so width=840 height=1200 -->

<body style="background-color:lightgray;">



<?php 
//Form element at this place (outside table below , with closing outside required to make  POST visible if added by javascript
echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '<table class=noborder style="background-color:lightblue;"><tr><td>';
//<!-- menu() have its own <form>. Never enclose it in another form -->
menu();
echo '</td><td valign=top >';

//Form element at this place (inside a table, with closing outside donot make POST visible if added by javascript
//echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '</td><td  valign=top>';
echo $save_msg;
echo '</td></tr></table>';
?>
<span class=section_header id=genral_help_sh onclick="showhide_with_label('general_help',this,'general help')">hide General Help</span>



<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>>

<div id=general_help>
<table class=border>

<tr><td>
Click <span style="background-color:gray;">Gray </span> buttons to start filling details of respective section.
</td></tr>
<tr><td>
Click <span style="background-color:yellow;">yellow </span> buttons to get help.
</td></tr> 
<tr><td>
<span style="background-color:lightpink;">Pink fields</span> need  pdf/jpg upload. 
</td></tr> 
<tr><td>
If smart phone is used to fill this form, use camara to snap and <span style="background-color:lightpink;">upload</span> documents
</td></tr> 
<tr><td>
Some of the details will be automatically filled, AFTER data is saved.
</td></tr>
<tr><td>
Save frequently(<span style="background-color:lightgreen;">Green Button</span>). Saved data is automatically retrived.
</td></tr>
<tr><th align=left>
Keep elctronic/physical copy of photo id, photo, degree, registration, current appointment order, current joining order, last relieving order, PAN, address proof ready
</th></tr>
<tr><th align=left>
Keep dates of each and every appointments/transfers/promotions ready
</th></tr>
</table>
</div>

<h2><p align=center><b><u>DECLARATION FORM : 2017 - 2018 - FACULTY</u></b></p></h2>
<h4><p align=center><b><u><span style="background:lightpink;">Note: Use Declaration->Check menu to varify the correctness of details filled</span></u></b></p></h4>

<p>
<span>
<?php
	echo '<input style="background-color:lightgreen;" name=action type=submit value=save title="save frequently to prevent repeat attempts">';
?>
</span>
<span class=section_header onclick="showhide_with_tab('for_assessors'			,'section','section_header',this)">For Assessors</span>
<span class=section_header onclick="showhide_with_tab('identity'					,'section','section_header',this)">Identity Information</span>
<span class=section_header onclick="showhide_with_tab('contact'					,'section','section_header',this)">Contact</span>
<span class=section_header onclick="showhide_with_tab('service'					,'section','section_header',this)">Service</span>
<span class=section_header onclick="showhide_with_tab('qualification_section'	,'section','section_header',this)">Qualification</span>
<span class=section_header onclick="showhide_with_tab('experience_section'		,'section','section_header',this)">Experience</span>
<span class=section_header onclick="showhide_with_tab('present_appointment'		,'section','section_header',this)">Present Appointment</span>
<span class=section_header onclick="showhide_with_tab('MET'						,'section','section_header',this)">MET</span>
<span class=section_header onclick="showhide_with_tab('MCI'						,'section','section_header',this)">MCI</span>
<span class=section_header onclick="showhide_with_tab('publication'				,'section','section_header',this)">Publication</span>
<span class=section_header onclick="showhide_with_tab('income'					,'section','section_header',this)">Income</span>
<span class=section_header onclick="showhide_with_tab('declaration'				,'section','section_header',this)">Declaration</span>

</p>
<div id=for_assessors style="display:none;"  class=section>

<p><b>NAME OF THE COLLEGE: 
	<input type=text placeholder="autofilled" readonly size=30 name=declaration_college id=declaration_college value=
	<?php echo '\''.$current_appointment['institute'].'\'';?>
	>
	<input type=text placeholder="autofilled" readonly size=15  name=declaration_city id=declaration_city value=
		<?php 
			$ex=explode(" ",$current_appointment['institute']);
			$tot=count($ex);
			echo $ex[$tot-1];
		?>
	>
</b></p>
<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>
</div>




</p>
<div id=identity style="display:none;"  class=section>
	

<table class="noborder">
<tr>
<td>
	
	<p>1.(a)Name<input type=text placeholder="Lastname Firstname Middlename" name=name id=name size=40 value=

	<?php echo '\''.$staff_detail['fullname'].'\''; ?>

	></p>

	<p>1.(b) Date of Birth 


	<input readonly	id=dob class="datepicker" size="10" name=dob value=
	<?php echo '\''.mysql_to_india_date($staff_detail['dob']).'\''; ?>
	>

	&amp; Age<input readonly type=text name=age value=

	<?php 
	//$diff=date_diff_to_year_month_days($staff_detail['dob'],strftime("%Y-%m-%d"));
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo '\''.$diff.'\'';
	?>

	>

	</p>

	<p><button style="background-color:yellow;" type=button onclick="alert('(1) Upload pdf/jpg copy of photo ID proof. (2) Upload pdf/jpg of passport size photo')"><b>1.(c)</b></button>Submit Photo ID proof issued by Govt. Authorities :</p>

	<p>
	<?php
		echo '<table class=border><tr><td>';
		echo 'Photo ID submitted :';
		echo '</td>';
		echo '<td>';
		mk_select_from_sql($link,'select * from photo_id_proof_type','photo_id_proof_type','photo_id','',$photo['proof_type']);
		echo '</td></tr>';
		echo '<tr><td  class=upload>';
		echo '<input name=photo_id type=file><--Upload photo id';		
		echo '</td>';
		echo '<td class=upload>';
		echo 'uploaded:'.$photo['photo_id_filename']; 
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number:<input type=text name=photo_id_number value=\''.$photo['proof_number'].'\'';	
		echo '</td>';
		echo '<td>';
		echo 'Issued by:<input type=text name=photo_id_issued_by value=\''.$photo['proof_issued_by'].'\'';	
		echo '</td></tr>';
		echo '</table>';
	?>
	</p>

</td>

<td>
	<?php
			echo '<table class=noborder>
			<tr>
			<td align=center>';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>
			<tr><td  class=upload>';
			echo '<input name=photo type=file><--Upload photo';
			
			echo '</td></tr>
			<tr>';
			echo '<td class=upload>';
			echo 'uploaded:'.$photo['photo_filename']; 
			echo '</td></tr></table>';
	?>

</td>
</tr>
</table>

</div>
<?php

$de=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');
$opt=array('','Yes','No','Exempted');
$catagory=array('','General','SEBC','ST','SC');
echo '<div id=service style="display:none;"  class=section>';
echo '<table align=center class=border>';
	echo '<tr>';
		echo '<th colspan=2 >';
		echo 'Miscellenious Sevice data';
		echo '</th>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Catagory';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($catagory,'catagory','',$staff_detail['catagory']);
		echo '</td>';
	echo '</tr>';	
	echo '<tr>';
		echo '<td>';
			echo 'CCC+ Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'cccplus','',$de['cccplus']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Gujarati Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'gujarati','',$de['gujarati']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Hindi Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'hindi','',$de['hindi']);
		echo '</td>';
	echo '</tr>';
echo '</table>';

echo '</div>';
?>

<?php
if($donot_hide=='qualification')
{
	$qualification_style='display:block';
}
else
{
	$qualification_style='display:none';
}

if($donot_hide=='experience')
{
	$experience_style='display:block';
}
else
{
	$experience_style='display:none';
}

?>

<div id=qualification_section style="<?php echo $qualification_style; ?>"  class=section>
	
<!---start of qualification and experience -->
<p>
<table class="border" style="background-color:#A6AEC8"  id="qualification_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;" type=button 
			onclick="showhide('qualification_help')"> <b>2.</b></button> Qualifications :</th></tr>
<tr><td colspan=7>
	<table class=border style="background-color:lightblue;display:block;" id=qualification_help>
		<tr><td colspan=7 >(1) Fill Qualification details in blue row</td></tr>
		<tr><td colspan=7 >(2) Click [[Add qualification]]</td></tr>
		<tr><td colspan=7 >(3) College, University and Year are must for saving data</td></tr>
		<tr><td colspan=7 >(4) Click "X" beside the qualification to delete it</td></tr>
		<tr><td colspan=7 >(4) Upload Degree and Registration certificates where relavent</td></tr>
		<tr><td colspan=7 >(4) Delete if any mistake is done/ upload not done and add again</td></tr>
		
		</table>
</td></tr>	
	
<tr>
	<th>del</th><th>Qualification</th><th>College</th><th>	University	</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
add_qualification_raw($link);
view_table_qualification($link);
?>


<tr>
	<th  colspan=6 style="text-align:left;">Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets
after scoring out whichever is not applicable.</th></tr>
<tr><td  colspan=6 ><b>2.(a)</b> Copy of Degree certificates  of MBBS and PG degree attached - <?php echo $degree_attachment_str; ?></td></tr>
<tr><td  colspan=6 ><b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  <?php echo $reg_attachment_str; ?></td></tr>
</table>

</p>

</div>
<div id=experience_section style="<?php echo $experience_style; ?>"   class=section>

<p>
<table class="border"   style="background-color:#90939A" id="experience_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;" type=button 
			onclick="showhide('experience_help')"> <b>3.(a)</b></button> Details of the teaching experience till date.</th></tr>
<tr><td colspan=7>
	<table class=border style="background-color:lightblue;display:block;" id=experience_help>
		<tr><td colspan=7 >(1) Add all appointments/transfers/promotions saparately in new row.</td></tr>
		<tr><td colspan=7 >(2) Click [[Add experience]].</td></tr>
		<tr><td colspan=7 >(3) Change of type of appointment (e.g Adhoc->GPSC) also needs to be indicated saparately in new row.</td></tr>
		<tr><td colspan=7 >(4) Put CheckMark checkbox in "Name of Institution" column to write name of institute not present in dropdown list.</td></tr>
		<tr><td colspan=7 >(5) Ex-Army person can use this table to fill their details</td></tr>
		<tr><td colspan=7 >(6) Appointments with transfers shall be entered as respective appointment type</td></tr>
		<tr><td colspan=7 >(7) Each transfers will require different entry. Indicate correct TYPE of appointment appicable to transfer.</td></tr>
		<tr><td colspan=7 >(8) For Current appointment select 'till date' for 'to date'</td></tr>
		</table>
</td></tr>
<tr>
	<th>Del</th>
	<th >Designation</th>
	<th >Type</th>
	<th >Department</th>
	<th >Name of Institution</th>
	<th >From - To - Total</th>
</tr>

<?php
add_experience_raw($link);

view_table_experience($link);

?>



<tr>
<tr><td  colspan=7><b>Note:-</b>Tutor working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized/permitted
medical institute to be consider as senior resident.</td></tr>
</table>

</div>
<!--
	<table class=border style="width:100%;">
		<tr><td colspan=10><b>3(b).</b>To be filled in by Ex Army Personnel only: <b>(Not used for online filling of declaration)</b></td></tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
-->
</p>

<!-- end of qualification and experience -->



<div id=present_appointment style="display:none;"   class=section>
<p><b>Note:1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty. 2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</b></p>
<p>1.(d)i.Present Designation:
<?php 
	echo '<input type=text readonly value=\''.$current_appointment['post'].'\'>';
	//mk_select_from_sql($link,'select * from designation_type','designation_type','present_designation','',
	//$current_appointment['post']);
?>

</p>

<p><table class="border">
	<tr>
		<td>
			<button style="background-color:yellow;" type=button onclick="alert('Upload  not implemented yet')"><b>1.(d)(i)a</b></button> Certified copies of present appointment order at present institute attached.</td></tr><tr class=upload><td>
	
			<?php
				echo '<input name=present_appointment_order type=file ><--Upload appt/trnsfr order</td></tr><tr><td  class=upload>';	
				echo 'uploaded:'.$current_appointment_order['attachment_filename']; 
				
			?>
	
		</td>
	</tr>	
</table></p>

<p>1.(d)ii. Department: 

	<?php
		echo '<input type=text readonly value=\''.$current_appointment['department'].'\'>';

	//mk_select_from_sql($link,'select department from department','department','present_department','',$current_appointment['department']);
	?>

</p>
<p>1.(d)iii.College: 
	<?php
		echo '<input  size=40  type=text 
				id=present_college_name 
				name=present_college_name readonly 
				value=\''.$current_appointment['institute'].'\'>';
	?>

<!-- <input size=40 type=text name=present_college_name id=present_college_name value="Government Medical College" ></p> -->


<p>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo '<input  size=10  type=text 
				id=present_city 
				name=present_city readonly 
				value=\''.$city.'\'>';
	?>

<p>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo 'Contactual';}else{echo 'Regular';}
?>

</p>

<p>


	<tr>
		<td>1.(e)Residential  Address of employee :</td>
		<td><textarea cols=40 name=residencial_address>
<?php

		echo $staff_detail['residencial_address'];

?>		
		</textarea></td>
	</tr>
</table>
</p>


<p><table class=noborder style="width:190mm;"><tr><td>Signature of Faculty</td><td><input type=text readonly placeholder="required in physical copy"></td><td>Signature of Dean</td<td><input type=text  placeholder="required in physical copy" readonly></td></tr><table></p>

<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="border">
	<tr>
		<td><button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of photo ID proof')"><b>1.(j)</b></button> Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td></tr><tr>
			
		<td class=upload>
		<?php
		echo '<input type=file  name=present_joining_order><--Upload joining order</td></tr><tr><td  class=upload>';
		?>	
		Uploaded:
		<?php  echo $current_joining_order['attachment_filename'] ?>
		</td>
	</tr>
</table>

<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=border>
	<tr>
		<td>
			<button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of last relieving order ')"><b>4.(a)</b></button> Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
	<tr class=upload>
		<td>
		<?php
		echo '<input  name=last_relieving_order type=file><--Upload relieving order';
			echo '</td></tr>
			<tr  class=upload><td>';
		echo 'Uploaded:';
		echo $previous_relieving_order['attachment_filename']; 
		?>

		</td>
	</tr>
	<tr>
		<td>
			<b>4.(b)</b> I am not working in any other medical college/dental college in the State or outside the State in any capacity Regular / Contractual.
		</td>
	</tr>
</table>
	
</p>

</div>

<div id=MET style="display:none;"   class=section>

<p><b>1.(f) </b>Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo '<input type=radio name=MET value=yes checked onclick="show(\'MET_details\')">Yes /<input type=radio name=MET value=no onclick="hide(\'MET_details\')">No</p>';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo '<input type=radio name=MET value=yes onclick="show(\'MET_details\')">Yes /<input type=radio name=MET checked value=no onclick="hide(\'MET_details\')">No</p>';
 
	echo '<table class=border id=MET_details style="display:none;">';
}

?>
		
		<tr>
			<th colspan=2  style="width:60%">Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td><input type=text style="width:95%;height:100%;" name=met_center value=
			<?php 
					echo '\''.$met['center'].'\'';
			?>
			
			></td>
			<td style="width:20%">MET Place:</td><td><input type=text  style="width:95%;height:100%;"  name=met_place
			value=
			<?php 
					echo '\''.$met['place'].'\'';
			?>
			
			></td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td><input type=text style="width:95%;height:100%;"  name=met_observer value=
			<?php 
					echo '\''.$met['observer'].'\'';
			?>></td>
			<td  style="width:20%">MET Date:</td><td><input readonly	id=met_date class="datepicker" size="10" name=met_date value=
			<?php 
					echo '\''.mysql_to_india_date($met['date']).'\'';
			?>></td>

		</tr>
	</table>

</div>


<div id=contact style="display:none;"   class=section>
	
<p>
	<table class="border">
		<tr>
			<td colspan=2><button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of address proof')"><b>1.(g)</b></button>Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo $proof_of_residence_attached.'</td>';	
				echo '</tr><tr><td class=upload>';
				echo '<input name=proof_of_residence type=file><--Upload resi proof';
				echo '</td></tr>
							<tr><td class=upload>';	
				echo 'uploaded:'.$r_proof['filename'].'</td>'; 
			?>
			
		</tr>
	</table>
</p>
			

<p><b>1.(h)</b>	Contact Particulars:</p>
<p>
<table>
<tr><td>Tel (Office)(with STD code):</td><td><input type=text  size=30 name=office_phone value="0261-2244175"
value=
			<?php 
					echo '\''.$staff_detail['office_phone'].'\'';
			?>
			
></td><tr>
<tr><td>Tel(Residence): (with STD code)</td><td><input size=30 type=text name=residencial_phone
value=
			<?php 
					echo '\''.$staff_detail['residencial_phone'].'\'';
			?>
></td><tr>
<tr><td>E-mail address: </td><td><input type=text  size=30 name=email
value=
			<?php 
					echo '\''.$staff_detail['email'].'\'';
			?>
></td><tr>
<tr><td>Mobile Number: </td><td><input type=text  size=30 name=mobile
value=
			<?php 
					echo '\''.$staff_detail['mobile'].'\'';
			?>
></td><tr>
</table>
<table>
	
</table>
</div>


<div id=MCI style="display:none;"   class=section>

<p>
	<table class=border>
	<tr><td  colspan=2><b>Note:</b>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.  <br>If yes, please give details.</td></tr>
	<tr><td   colspan=2 align=center>Give at least date of last appearance</td></tr>
	<tr><td   colspan=2 align=center>other details are automatically obtained from complated experience table</td></tr>
	<tr><th align=center >Dates of appearance in MCI Inspection:</th></tr>
	<tr><td align=center><input name=mci_date id=mci_date class=datepicker>
	<input name=action value=add_mci_date type=submit></td>
	</tr>
	<tr>
	<td colspan=3 align=center><?php view_table_mci($link); ?></td>
	</tr>
	</table>
	
	<table>
		<tr>
			<td>1.(d)vi. Date of appearance in Last MCI - UG/PG/Any Other Assessment:</td><td><b>
	
	
	<?php
			echo mysql_to_india_date($last_mci_date['md']); 
			//echo '<td><input readonly	value=\''.mysql_to_india_date($last_mci['last_mci_date']).'\' type=text id=last_mci_date class="datepicker" size="10" name=last_mci_date></td>';
	?>
	
		</b></td></tr>
	</table>

	</p>

	<?php
	//echo '<pre>';
	//echo 'a';
	//print_r($last_mci_details);
	//echo 'b';

	//print_r($current_appointment);
	//echo '</pre>';
	
	
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<p>1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute - <b>'.$last_mci_in_current_institute.'</b></p>';

		echo '<p>1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></p>';
		 
	?>

<table><tr><td><b>7</b> I have appeared in the last inspection of the same College in the same post. </td><td>

<?php

	if($last_mci_as_current_post=='Yes' && $last_mci_in_current_institute=='Yes')
	{
		echo '<b>Yes</b>';
	}
	else
	{
		echo '<b>No</b>';
	}

?>

</td></tr></table>
</p>


</div>

<div id=publication style="display:none;"   class=section>
<p>
<table>
	<tr><td colspan=0><b>5.</b>  Number of  Research publications in Index Journals:</td></tr>
	<tr><td><b>5.(a)</b> International Journals:</td><td><input type=text name=ipublication value=
	<?php
	echo '\''.$publication['international'].'\'';
	?>
	
	></td></tr>
	<tr><td><b>5.(b)</b> National Journals:</td><td><input type=text name=npublication  value=
	<?php
	echo '\''.$publication['national'].'\'';
	?>
	></td></tr>
	<tr><td><b>5.(c)</b> State/Institutional Journals:</td><td><input type=text name=spublication  value=
	<?php
	echo '\''.$publication['state'].'\'';
	?>
	></td></tr>
</table>
</p>

</div>

<div id=income style="display:none;"   class=section>
<p>
<table class=border>
	<tr><td><button type=button style="background-color:yellow;" onclick="alert('Upload scanned / camara-photo of PAN card')" ><b>6.(a)</b></button> My PAN Card No. is 

	
	<input type=text name=PAN_number value=
	<?php
		echo $pan['pan'];
	?>
	>
	</td></tr><td class=upload>
	<?php	
	echo '<input type=file name=PAN_card ><--Upload PAN';
	echo '</td></tr>
			<tr><td class=upload>';
	?>
	
	Uploaded: <?php echo $pan['attachment_filename'] ?></td></tr>
	

</table>
</p>
<p>
<table class=border style="width:70%;" >	

	<tr><td colspan=3><button type=button style="background-color:yellow;" type=button onclick="alert('To be of filled manually when declaration form is printed')"><b>6.(b)</b></button> I have drawn total emoluments from this college in the current financial year as under:-</td></tr>
	
	<tr><th>Month</th><th>Amount Received</th><th>TDS</th></tr>
	<tr><td>Apr 2016</td><td></td><td></td></tr>	
	<tr><td>May 2016</td><td></td><td></td></tr>	
	<tr><td>Jun 2016</td><td></td><td></td></tr>	
	<tr><td>Jul 2016</td><td></td><td></td></tr>	
	<tr><td>Aug 2016</td><td></td><td></td></tr>	
	<tr><td>Sep 2016</td><td></td><td></td></tr>	
	<tr><td>Oct 2016</td><td></td><td></td></tr>	
	<tr><td>Nov 2016</td><td></td><td></td></tr>	
	<tr><td>Dec 2016</td><td></td><td></td></tr>	
	<tr><td>Jan 2017</td><td></td><td></td></tr>	
	<tr><td>Feb 2017</td><td></td><td></td></tr>	
	<tr><td>Mar 2017</td><td></td><td></td></tr>	
	</table>
</table>

<table><tr><td><button  type=button style="background-color:yellow;" onclick="alert('PAN uploaded above. Form 16 to be attached manually, when declaration form is printed')"><b>6.(c)</b></button> (Copy of my PAN &amp; Form 16 (TDS certificate) for financial year 2015-16 are attached)</td></tr></table>
</p>

</div>

<div id=declaration style="display:none;"   class=section>
<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><button  type=button style="background-color:yellow;" onclick="alert('If doing private practice fill details, when declaration form is printed')"><b>3</b></button></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%"><input readonly type=text placeholder="to written when signed"></td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=border style="width:100%">
	<tr><td  style="width:25%">Date:</td><td  style="width:25%"><input readonly type=text placeholder="to written when signed"></td><td   style="width:25%" align=center>Signed by HOD</td><td  style="width:25%">Countersigned by the Director/Dean/Principal</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>

<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed by the Teacher</th><th>Signed by the HOD</th></tr>
<tr><td><input readonly type=text placeholder="Sign in physical copy"></td><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>
<tr><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
</table>
</p>

<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>
</div>

</form>
</body>
</html>

<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=noborder><tr><td>
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_qualification value=\''.$ra['qualification_id'].'\'>X</button></td><td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:none;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:none;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}


function view_table_experience($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	while($ra=mysqli_fetch_assoc($result))
	{		
	if(strlen($ra['to_date'])==0)
	{
		$to_date='<span style="background-color:lightpink;">till_date</span>';
		$diff=get_date_diff_as_ymd($ra['from_date'],date('Y-m-d'));
	}
	else
	{
		$to_date=$ra['to_date'];
		$diff=get_date_diff_as_ymd($ra['from_date'],$ra['to_date']);
	}
	/*$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>From:'.$ra['from_date'].','.$ra['from_time'].'<br>To:'.$to_date.','.$ra['to_time'].'<br>
			Total:'.$diff.'</td>
			';
			* */
			
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>'.$ra['from_date'].','.$ra['from_time'].'>>'.$to_date.','.$ra['to_time'].' ('.$diff.')</td>
			';
			echo $raw_html;
		}
}


function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
}

?>

<?php
//echo '<pre>';
//print_r($_POST);
//print_r($_FILES);
//echo if_in_interval("2010-11-01","2010-11-01","2010-11-01");
//echo if_in_interval("2010-02-02","2010-02-01","2010-03-03");
//echo if_in_interval("2010-11-01","2011-11-01","2011-11-01");
//echo if_in_interval("2010-11-01","2009-11-01","2009-11-01");
//echo if_in_interval("2010-11-01","2012-11-01","2009-11-01");
//echo get_exterience("2016-12-12","2016-12-13");
//echo '</pre>';

?>
<?php
session_start();
require_once '/var/gmcs_config/staff.conf';

function login_varify()
{
	return mysqli_connect('127.0.0.1',$GLOBALS['main_user'],$GLOBALS['main_pass']);
}



/////////////////////////////////
function select_database($link)
{
	return mysqli_select_db($link,'staff');
}


function check_user($link,$u,$p)
{
	$sql='select * from staff where id=\''.$u.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	$result_array=mysqli_fetch_assoc($result);
	if(md5($p)==$result_array['password'])
	{
		return true;
	}
	else
	{
		return false;
	}
}
function connect()
{
	if(!$link=login_varify())
	{
		echo 'database login could not be verified<br>';
		logout("message=database not connected");	
		exit();
	}


	if(!select_database($link))
	{
		echo 'database could not be selected<br>';
		logout("message=database not connected");	
		exit();
	}
	
	if(!check_user($link,$_SESSION['login'],$_SESSION['password']))
	{
		echo 'application user could not be varified<br>';
		logout("message=Wrong Password");		
		exit();
	}
	
return $link;
}


function get_raw($link,$sql)
{
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	if(mysqli_num_rows($result)!=1){echo mysqli_error($link);return false;}
	else
	{
		return mysqli_fetch_assoc($result);
	}
}

$link=connect();

function download_blob($file,$filename)
{
	header("Content-Disposition: attachment; filename=$filename");
			//header("Content-length: $length");
			//header("Content-type: $type");		
			echo $file;
}

//echo '<pre>';
//print_r($GLOBALS);
$wr=base64_decode($_POST['where']);
$sql='select * from '.$_POST['table'].' '.$wr;

$data=get_raw($link,$sql);
download_blob($data[$_POST['file']],$data[$_POST['filename']]);

?>
<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();
menu();


echo '<h1 style="background-color:white;">Please note following. It will help you to complate declaration form Correct errors and refresh this page
Ensure there are errors displayed below, for better use of staff data in future</h1>'; 


/////////////staff table////////////////

$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');

if(strlen($staff_detail['fullname'])==0){echo '<h4><li>Write fullname with surname first, as in service records</li></h4>'; }

if(
	strlen($staff_detail['dob'])==0 
	||
	$staff_detail['dob']=='0000-00-00'
	)
	{echo '<h4><li>Write proper date of birth</li></h4>'; }
	
if(strlen($staff_detail['present_residential_address'])==0)
{echo '<h4><li>Write proper present recidential address</li></h4>'; }

if(strlen($staff_detail['permanent_residential_address'])==0)
{echo '<h4><li>Write proper permanent recidential address</li></h4>'; }


if(strlen($staff_detail['residencial_phone'])==0){echo '<h4><li>Write proper residencial phone</li></h4>'; }
if(strlen($staff_detail['mobile'])<10){echo '<h4><li>Write proper mobile number</li></h4>'; }
if(strlen($staff_detail['email'])==0 || !filter_var($staff_detail['email'],FILTER_VALIDATE_EMAIL))
	{echo '<h4><li>Write proper email</li></h4>'; }
if(strlen($staff_detail['catagory'])==0){echo '<h4><li>Select catagory as in service records</li></h4>'; }

/////////////staff table complate////////////////

/////////////photo table////////////////

$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');
if(strlen($photo['proof_type'])==0){echo '<h4><li>Select photo id proof type</li></h4>'; }
if(strlen($photo['proof_number'])==0){echo '<h4><li>Write photo id proof number</li></h4>'; }
if(strlen($photo['proof_issued_by'])==0){echo '<h4><li>Write issue authority of photo id proof</li></h4>'; }
if(strlen($photo['photo_id'])==0){echo '<h4><li><span style="background:pink;">Upload</span> photo id. preferably in jpg or pdf format</li></h4>'; }
if(strlen($photo['photo'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo. If it is not jpg format, it will fail to display</li></h4>'; }

/////////////photo table complate////////////////

/////////////departmental_exam table ////////////////
$dep_ex=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['cccplus'])==0){echo '<h4><li>Select CCC+ exam status as per service records</li></h4>'; }
if(strlen($dep_ex['gujarati'])==0){echo '<h4><li>Select GUJARATI exam status as per service records</li></h4>'; }
if(strlen($dep_ex['hindi'])==0){echo '<h4><li>Select HINDI exam status as per service records</li></h4>'; }

/////////////departmental_exam table complate////////////////
 
//////////////Qualification,experience, check for at least one raw/////////

function count_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}
if(count_qualification($link)==0){echo '<h4><li>Add Qualification. You must be having at least one!!</li></h4>'; }

function check_current_experience($link)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is null ';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}

$cur_exp_num=check_current_experience($link);

if($cur_exp_num==0)
{
	echo '<h4><li>Add CURRENT job details in Experience tab. <li>Have you forgotten to select til_date in current experience? <li>current experience needs to be added before its appointment orders, joining order and previous relieving order is uploaded</li></h4>'; 
}
elseif($cur_exp_num>1)
{
	echo '<h4><li>There can not be more than two current experience. Have you added more than one "<span style="background:lightpink;"> till_date"</span></li></h4>';
	
}
else
{
	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
		
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
			
	if($current_appointment_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> Current appointment order</li></h4>'; }
	
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');
	if($current_joining_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> joining order at current institute</li></h4>'; }

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');
	if($previous_relieving_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> relieving order from previous institute (ignore if this is your first appointment</li></h4>'; }
	
}
	
///////PAN card////////////
$dep_ex=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['attachment'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> PAN card</li></h4>'; }

?>

<?php
session_start();
require_once '../common/common.php';

//echo '<pre>';print_r($_POST);echo '</pre>';

/////////////Main script start from here//////////////


echo '
<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 
';


echo '<script>


function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}	
</script>

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;
}

.section_header
{
	background-color:gray;
}
</style>


';

$link=connect();

menu();


function add_staff($link)
{

	$staff_id=$_SESSION['login'];
	echo '<table class=border>';
	echo '<tr style="background-color:lightgreen;"><th  colspan="3" >Add Experience</th></tr>';
	
	
		echo '<tr style="background-color:blue;"><td>';
		echo '<form method=post style="margin-bottom:0;">';
		echo '<input type=hidden readonly name=staff_id value=\''.$staff_id.'\' >';	
		echo '</td></tr>';

		$st="background-color:lightpink";

		
			echo '<tr style="'.$st.'"><td>';	
				mk_combo_new($link,'select institute from institute',
						'institute','institute','institute','','');	

			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select department from department',
			'department','department','','');
			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','post','','');
			echo '</td></tr><tr style="'.$st.'"><td>';	

					mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','appointment_type','','');
			echo '</td></tr><tr style="'.$st.'"><td>';	
			
		$j_time=array("FN","AN");

		echo '<table>
					<tr style="'.$st.'">
						<td>From:</td>
						<td><input readonly class=datepicker name=from_date id=\'from_date_new\' ></td>
						<td>';
						mk_select_from_array($j_time,'from_time','','');
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td>To:</td>
						<td>	<input  readonly class=datepicker name=to_date id=\'to_date_new\' ></td>
						<td>';
						mk_select_from_array($j_time,'to_time','','');
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td><input type=checkbox name=to_date_checkbox id=to_date_checkbox > Till Date</td>
						<td colspan=2>Tick mark if this is your current status</td>
					</tr>
				</table>';
						
			echo '</td></tr><tr style="'.$st.'"><td>';	

				
		echo '<button type=submit name=action value=add>Add</button>';
		echo '</td>';
		echo '</tr></form>';
		echo '<tr style="background-color:blue" ><td></td></tr>';
	echo '</table>';
}

function edit_staff($link)
{

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border>';
	echo '<tr style="background-color:lightgreen;"><th>Modify / Delete Experience
	<form style="display:inline;" method=post action=new.php><button style="color:green;">
	<h4 style="margin: 0px; padding: 0px;" >Return to Declaration Form</h4></button></form></th>
	</tr>';
	echo '<tr style="background-color:lightpink;"><th  colspan="3" >Scroll down to edit newer experiences</th></tr>';


	$count=0;
	while($ra=mysqli_fetch_assoc($result))
	{
		echo '<tr style="background-color:blue;"><td>';
		echo '<form method=post style="margin-bottom:0;">';
		echo '<input type=hidden readonly name=movement_id value=\''.$ra['movement_id'].'\'>';	
		echo '<input type=hidden readonly name=staff_id value=\''.$ra['staff_id'].'\'>';	
		echo '</td></tr>';
		
		if(($count%2)==0)
		{
			$st="background-color:lightblue";
		}
		else
		{
			$st="background-color:lightgray";
		}
		
			echo '<tr style="'.$st.'"><td>';	
				mk_combo($link,'select institute from institute',
						'institute','institute','institute','',$ra['institute']);	

			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select department from department',
			'department','department','',$ra['department']);
			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','post','',$ra['post']);
			echo '</td></tr><tr style="'.$st.'"><td>';	

					mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','appointment_type','',$ra['type']);
			echo '</td></tr><tr style="'.$st.'"><td>';	
			
	if(strlen($ra['to_date'])==0)
	{
		$tick='checked';
		$to_date='';
	}
	else
	{
		$to_date=$ra['to_date'];
		$tick='';
	}		

$j_time=array("FN","AN");

		echo '<table>
					<tr style="'.$st.'">
						<td>From:</td>
						<td><input readonly class=datepicker name=from_date id=\'from_date_'.$ra['movement_id'].'\'  value=\''.mysql_to_india_date($ra['from_date']).'\'></td>
						<td>';
						mk_select_from_array($j_time,'from_time','',$ra['from_time']);
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td>To:</td>
						<td>	<input  readonly class=datepicker name=to_date id=\'to_date_'.$ra['movement_id'].'\' value=\''.mysql_to_india_date($to_date).'\'></td>
						<td>';
						mk_select_from_array($j_time,'to_time','',$ra['to_time']);
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td><input type=checkbox name=to_date_checkbox id=to_date_checkbox '.$tick.'> Till Date</td>
						<td colspan=2>Tick mark if this is your current status</td>
					</tr>
				</table>';
						
			echo '</td></tr><tr style="'.$st.'"><td>';	

				
		echo '<button type=submit name=action value=update>Modified, Now Save</button>';
		echo '<button type=submit name=action value=delete onclick="return confirm(\'Data will be deleted permanenty\')" >Delete</button>';
		echo '</td>';
		echo '</tr></form>';
		echo '<tr style="background-color:blue" ><td></td></tr>';
		$count++;
	}

	echo '</table>';
}


function insert($link)
{
	
	if(isset($_POST['institute_text_check']))
	{
		$institute=$_POST['institute_text'];
	}
	else
	{
		$institute=$_POST['institute'];
	}

	if(isset($_POST['to_date_checkbox']))
	{
		$to_date='null';
		$to_time='null';
	}
	else
	{
		$to_date='\''.india_to_mysql_date($_POST['to_date']).'\'';
		$to_time='\''.$_POST['to_time'].'\'';
	}
		
	$sql='insert into staff_movement 
	
	(staff_id,institute,department,post,from_date,from_time,to_date,to_time,type) 
	values(	\''.$_POST['staff_id'].'\',
			\''.$institute.'\',
			\''.$_POST['department'].'\',
			\''.$_POST['post'].'\',
			\''.india_to_mysql_date($_POST['from_date']).'\',
			\''.$_POST['from_time'].'\','
			.$to_date.','
			.$to_time.','
			.'\''.$_POST['appointment_type'].'\')';
			
	//echo $sql;
	
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}								
}

function update($link)
{
	
	if(isset($_POST['institute_text_check']))
	{
		$institute=$_POST['institute_text'];
	}
	else
	{
		$institute=$_POST['institute'];
	}

	if(isset($_POST['to_date_checkbox']))
	{
		$to_date='null';
		$to_time='null';
	}
	else
	{
		$to_date='\''.india_to_mysql_date($_POST['to_date']).'\'';
		$to_time='\''.$_POST['to_time'].'\'';
	}	
	
	$sql='update staff_movement set
							institute=\''.$institute.'\',
							department=\''.$_POST['department'].'\',
							post=\''.$_POST['post'].'\',
							from_date=\''.india_to_mysql_date($_POST['from_date']).'\',
							from_time=\''.$_POST['from_time'].'\',
							to_date='.$to_date.',
							to_time='.$to_time.'
					where 
							movement_id=\''.$_POST['movement_id'].'\'';
	//echo $sql;
	
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}								
}

function del($link)
{
	$sql='delete from staff_movement where movement_id=\''.$_POST['movement_id'].'\'';
	
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}else{echo 'deleted: '.mysqli_affected_rows($link);}

}


if(isset($_POST['action']))
{
		if($_POST['action']=='add')
		{
			insert($link);
		}
		if($_POST['action']=='update')
		{
			update($link);
		}		
		if($_POST['action']=='delete')
		{
			del($link);
		}		
}	

echo '<h3 style="display:inline;color:blue;">On left side is facity to edit/delete entries. On right side is facility to add new entry.</h3>';
echo '<table><tr><td style="vertical-align:top"   >';
		edit_staff($link);
echo '</td><td style="vertical-align:top">';

		add_staff($link);
		echo '<table class=border>';
		echo '<tr><th style="background-color:lightgreen;" colspan=10 >Summary of experience</th></tr>';
		view_table_experience($link);
		echo '</table>';

echo '</td></tr></table>';


?>


<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;
}

.section_header
{
	background-color:gray;
}
</style>



<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		
function copy_paste_id_to_id(target,source) {
			document.getElementById(target).value =document.getElementById(source).value
		}
function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="gray";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					myself.style.background="#E4DDDD";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>




<!-- A4=210x297 so width=840 height=1200 -->

<body style="background-color:lightgray;">



<?php 
//Form element at this place (outside table below , with closing outside required to make  POST visible if added by javascript
echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '<table class=noborder style="background-color:lightblue;"><tr><td>';
//<!-- menu() have its own <form>. Never enclose it in another form -->
menu();
echo '</td><td valign=top >';

//Form element at this place (inside a table, with closing outside donot make POST visible if added by javascript
//echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '</td><td  valign=top>';
echo $save_msg;
echo '</td></tr></table>';
?>
<span class=section_header id=genral_help_sh onclick="showhide_with_label('general_help',this,'general help')">hide General Help</span>



<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>>

<div id=general_help>
<table class=border>

<tr><td>
Click <span style="background-color:gray;">Gray </span> buttons to start filling details of respective section.
</td></tr>
<tr><td>
Click <span style="background-color:yellow;">yellow </span> buttons to get help.
</td></tr> 
<tr><td>
<span style="background-color:lightpink;">Pink fields</span> need  pdf/jpg upload. 
</td></tr> 
<tr><td>
If smart phone is used to fill this form, use camara to snap and <span style="background-color:lightpink;">upload</span> documents
</td></tr> 
<tr><td>
Some of the details will be automatically filled, AFTER data is saved.
</td></tr>
<tr><td>
Save frequently(<span style="background-color:lightgreen;">Green Button</span>). Saved data is automatically retrived.
</td></tr>
<tr><th align=left>
Keep elctronic/physical copy of photo id, photo, degree, registration, current appointment order, current joining order, last relieving order, PAN, address proof ready
</th></tr>
<tr><th align=left>
Keep dates of each and every appointments/transfers/promotions ready
</th></tr>
</table>
</div>

<h2><p align=center><b><u>DECLARATION FORM : 2018 - 2019 - FACULTY</u></b></p></h2>
<h4><p align=center><b><u><span style="background:lightpink;">Note: Use Declaration->Check menu to varify the correctness of details filled</span></u></b></p></h4>

<p>
<span>
<?php
	echo '<input style="background-color:lightgreen;" name=action type=submit value=save title="save frequently to prevent repeat attempts">';
?>
</span>
<!--<span class=section_header onclick="showhide_with_tab('for_assessors'
			,'section','section_header',this)">For Assessors</span>-->
<span class=section_header onclick="showhide_with_tab('identity'					,'section','section_header',this)">Identity Information</span>
<span class=section_header onclick="showhide_with_tab('contact'					,'section','section_header',this)">Contact</span>
<span class=section_header onclick="showhide_with_tab('service'					,'section','section_header',this)">Service</span>
<span class=section_header onclick="showhide_with_tab('qualification_section'	,'section','section_header',this)">Qualification</span>
<span class=section_header onclick="showhide_with_tab('experience_section'		,'section','section_header',this)">Experience</span>
<span class=section_header onclick="showhide_with_tab('present_appointment'		,'section','section_header',this)">Present Appointment</span>
<span class=section_header onclick="showhide_with_tab('MET'						,'section','section_header',this)">MET</span>
<span class=section_header onclick="showhide_with_tab('MCI'						,'section','section_header',this)">MCI</span>
<span class=section_header onclick="showhide_with_tab('publication'				,'section','section_header',this)">Publication</span>
<span class=section_header onclick="showhide_with_tab('income'					,'section','section_header',this)">Income</span>

<!--<span class=section_header onclick="showhide_with_tab('declaration'				,'section','section_header',this)">Declaration</span>
-->

</p>
<div id=for_assessors style="display:none;"  class=section>

<p><b>NAME OF THE COLLEGE: 
	<input type=text placeholder="autofilled" readonly size=30 name=declaration_college id=declaration_college value=
	<?php echo '\''.$current_appointment['institute'].'\'';?>
	>
	<input type=text placeholder="autofilled" readonly size=15  name=declaration_city id=declaration_city value=
		<?php 
			$ex=explode(" ",$current_appointment['institute']);
			$tot=count($ex);
			echo $ex[$tot-1];
		?>
	>
</b></p>
<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>
</div>




</p>
<div id=identity style="display:none;"  class=section>
	

<table class="noborder">
<tr>
<td>
	
	<p>1.(a)Name<input type=text placeholder="Lastname Firstname Middlename" name=name id=name size=40 value=

	<?php echo '\''.$staff_detail['fullname'].'\''; ?>

	></p>

	<p>1.(b) Date of Birth 


	<input readonly	id=dob class="datepicker" size="10" name=dob value=
	<?php echo '\''.mysql_to_india_date($staff_detail['dob']).'\''; ?>
	>

	&amp; Age<input readonly type=text name=age value=

	<?php 
	//$diff=date_diff_to_year_month_days($staff_detail['dob'],strftime("%Y-%m-%d"));
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo '\''.$diff.'\'';
	?>

	>

	</p>

	<p><button style="background-color:yellow;" type=button onclick="alert('(1) Upload pdf/jpg copy of photo ID proof. (2) Upload pdf/jpg of passport size photo')"><b>1.(c)</b></button>Submit Photo ID proof issued by Govt. Authorities :</p>

	<p>
	<?php
		echo '<table class=border><tr><td>';
		echo 'Photo ID submitted :';
		echo '</td>';
		echo '<td>';
		mk_select_from_sql($link,'select * from photo_id_proof_type','photo_id_proof_type','photo_id','',$photo['proof_type']);
		echo '</td></tr>';
		echo '<tr><td  class=upload>';
		echo '<input name=photo_id type=file><--Upload photo id';		
		echo '</td>';
		echo '<td class=upload>';
		echo 'uploaded:'.$photo['photo_id_filename']; 
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number:<input type=text name=photo_id_number value=\''.$photo['proof_number'].'\'';	
		echo '</td>';
		echo '<td>';
		echo 'Issued by:<input type=text name=photo_id_issued_by value=\''.$photo['proof_issued_by'].'\'';	
		echo '</td></tr>';
		echo '</table>';
	?>
	</p>

</td>

<td>
	<?php
			echo '<table class=noborder>
			<tr>
			<td align=center>';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>
			<tr><td  class=upload>';
			echo '<input name=photo type=file><--Upload photo';
			
			echo '</td></tr>
			<tr>';
			echo '<td class=upload>';
			echo 'uploaded:'.$photo['photo_filename']; 
			echo '</td></tr></table>';
	?>

</td>
</tr>
</table>

</div>
<?php

$de=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');
$opt=array('','Yes','No','Exempted');
$catagory=array('','General','SEBC','ST','SC');
echo '<div id=service style="display:none;"  class=section>';
echo '<table align=center class=border>';
	echo '<tr>';
		echo '<th colspan=2 >';
		echo 'Miscellenious Sevice data';
		echo '</th>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Catagory';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($catagory,'catagory','',$staff_detail['catagory']);
		echo '</td>';
	echo '</tr>';	
	echo '<tr>';
		echo '<td>';
			echo 'CCC+ Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'cccplus','',$de['cccplus']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Gujarati Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'gujarati','',$de['gujarati']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo 'Hindi Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'hindi','',$de['hindi']);
		echo '</td>';
	echo '</tr>';
echo '</table>';

echo '</div>';
?>

<?php
if($donot_hide=='qualification')
{
	$qualification_style='display:block';
}
else
{
	$qualification_style='display:none';
}

if($donot_hide=='experience')
{
	$experience_style='display:block';
}
else
{
	$experience_style='display:none';
}

?>

<div id=qualification_section style="<?php echo $qualification_style; ?>"  class=section>
	
<!---start of qualification and experience -->
<p>
<table class="border" style="background-color:#A6AEC8"  id="qualification_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;" type=button 
			onclick="showhide('qualification_help')"> <b>2.</b></button> Qualifications :</th></tr>
<tr><td colspan=7>
	<table class=border style="background-color:lightblue;display:block;" id=qualification_help>
		<tr><td colspan=7 >(1) Fill Qualification details in blue row</td></tr>
		<tr><td colspan=7 >(2) Click [[Add qualification]]</td></tr>
		<tr><td colspan=7 >(3) College, University and Year are must for saving data</td></tr>
		<tr><td colspan=7 >(4) Click "X" beside the qualification to delete it</td></tr>
		<tr><td colspan=7 >(4) Upload Degree and Registration certificates where relavent</td></tr>
		<tr><td colspan=7 >(4) Delete if any mistake is done/ upload not done and add again</td></tr>
		
		</table>
</td></tr>	
	
<tr>
	<th>del</th><th>Qualification</th><th>College</th><th>	University	</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
add_qualification_raw($link);
view_table_qualification($link);
?>


<tr>
	<th  colspan=6 style="text-align:left;">Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets
after scoring out whichever is not applicable.</th></tr>
<tr><td  colspan=6 ><b>2.(a)</b> Copy of Degree certificates  of MBBS and PG degree attached - <?php echo $degree_attachment_str; ?></td></tr>
<tr><td  colspan=6 ><b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  <?php echo $reg_attachment_str; ?></td></tr>
</table>

</p>

</div>
<div id=experience_section style="<?php echo $experience_style; ?>"   class=section>

<p>
<table class="border"   style="background-color:#90939A" id="experience_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;" type=button 
			onclick="showhide('experience_help')"> <b>3.(a)</b></button> Details of the teaching experience till date.</th></tr>
<tr><td colspan=7>
	<table class=border style="background-color:lightblue;display:block;" id=experience_help>
		<tr><td colspan=7 >(1) Click <b style="display:inline;color:blue;">Manage/Edit Experince</b> button to manage experince details.</td></tr>
		<tr><td colspan=7 >(3) Change of type of appointment (e.g Adhoc->GPSC) also needs to be indicated saparately in new row.</td></tr>
		<tr><td colspan=7 >(4) Put CheckMark checkbox in "Name of Institution" column to write name of institute not present in dropdown list.</td></tr>
		<tr><td colspan=7 >(5) Ex-Army person can use this table to fill their details</td></tr>
		<tr><td colspan=7 >(6) Appointments with transfers shall be entered as respective appointment type</td></tr>
		<tr><td colspan=7 >(7) Each transfers will require different entry. Indicate correct TYPE of appointment appicable to transfer.</td></tr>
		<tr><td colspan=7 >(8) For Current appointment select 'till date' for 'to date'</td></tr>
		</table>
</td></tr>

<tr><td colspan=5><button type=submit name=action value=manage_exp formaction=experience_management.php><h3 style="display:inline;color:blue;">Manage/Edit Experience</h3></button></td></tr>

<tr>
	
	<th >Designation</th>
	<th >Type</th>
	<th >Department</th>
	<th >Name of Institution</th>
	<th >From - To - Total</th>
</tr>

<?php
//add_experience_raw($link);

view_table_experience($link);
?>




<tr>
<tr><td  colspan=7><b>Note:-</b>Tutor working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized/permitted
medical institute to be consider as senior resident.</td></tr>
</table>

</div>
<!--
	<table class=border style="width:100%;">
		<tr><td colspan=10><b>3(b).</b>To be filled in by Ex Army Personnel only: <b>(Not used for online filling of declaration)</b></td></tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
-->
</p>

<!-- end of qualification and experience -->



<div id=present_appointment style="display:none;"   class=section>
<p><b>Note:1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty. 2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</b></p>
<p>1.(d)i.Present Designation:
<?php 
	echo '<input type=text readonly value=\''.$current_appointment['post'].'\'>';
	//mk_select_from_sql($link,'select * from designation_type','designation_type','present_designation','',
	//$current_appointment['post']);
?>

</p>

<p><table class="border">
	<tr>
		<td>
			<button style="background-color:yellow;" type=button onclick="alert('Upload  not implemented yet')"><b>1.(d)(i)a</b></button> Certified copies of present appointment order at present institute attached.</td></tr><tr class=upload><td>
	
			<?php
				echo '<input name=present_appointment_order type=file ><--Upload appt/trnsfr order</td></tr><tr><td  class=upload>';	
				echo 'uploaded:'.$current_appointment_order['attachment_filename']; 
				
			?>
	
		</td>
	</tr>	
</table></p>

<p>1.(d)ii. Department: 

	<?php
		echo '<input type=text readonly value=\''.$current_appointment['department'].'\'>';

	//mk_select_from_sql($link,'select department from department','department','present_department','',$current_appointment['department']);
	?>

</p>
<p>1.(d)iii.College: 
	<?php
		echo '<input  size=40  type=text 
				id=present_college_name 
				name=present_college_name readonly 
				value=\''.$current_appointment['institute'].'\'>';
	?>

<!-- <input size=40 type=text name=present_college_name id=present_college_name value="Government Medical College" ></p> -->


<p>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo '<input  size=10  type=text 
				id=present_city 
				name=present_city readonly 
				value=\''.$city.'\'>';
	?>

<p>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo 'Contactual';}else{echo 'Regular';}
?>

</p>

<p>

<table>
	<tr>
		<td>1.(e)Present Residential  Address of employee :</td>
		<td><textarea cols=40 id=present_residential_address name=present_residential_address>
<?php

		echo $staff_detail['present_residential_address'];

?>		
		</textarea></td>
	</tr>
	
	<tr>
		<td>1.(e)Permanent Residential  Address of employee :</td>
		<td><textarea cols=40 id=permanent_residential_address name=permanent_residential_address>
<?php

		echo $staff_detail['permanent_residential_address'];

?>		
		</textarea></td>
		<td>
		<button 
			type=button 
			id=copy_add 
			onclick="copy_paste_id_to_id('permanent_residential_address','present_residential_address')" >
			Copy From Above
		</button>
		</td>
	</tr>
</table>
</p>


<p><table class=noborder style="width:190mm;"><tr><td>Signature of Faculty</td><td><input type=text readonly placeholder="required in physical copy"></td><td>Signature of Dean</td<td><input type=text  placeholder="required in physical copy" readonly></td></tr><table></p>

<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="border">
	<tr>
		<td><button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of photo ID proof')"><b>1.(j)</b></button> Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td></tr><tr>
			
		<td class=upload>
		<?php
		echo '<input type=file  name=present_joining_order><--Upload joining order</td></tr><tr><td  class=upload>';
		?>	
		Uploaded:
		<?php  echo $current_joining_order['attachment_filename'] ?>
		</td>
	</tr>
</table>

<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=border>
	<tr>
		<td>
			<button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of last relieving order ')"><b>4.(a)</b></button> Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
	<tr class=upload>
		<td>
		<?php
		echo '<input  name=last_relieving_order type=file><--Upload relieving order';
			echo '</td></tr>
			<tr  class=upload><td>';
		echo 'Uploaded:';
		echo $previous_relieving_order['attachment_filename']; 
		?>

		</td>
	</tr>
	<tr>
		<td>
			<b>4.(b)</b> I am not working in any other medical college/dental college in the State or outside the State in any capacity Regular / Contractual.
		</td>
	</tr>
</table>
	
</p>

</div>

<div id=MET style="display:none;"   class=section>

<p><b>1.(f) </b>Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo '<input type=radio name=MET value=yes checked onclick="show(\'MET_details\')">Yes /<input type=radio name=MET value=no onclick="hide(\'MET_details\')">No</p>';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo '<input type=radio name=MET value=yes onclick="show(\'MET_details\')">Yes /<input type=radio name=MET checked value=no onclick="hide(\'MET_details\')">No</p>';
 
	echo '<table class=border id=MET_details style="display:none;">';
}

?>
		
		<tr>
			<th colspan=2  style="width:60%">Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td><input type=text style="width:95%;height:100%;" name=met_center value=
			<?php 
					echo '\''.$met['center'].'\'';
			?>
			
			></td>
			<td style="width:20%">MET Place:</td><td><input type=text  style="width:95%;height:100%;"  name=met_place
			value=
			<?php 
					echo '\''.$met['place'].'\'';
			?>
			
			></td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td><input type=text style="width:95%;height:100%;"  name=met_observer value=
			<?php 
					echo '\''.$met['observer'].'\'';
			?>></td>
			<td  style="width:20%">MET Date:</td><td><input readonly	id=met_date class="datepicker" size="10" name=met_date value=
			<?php 
					echo '\''.mysql_to_india_date($met['date']).'\'';
			?>></td>

		</tr>
	</table>

</div>


<div id=contact style="display:none;"   class=section>
	
<p>
	<table class="border">
		<tr>
			<td colspan=2><button style="background-color:yellow;" type=button onclick="alert('Upload pdf/jpg copy of address proof')"><b>1.(g)</b></button>Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo $proof_of_residence_attached.'</td>';	
				echo '</tr><tr><td class=upload>';
				echo '<input name=proof_of_residence type=file><--Upload resi proof';
				echo '</td></tr>
							<tr><td class=upload>';	
				echo 'uploaded:'.$r_proof['filename'].'</td>'; 
			?>
			
		</tr>
	</table>
</p>
			

<p><b>1.(h)</b>	Contact Particulars:</p>
<p>
<table>
<tr><td>Tel (Office)(with STD code):</td><td><input type=text  size=30 name=office_phone value="0261-2244175"
value=
			<?php 
					echo '\''.$staff_detail['office_phone'].'\'';
			?>
			
></td><tr>
<tr><td>Tel(Residence): (with STD code)</td><td><input size=30 type=text name=residencial_phone
value=
			<?php 
					echo '\''.$staff_detail['residencial_phone'].'\'';
			?>
></td><tr>
<tr><td>E-mail address: </td><td><input type=text  size=30 name=email
value=
			<?php 
					echo '\''.$staff_detail['email'].'\'';
			?>
></td><tr>
<tr><td>Mobile Number: </td><td><input type=text  size=30 name=mobile
value=
			<?php 
					echo '\''.$staff_detail['mobile'].'\'';
			?>
></td><tr>
</table>
<table>
	
</table>
</div>


<div id=MCI style="display:none;"   class=section>

<p>
	<table class=border>
	<tr><td  colspan=2><b>Note:</b>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.  <br>If yes, please give details.</td></tr>
	<tr><td   colspan=2 align=center>Give at least date of last appearance</td></tr>
	<tr><td   colspan=2 align=center>other details are automatically obtained from complated experience table</td></tr>
	<tr><th align=center >Dates of appearance in MCI Inspection:</th></tr>
	<tr><td align=center><input name=mci_date id=mci_date class=datepicker>
	<input name=action value=add_mci_date type=submit></td>
	</tr>
	<tr>
	<td colspan=3 align=center><?php view_table_mci($link); ?></td>
	</tr>
	</table>
	
	<table>
		<tr>
			<td>1.(d)vi. Date of appearance in Last MCI - UG/PG/Any Other Assessment:</td><td><b>
	
	
	<?php
			echo mysql_to_india_date($last_mci_date['md']); 
			//echo '<td><input readonly	value=\''.mysql_to_india_date($last_mci['last_mci_date']).'\' type=text id=last_mci_date class="datepicker" size="10" name=last_mci_date></td>';
	?>
	
		</b></td></tr>
	</table>

	</p>

	<?php
	//echo '<pre>';
	//echo 'a';
	//print_r($last_mci_details);
	//echo 'b';

	//print_r($current_appointment);
	//echo '</pre>';
	
	
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<p>1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute - <b>'.$last_mci_in_current_institute.'</b></p>';

		echo '<p>1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></p>';
		 
	?>

<table><tr><td><b>7</b> I have appeared in the last inspection of the same College in the same post. </td><td>

<?php

	if($last_mci_as_current_post=='Yes' && $last_mci_in_current_institute=='Yes')
	{
		echo '<b>Yes</b>';
	}
	else
	{
		echo '<b>No</b>';
	}

?>

</td></tr></table>
</p>


</div>

<div id=publication style="display:none;"   class=section>
<p>
<table>
	<tr><td colspan=0><b>5.</b>  Number of  Research publications in Index Journals:</td></tr>
	<tr><td><b>5.(a)</b> International Journals:</td><td><input type=text name=ipublication value=
	<?php
	echo '\''.$publication['international'].'\'';
	?>
	
	></td></tr>
	<tr><td><b>5.(b)</b> National Journals:</td><td><input type=text name=npublication  value=
	<?php
	echo '\''.$publication['national'].'\'';
	?>
	></td></tr>
	<tr><td><b>5.(c)</b> State/Institutional Journals:</td><td><input type=text name=spublication  value=
	<?php
	echo '\''.$publication['state'].'\'';
	?>
	></td></tr>
</table>
</p>

</div>

<div id=income style="display:none;"   class=section>
<p>
<table class=border>
	<tr><td><button type=button style="background-color:yellow;" onclick="alert('Upload scanned / camara-photo of PAN card')" ><b>6.(a)</b></button> My PAN Card No. is 

	
	<input type=text name=PAN_number value=
	<?php
		echo $pan['pan'];
	?>
	>
	</td></tr><td class=upload>
	<?php	
	echo '<input type=file name=PAN_card ><--Upload PAN';
	echo '</td></tr>
			<tr><td class=upload>';
	?>
	
	Uploaded: <?php echo $pan['attachment_filename'] ?></td></tr>
	

</table>
</p>
<p>
<table class=border style="width:70%;" >	

	<tr><td colspan=3><button type=button style="background-color:yellow;" type=button onclick="alert('To be of filled manually when declaration form is printed')"><b>6.(b)</b></button> I have drawn total emoluments from this college in the current financial year as under:-</td></tr>
	
	<tr><th>Month</th><th>Amount Received</th><th>TDS</th></tr>
	<tr><td>Apr 2016</td><td></td><td></td></tr>	
	<tr><td>May 2016</td><td></td><td></td></tr>	
	<tr><td>Jun 2016</td><td></td><td></td></tr>	
	<tr><td>Jul 2016</td><td></td><td></td></tr>	
	<tr><td>Aug 2016</td><td></td><td></td></tr>	
	<tr><td>Sep 2016</td><td></td><td></td></tr>	
	<tr><td>Oct 2016</td><td></td><td></td></tr>	
	<tr><td>Nov 2016</td><td></td><td></td></tr>	
	<tr><td>Dec 2016</td><td></td><td></td></tr>	
	<tr><td>Jan 2017</td><td></td><td></td></tr>	
	<tr><td>Feb 2017</td><td></td><td></td></tr>	
	<tr><td>Mar 2017</td><td></td><td></td></tr>	
	</table>
</table>

<table><tr><td><button  type=button style="background-color:yellow;" onclick="alert('PAN uploaded above. Form 16 to be attached manually, when declaration form is printed')"><b>6.(c)</b></button> (Copy of my PAN &amp; Form 16 (TDS certificate) for financial year 2015-16 are attached)</td></tr></table>
</p>

</div>

<div id=declaration style="display:none;"   class=section>
<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><button  type=button style="background-color:yellow;" onclick="alert('If doing private practice fill details, when declaration form is printed')"><b>3</b></button></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%"><input readonly type=text placeholder="to written when signed"></td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=border style="width:100%">
	<tr><td  style="width:25%">Date:</td><td  style="width:25%"><input readonly type=text placeholder="to written when signed"></td><td   style="width:25%" align=center>Signed by HOD</td><td  style="width:25%">Countersigned by the Director/Dean/Principal</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>

<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed by the Teacher</th><th>Signed by the HOD</th></tr>
<tr><td><input readonly type=text placeholder="Sign in physical copy"></td><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>
<tr><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
</table>
</p>

<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>
</div>

</form>
</body>
</html>

<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=noborder><tr><td>
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_qualification value=\''.$ra['qualification_id'].'\'>X</button></td><td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:none;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:none;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}




function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
}

?>

<?php
//echo '<pre>';
//print_r($_POST);
//print_r($_FILES);
//echo if_in_interval("2010-11-01","2010-11-01","2010-11-01");
//echo if_in_interval("2010-02-02","2010-02-01","2010-03-03");
//echo if_in_interval("2010-11-01","2011-11-01","2011-11-01");
//echo if_in_interval("2010-11-01","2009-11-01","2009-11-01");
//echo if_in_interval("2010-11-01","2012-11-01","2009-11-01");
//echo get_exterience("2016-12-12","2016-12-13");
//echo '</pre>';

?>
<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<html>
<head>
<!--
<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 
-->
<style>
	
table{
   border-collapse: collapse;
   font-family:arial;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:block;diabled:true
}

.section_header
{
	background-color:gray;
}
</style>



<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		

function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="gray";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				//hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					myself.style.background="#E4DDDD";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>

<body>


<!-- A4=210x297 so width=840 height=1200 -->



<div style="display:table;width:20cm;background-color:white;margin:1cm 1cm 1cm 1cm;border:1px solid lightgray;">
<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>

<p><b>NAME OF THE COLLEGE: 
	<?php echo $current_appointment['institute'];?>
</b></p>

<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>


<h3><p align=center><b><u>DECLARATION FORM : 2017 - 2018 - FACULTY</u></b></p></h3>


</p>
	

<table class="noborder">
<tr>
<td>
	
	<p>1.(a)Name: 

	<?php echo $staff_detail['fullname']; ?>

	</p>

	<p>1.(b) Date of Birth 


	<?php echo mysql_to_india_date($staff_detail['dob']); ?>

	&amp; Age:

	<?php 
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo $diff;
	?>
	</p>

	<p><b>1.(c)</b>Submit Photo ID proof issued by Govt. Authorities :</p>

	<p>
	<?php
		echo '<table class=noborder><tr><td>';
		echo 'Photo ID submitted: '.$photo['proof_type'];
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number:'.$photo['proof_number'];	
		echo ' </td></tr><td>Issued by:'.$photo['proof_issued_by'];	
		echo '</td></tr>';
		echo '</table>';
	?>
	</p>

</td>

<td>
	<?php
			echo '<table class=noborder>
			<tr>
			<td align=center>';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>';
			echo '</table>';
	?>

</td>
</tr>
</table>

<?php

?>



<p>Note:1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty. 2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</p>
<p>1.(d)i.Present Designation:
<?php 
	echo $current_appointment['post'];
?>
</p>
<p>1.(d)(i)a Certified copies of present appointment order at present institute attached.</p>

<p>1.(d)ii. Department: 

	<?php
		echo $current_appointment['department'];
	?>

</p>
<p>1.(d)iii.College: 
	<?php
		echo $current_appointment['institute'];
	?>

<p>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo $city;
	?>

<p>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo 'Contactual';}else{echo 'Regular';}
?>

</p>

<p>








	<?php
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<p>1.(d)vi. Date of appearance in Last MCI  UG/PG/Any Other Assessment:'.$last_mci_date['md'].'</p>';
		echo '<p>1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute - <b>'.$last_mci_in_current_institute.'</b></p>';

		echo '<p>1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></p>';
		 
	?>



<table>
	<tr>
		<td>1.(e)Residential  Address of employee :</td>
		<td><?php

		echo '<pre>'.$staff_detail['residencial_address'].'</pre>';

?>		
		</td>
	</tr>
</table>
</p>


<p><table class=noborder style="width:190mm;"><tr><td>_____________</td><td>_______________</td></tr><tr><td>Signature of Faculty</td><td>Signature of Dean</td></tr><table></p>

<p style="page-break-after:always;"></p>
<p><b>1.(f) </b>Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo ':Yes';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo ':No';
 
	echo '<table class=border id=MET_details style="display:block;">';
}

?>
		
		<tr>
			<th colspan=2  style="width:60%">Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td>
			<?php 
					echo $met['center'];
			?>
			
			</td>
			<td style="width:20%">MET Place:</td><td>
			<?php 
					echo $met['place'];
			?>
			
			</td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td>
			<?php 
					echo $met['observer'];
			?></td><td>Date</td><td>
			<?php 
					echo mysql_to_india_date($met['date']);
			?></td>

		</tr>
	</table>



	
<p>
	<table class="noborder">
		<tr>
			<td colspan=2>
<b>1.(g)</b>
Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo '<td>'.$proof_of_residence_attached.'</td>';
				echo '</tr>';
			?>
			
		</tr>
	</table>
</p>
			

<p><b>1.(h)</b>	Contact Particulars:</p>
<p>
<table>
<tr><td>Tel (Office)(with STD code):</td><td>
			<?php 
					echo $staff_detail['office_phone'];
			?>
			
</td><tr>
<tr><td>Tel(Residence): (with STD code)</td><td>
			<?php 
					echo $staff_detail['residencial_phone'];
			?>
</td><tr>
<tr><td>E-mail address: </td><td>
			<?php 
					echo $staff_detail['email'];
			?>
</td><tr>
<tr><td>Mobile Number: </td><td>
			<?php 
					echo $staff_detail['mobile'];
			?>
</td><tr>
</table>


</td></tr></table>
<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="noborder">
	<tr>
		<td><b>1.(j)</b>Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td>
	</tr>
</table>

</p>

	
<!---start of qualification and experience -->
<p>

<b>2.</b>
 Qualifications :</p>
<table class="border" id="qualification_table">
<tr>
	<th>Qualification</th><th>College</th><th>	University	</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
view_table_qualification($link);
?>
</table>

<p>Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets after scoring out whichever is not applicable.</p>
<p><b>2.(a)</b>Copy of Degree certificates  of MBBS and PG degree attached - 
<?php 
if(strlen($degree_attachment_str)>0){echo 'Yes';}else{echo 'No';} 
?>
</p>
<p>
<b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  
<?php 
if(strlen($reg_attachment_str)>0){echo 'Yes';}else{echo 'No';} 
?>
</p>



<p>
 <b>3.(a)</b> Details of the teaching experience till date.
 </p>
 
<p>
	<table class="border"   id="experience_table">

<?php
$ar=get_experience_mci($link,$_SESSION['login']);
print_experience_delcaration($ar);
//view_table_experience($link);

?>
</table>
</font>
</p>


<p><b>Note:-</b>Tutor working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized /permitted medical institute to be consider as senior resident.</p>


<p><b>3(b).</b>To be filled in by Ex Army Personnel only</p>
	<table class=border style="width:100%;">
		<tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>2.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>3.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
<b>Note:</b>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.  <br>If yes, please give details.
<br>Date of appearance:
<?php echo mysql_to_india_date($last_mci_date['md']);?> 
</p>

<!-- end of qualification and experience -->



<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=noborder>
	<tr>
		<td>
<b>4.(a)</b>
Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
	<tr>
		<td>
			<b>4.(b)</b> I am not working in any other medical college/dental college in the State or outside the State in any capacity Regular / Contractual.
		</td>
	</tr>
</table>
	
</p>





<p>
<table>
	<tr><td colspan=0><b>5.</b>  Number of  Research publications in Index Journals:</td></tr>
	<tr><td><b>5.(a)</b> International Journals:</td><td>
	<?php
	echo $publication['international'];
	?>
	
	</td></tr>
	<tr><td><b>5.(b)</b> National Journals:</td><td>
	<?php
	echo $publication['national'];
	?>
	</td></tr>
	<tr><td><b>5.(c)</b> State/Institutional Journals:</td><td>
	<?php
	echo $publication['state'];
	?>
	</td></tr>
</table>
</p>



<p>
<table class=noborder>
	<tr><td><b>6.(a)</b>My PAN Card No. is 

	
	
	<?php
		echo $pan['pan'];
	?>
	
	</td><tr>
	

</table>
</p>
<p>
	<b>6.(b)</b>I have drawn total emoluments from this college in the current financial year as under:-
<table class=border style="width:80%;" >	

	
	
	<tr><th>Month</th><th>Amount Received</th><th width=30%>TDS</th></tr>
	<tr><td>Apr 2016</td><td></td><td></td></tr>	
	<tr><td>May 2016</td><td></td><td></td></tr>	
	<tr><td>Jun 2016</td><td></td><td></td></tr>	
	<tr><td>Jul 2016</td><td></td><td></td></tr>	
	<tr><td>Aug 2016</td><td></td><td></td></tr>	
	<tr><td>Sep 2016</td><td></td><td></td></tr>	
	<tr><td>Oct 2016</td><td></td><td></td></tr>	
	<tr><td>Nov 2016</td><td></td><td></td></tr>	
	<tr><td>Dec 2016</td><td></td><td></td></tr>	
	<tr><td>Jan 2017</td><td></td><td></td></tr>	
	<tr><td>Feb 2017</td><td></td><td></td></tr>	
	<tr><td>Mar 2017</td><td></td><td></td></tr>	
	</table>
</table>

<table><tr><td><b>6.(c)</b>(Copy of my PAN &amp; Form 16 (TDS certificate) for financial year 2015-16 are attached)</td></tr></table>
</p>
<table><tr><td><b>7</b> I have appeared in the last inspection of the same College in the same post. </td><td>

<?php

	if($last_mci_as_current_post=='Yes' && $last_mci_in_current_institute=='Yes')
	{
		echo '<b>Yes</b>';
	}
	else
	{
		echo '<b>No</b>';
	}

?>
</tr></td></table>
<p style="page-break-after:always;"></p>
<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><b>3</b></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%">__________</td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td>__________</td><td align=right >__________</td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=noborder style="width:100%">
	<tr>
		<td  style="width:10%">Date:</td>
		<td  style="width:10%">__________</td>
		<td   style="width:40%" align=center>Signed by HOD</td>
		<td  style="width:40%">Countersigned by the Director/Dean/Principal</td>
	</tr>
	<tr>
		<td >Place:</td>
		<td>__________</td>
		<td align=center>__________</td>
		<td>__________</td>
	</tr>
</table>
</p>
<p style="page-break-after:always;"></p>
<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
</table>
</p>

<p>
<table class=noborder style="width:100%;">
<tr><td><b>Signed by the Teacher</td><td><b>Signed by the HOD</td></tr>
<tr><td><b>Date</td><td><b>Date</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>

<tr><td><b>Date</td></tr>

</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>

<tr><td><b>Date</td></tr>
</td></tr>
</table>
</p>
<p align=center><b>Note:</b></p>
<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>


</div>
</body>
</html>
<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=noborder><tr><td>
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr>
			<td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:block;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:block;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}


function view_table_experience($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	while($ra=mysqli_fetch_assoc($result))
	{		
	if(strlen($ra['to_date'])==0)
	{
		$to_date='<span style="background-color:lightpink;">till_date</span>';
		$diff=get_date_diff_as_ymd($ra['from_date'],date('Y-m-d'));
	}
	else
	{
		$to_date=$ra['to_date'];
		$diff=get_date_diff_as_ymd($ra['from_date'],$ra['to_date']);
	}
			
	$raw_html='<tr>
			<td>
			'.$ra['post'].'('.$ra['type'].')</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>'.$ra['from_date'].'</td>
			<td>'.$to_date.'</td>
			<td>'.$diff.'</td>
			';
			echo $raw_html;
		}
}


function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
}


function print_experience_delcaration($ar)
{
	echo 	'<table class=border>';
	echo '<th>Designation</th><th>Department</th><th>Institute</th><th>From</th><th>To</th><th width=17%>Total</th>';
	foreach($ar as $v)
	{
		
		if(strlen($v['to_date'])==0)
		{
			$to_date='till date';
			$diff=get_date_diff_as_ymd($v['from_date'],date('Y-m-d'));
		}
		else
		{
			$to_date=$v['to_date'];
			$diff=get_date_diff_as_ymd($v['from_date'],$v['to_date']);
		}
	
		echo 	'<tr>';
		echo '<td>'.$v['post'].'</td>';
		echo '<td>'.$v['department'].'</td>';
		echo '<td>'.$v['institute'].'</td>';
		echo '<td>'.$v['from_date'].'</td>';
		echo '<td>'.$to_date.'</td>';
		echo '<td>'.$diff.'</td>';
		echo 	'</tr>';
		
	}
	echo '</table>';
}

?>


<?php
session_start();
require_once '../common/common.php';

//echo '<pre>';print_r($_POST);echo '</pre>';

/////////////Main script start from here//////////////


echo '
<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 
';


echo '<script>


function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}	
</script>

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;
}

.section_header
{
	background-color:gray;
}
</style>


';

$link=connect();

menu();


function add_staff($link)
{

	$staff_id=$_SESSION['login'];
	echo '<table class=border>';
	echo '<tr style="background-color:lightgreen;"><th  colspan="3" >Add Experience</th></tr>';
	
	
		echo '<tr style="background-color:blue;"><td>';
		echo '<form method=post style="margin-bottom:0;">';
		echo '<input type=hidden readonly name=staff_id value=\''.$staff_id.'\' >';	
		echo '</td></tr>';

		$st="background-color:lightpink";

		
			echo '<tr style="'.$st.'"><td>';	
				mk_combo_new($link,'select institute from institute',
						'institute','institute','institute','','');	

			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select department from department',
			'department','department','','');
			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','post','','');
			echo '</td></tr><tr style="'.$st.'"><td>';	

					mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','appointment_type','','');
			echo '</td></tr><tr style="'.$st.'"><td>';	
			
		$j_time=array("FN","AN");

		echo '<table>
					<tr style="'.$st.'">
						<td>From:</td>
						<td><input readonly class=datepicker name=from_date id=\'from_date_new\' ></td>
						<td>';
						mk_select_from_array($j_time,'from_time','','');
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td>To:</td>
						<td>	<input  readonly class=datepicker name=to_date id=\'to_date_new\' ></td>
						<td>';
						mk_select_from_array($j_time,'to_time','','');
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td><input type=checkbox name=to_date_checkbox id=to_date_checkbox > Till Date</td>
						<td colspan=2>Tick mark if this is your current status</td>
					</tr>
				</table>';
						
			echo '</td></tr><tr style="'.$st.'"><td>';	

				
		echo '<button type=submit name=action value=add>Add</button>';
		echo '</td>';
		echo '</tr></form>';
		echo '<tr style="background-color:blue" ><td></td></tr>';
	echo '</table>';
}

function edit_staff($link)
{

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border>';
	echo '<tr style="background-color:lightgreen;"><th>Modify / Delete Experience
	<form style="display:inline;" method=post action=new.php><button style="color:green;">
	<h4 style="margin: 0px; padding: 0px;" >Return to Declaration Form</h4></button></form></th>
	</tr>';
	echo '<tr style="background-color:lightpink;"><th  colspan="3" >Scroll down to edit newer experiences</th></tr>';


	$count=0;
	while($ra=mysqli_fetch_assoc($result))
	{
		echo '<tr style="background-color:blue;"><td>';
		echo '<form method=post style="margin-bottom:0;">';
		echo '<input type=hidden readonly name=movement_id value=\''.$ra['movement_id'].'\'>';	
		echo '<input type=hidden readonly name=staff_id value=\''.$ra['staff_id'].'\'>';	
		echo '</td></tr>';
		
		if(($count%2)==0)
		{
			$st="background-color:lightblue";
		}
		else
		{
			$st="background-color:lightgray";
		}
		
			echo '<tr style="'.$st.'"><td>';	
				mk_combo($link,'select institute from institute',
						'institute','institute','institute','',$ra['institute']);	

			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select department from department',
			'department','department','',$ra['department']);
			echo '</td></tr><tr style="'.$st.'"><td>';	

			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','post','',$ra['post']);
			echo '</td></tr><tr style="'.$st.'"><td>';	

					mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','appointment_type','',$ra['type']);
			echo '</td></tr><tr style="'.$st.'"><td>';	
			
	if(strlen($ra['to_date'])==0)
	{
		$tick='checked';
		$to_date='';
	}
	else
	{
		$to_date=$ra['to_date'];
		$tick='';
	}		

$j_time=array("FN","AN");

		echo '<table>
					<tr style="'.$st.'">
						<td>From:</td>
						<td><input readonly class=datepicker name=from_date id=\'from_date_'.$ra['movement_id'].'\'  value=\''.mysql_to_india_date($ra['from_date']).'\'></td>
						<td>';
						mk_select_from_array($j_time,'from_time','',$ra['from_time']);
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td>To:</td>
						<td>	<input  readonly class=datepicker name=to_date id=\'to_date_'.$ra['movement_id'].'\' value=\''.mysql_to_india_date($to_date).'\'></td>
						<td>';
						mk_select_from_array($j_time,'to_time','',$ra['to_time']);
						echo '</td>
					</tr>
					<tr style="'.$st.'">
						<td><input type=checkbox name=to_date_checkbox id=to_date_checkbox '.$tick.'> Till Date</td>
						<td colspan=2>Tick mark if this is your current status</td>
					</tr>
				</table>';
						
			echo '</td></tr><tr style="'.$st.'"><td>';	

				
		echo '<button type=submit name=action value=update>Modified, Now Save</button>';
		echo '<button type=submit name=action value=delete onclick="return confirm(\'Data will be deleted permanenty\')" >Delete</button>';
		echo '</td>';
		echo '</tr></form>';
		echo '<tr style="background-color:blue" ><td></td></tr>';
		$count++;
	}

	echo '</table>';
}


function insert($link)
{
	
	if(isset($_POST['institute_text_check']))
	{
		$institute=$_POST['institute_text'];
	}
	else
	{
		$institute=$_POST['institute'];
	}

	if(isset($_POST['to_date_checkbox']))
	{
		$to_date='null';
		$to_time='null';
	}
	else
	{
		$to_date='\''.india_to_mysql_date($_POST['to_date']).'\'';
		$to_time='\''.$_POST['to_time'].'\'';
	}
		
	$sql='insert into staff_movement 
	
	(staff_id,institute,department,post,from_date,from_time,to_date,to_time,type) 
	values(	\''.$_POST['staff_id'].'\',
			\''.$institute.'\',
			\''.$_POST['department'].'\',
			\''.$_POST['post'].'\',
			\''.india_to_mysql_date($_POST['from_date']).'\',
			\''.$_POST['from_time'].'\','
			.$to_date.','
			.$to_time.','
			.'\''.$_POST['appointment_type'].'\')';
			
	//echo $sql;
	
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}								
}

function update($link)
{
	
	if(isset($_POST['institute_text_check']))
	{
		$institute=$_POST['institute_text'];
	}
	else
	{
		$institute=$_POST['institute'];
	}

	if(isset($_POST['to_date_checkbox']))
	{
		$to_date='null';
		$to_time='null';
	}
	else
	{
		$to_date='\''.india_to_mysql_date($_POST['to_date']).'\'';
		$to_time='\''.$_POST['to_time'].'\'';
	}	
	
	$sql='update staff_movement set
							institute=\''.$institute.'\',
							department=\''.$_POST['department'].'\',
							post=\''.$_POST['post'].'\',
							type=\''.$_POST['appointment_type'].'\',
							from_date=\''.india_to_mysql_date($_POST['from_date']).'\',
							from_time=\''.$_POST['from_time'].'\',
							to_date='.$to_date.',
							to_time='.$to_time.'
					where 
							movement_id=\''.$_POST['movement_id'].'\'';
	//echo $sql;
	
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}								
}

function del($link)
{
	$sql='delete from staff_movement where movement_id=\''.$_POST['movement_id'].'\'';
	
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}else{echo 'deleted: '.mysqli_affected_rows($link);}

}


if(isset($_POST['action']))
{
		if($_POST['action']=='add')
		{
			insert($link);
		}
		if($_POST['action']=='update')
		{
			update($link);
		}		
		if($_POST['action']=='delete')
		{
			del($link);
		}		
}	

echo '<h3 style="display:inline;color:blue;">On left side is facity to edit/delete entries. On right side is facility to add new entry.</h3>';
echo '<table><tr><td style="vertical-align:top"   >';
		edit_staff($link);
echo '</td><td style="vertical-align:top">';

		add_staff($link);
		echo '<table class=border>';
		echo '<tr><th style="background-color:lightgreen;" colspan=10 >Summary of experience</th></tr>';
		view_table_experience($link);
		echo '</table>';

echo '</td></tr></table>';


?>


<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();

$save_msg='';
if(		isset($_POST['action']) || 
		isset($_POST['delete_qualification'])===true || 
		isset($_POST['delete_experience'])===true ||
		isset($_POST['delete_mci'])===true)
{
	if(save($link)===true )
	{
		$save_msg='Saved at --->'.strftime("%T").'';
	}
}

//even if following variables are false, thet are created and donot result in 'variable not found' error
//A variable set to FALSE is very useful, to prevent unnesseary errors
 
$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');
$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');


//find current appointment
//find appointment order only if current appointment exist
$current_appointment=FALSE;
$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
//print_r($current_appointment);
$current_appointment_order=FALSE;
$current_joining_order=FALSE;
$current_joining_attached='No';
$previous_relieving_order=FALSE;

	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
	
if($current_appointment)
{
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');

						
	if($current_joining_order!==FALSE){$current_joining_attached='Yes';}
}

//$last_mci=get_raw($link,'select * from last_mci where id=\''.$_SESSION['login'].'\' ');


$proof_of_residence_attached='No';
$r_proof=get_raw($link,'select * from residencial_address_proof where id=\''.$_SESSION['login'].'\' ');
if(!$r_proof){$proof_of_residence_attached='No';}else{$proof_of_residence_attached='Yes';}



$met=get_raw($link,'select * from met where id=\''.$_SESSION['login'].'\' ');

$degree_attachment_str='';
$reg_attachment_str='';


$last_mci_date=get_raw($link,'select max(`date`) md from mci where staff_id=\''.$_SESSION['login'].'\'');



//if same date joining-relieving with FN,AN, this function will give wrong result
function find_staff_movement_details_at_specific_date($link,$dt)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
		if(strlen($ra['to_date'])==0)
		{
			$tdate=date("Y-m-d");
			//echo '<h1>'.$tdate.'</h1>';
		}
		else
		{
			$tdate=$ra['to_date'];
		}

		if(if_in_interval($dt,$ra['from_date'],$tdate)==0)
		{
			return $ra;
		}
	}
}

$last_mci_details=find_staff_movement_details_at_specific_date($link,$last_mci_date['md']);

function find_staff_movement_details_of_previous_institute($link,$current_institute_name)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by from_date desc';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	

	while($ra=mysqli_fetch_assoc($result))
	{		
		if($ra['institute']!=$current_institute_name)
		{
			return $ra;
		}
	}
}

$publication=get_raw($link, 'select * from publication where staff_id=\''.$_SESSION['login'].'\'');

$pan=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\' ');

$donot_hide='';
if(isset($_POST['action']))
{
	if($_POST['action']=='add_experience')
	{
		$donot_hide='experience';
	}
	
	if($_POST['action']=='add_qualification')
	{
		$donot_hide='qualification';
	}
}


?>

<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="../date/datepicker.js"></script>
<script src="../js/jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="../date/datepicker.css" /> 

<!--
<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;
}

.section_header
{
	background-color:gray;
}
</style>

-->

<script>
	
qr=0;
er=0;

function getfrom(one,two) {
			document.getElementById(two).value =one.value;
		}

function copyfrom(target,source) {
			target.value =document.getElementById(source).value
		}
		
function copy_paste_id_to_id(target,source) {
			document.getElementById(target).value =document.getElementById(source).value
		}
function show(one) {
				document.getElementById(one).style.display = "block";
		}

function clearFields(container) {
    var selects = container.getElementsByTagName('select');

    for(var i=0, len=selects.length; i < len; i++) {
        selects[i].selectedIndex = -1;
    }

    var fields = container.getElementsByTagName('input');
    for(var i=0, len=fields.length; i < len; i++) {
        var field = fields[i];
        switch(field.type)
        {
            case 'radio':
            case 'checkbox':
                field.checked = false;
                break;

            case 'text':
            case 'password':
            case 'hidden':
                field.value = ''
        }
    }

    var fields = container.getElementsByTagName('textarea');
    for(var i=0, len=fields.length; i < len; i++) {
        fields[i].value = '';
    }
}

function hide(one) {
				document.getElementById(one).style.display = "none";
		}

function hide_class(eclass,tclass) {
				cls=document.getElementsByClassName(eclass);
				for(var x=0;x<cls.length;x++){
					cls[x].style.display ="none";
					}	
				tls=document.getElementsByClassName(tclass);
				for(var x=0;x<tls.length;x++){
					tls[x].style.background ="black";
					tls[x].style.borderColor ="black";
					tls[x].style.color ="white";
					}									
		}
		
function showhide(one) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
				}
				else
				{
					document.getElementById(one).style.display = "none";
				}

		}

function showhide_with_label(one,labell,textt) {
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					labell.innerHTML="hide "+textt;
				}
				else
				{
					document.getElementById(one).style.display = "none";
					labell.innerHTML="show "+textt;
				}

		}
		
function showhide_with_tab(one,eclass,tclass,myself) {
				hide_class(eclass,tclass);
				if(document.getElementById(one).style.display == "none")
				{
					document.getElementById(one).style.display = "block";
					document.getElementById(one).style.background="lightgray";
					myself.style.background="lightgray";
					myself.style.borderColor="lightgray";
					myself.style.color="black";
				}
				else
				{
					document.getElementById(one).style.display = "none";
					//myself.style.background="gray";

				}

		}
								
function hide_and_clear(one) {
				document.getElementById(one).style.display = "none";
				element=document.getElementById(one);
				clearFields(element);
		}

function my_combo(ck,yes_target,no_target)
{
	if(ck.checked==true)
	{
		document.getElementById(yes_target).style.display="block";
		document.getElementById(no_target).style.display="none";
	}
	else
	{
		document.getElementById(no_target).style.display="block";	
		document.getElementById(yes_target).style.display="none";
	}	
	
}		
<!-- " ' and linebreak need to be escaped by \ in javascript  SMP-->

<!-- following function is required to load datepicker dynamically  SMP-->
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}
  
function AddBefore(rowId,code){
    var target = document.getElementById(rowId);
    var newElement = document.createElement('tr');
    target.parentNode.insertBefore(newElement, target);
    newElement.innerHTML=code;
}


function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script>
		
</head>




<!-- A4=210x297 so width=840 height=1200 -->

<body>



<?php 
//Form element at this place (outside table below , with closing outside required to make  POST visible if added by javascript
echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '<table class=noborder ><tr><td>';
//<!-- menu() have its own <form>. Never enclose it in another form -->
menu();
echo '</td><td valign=top >';

//Form element at this place (inside a table, with closing outside donot make POST visible if added by javascript
//echo '<form method=post  enctype=\'multipart/form-data\' >';

echo '</td><td  valign=top>';
echo $save_msg;
echo '</td></tr></table>';
?>


<h1 style="color:white;"><p align=center><b>DECLARATION FORM : 2017 - 2018 - FACULTY</b></p></h1>
<h3><p align=center><u><span style="background:#cc0000;">Note: Use Declaration->Check menu to varify the correctness of details filled</span></u></p></h3>



	
<!--<span>-->
<?php
	echo '<button style="background-color:lightgreen" class="menub" name=action type=submit value=save title="save frequently to prevent repeat attempts">Save</button>';
?>
<!--</span>-->
<!--<span class=section_header onclick="showhide_with_tab('for_assessors'
			,'section','section_header',this)">For Assessors</span>
-->
			
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('identity'	,'section','section_header',this)">Identity Information</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('contact'					,'section','section_header',this)">Contact</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('service'					,'section','section_header',this)">Service</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('qualification_section'	,'section','section_header',this)">Qualification</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('experience_section'		,'section','section_header',this)">Experience</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('present_appointment'		,'section','section_header',this)">Present Appointment</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('MET'						,'section','section_header',this)">MET</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('MCI'						,'section','section_header',this)">MCI</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('publication'				,'section','section_header',this)">Publication</button>
<button type=button class="section_header tabbutton" onclick="showhide_with_tab('income'					,'section','section_header',this)">Income</button>

<!--<span class=section_header onclick="showhide_with_tab('declaration'				,'section','section_header',this)">Declaration</span>
-->

</p>
<div id=for_assessors style="display:none;background-color:lightgreen"  class=section>

<p><b>NAME OF THE COLLEGE: 
	<input type=text placeholder="autofilled" readonly size=30 name=declaration_college id=declaration_college value=
	<?php echo '\''.$current_appointment['institute'].'\'';?>
	>
	<input type=text placeholder="autofilled" readonly size=15  name=declaration_city id=declaration_city value=
		<?php 
			$ex=explode(" ",$current_appointment['institute']);
			$tot=count($ex);
			echo $ex[$tot-1];
		?>
	>
</b></p>
<table class="border">
	<tr>
		<td><b>Date of <br>Assessment</b></td>
		<td style="width:40mm;"></td>
		<td style="width:120mm;" align=center><b>Remarks</b></td>
	</tr>
	<tr>
		<td><b>Accepted?<br>(YES/NO)</b></td>
		<td></td>
		<td rowspan="3"></td>
	</tr>
	<tr>
		<td><b>Name of the <br>Assessor</b></td>
		<td></td>
	</tr>
	<tr>
		<td><b>Signature of <br>Assessor</b></td>
		<td></td>
	</tr>
</table>
</div>




</p>

<div id=identity style="display:none;"  class=section>
	
<br>
<table class="border">
<tr><td><p>1.(a)Name <input type=text placeholder="Lastname Firstname Middlename" name=name id=name size=20 value=<?php echo '\''.$staff_detail['fullname'].'\''; ?>></p>
  <BR>
	<p>1.(b) Date of Birth <input readonly	id=dob class="datepicker" size="10" name=dob value=<?php echo '\''.mysql_to_india_date($staff_detail['dob']).'\''; ?>> &amp; Age <input readonly type=text name=age value=<?php 
	//$diff=date_diff_to_year_month_days($staff_detail['dob'],strftime("%Y-%m-%d"));
	$diff=get_date_diff_as_ymd($staff_detail['dob'],strftime("%Y-%m-%d"));
	echo '\''.$diff.'\'';
	?>></p></td></tr>

<tr><td><br>
	<p><button style="background-color:yellow;color:black;font-size:23px;" type=button onclick="alert('(1) Upload pdf/jpg copy of photo ID proof. (2) Upload pdf/jpg of passport size photo')"><b>1.(c)</b></button>Submit Photo ID proof issued by Govt. Authorities :</p>
</td></tr>

<tr><td>
	<p><?php
	echo'<table><tr><td><div style="background-color:#E5E4E2;width: 100%;display:inline;float:left">';
		echo '<table border="1" class=border><tr><td>';
		echo 'Photo ID submitted :';
		echo '</td>';
		echo '<td>';
		mk_select_from_sql($link,'select * from photo_id_proof_type','photo_id_proof_type','photo_id','',$photo['proof_type']);
		echo '</td></tr>';
		echo '<tr><td  class=upload>';
		echo '<input name=photo_id type=file><--Upload photo id';		
		echo '</td>';
		echo '<td class=upload>';
		echo ' uploaded: '.$photo['photo_id_filename']; 
		echo '</td></tr>';
		echo '<tr><td>';
		echo 'Number: <input type=text name=photo_id_number value=\''.$photo['proof_number'].'\'';	
		echo '</td>';
		echo '<td><br>';
		echo 'Issued by: <input type=text name=photo_id_issued_by value=\''.$photo['proof_issued_by'].'\'';	
		echo '</td></tr>';
		echo '</table>';
		echo'</div></td><td>';
	?>
	
	<?php
	        echo'<div style="width: 40%;border-color:black;">';
			echo '<table class=border border="1" >
			<tr>
			<td align=center ">';
				display_photo($link,$photo['photo']);
			echo '</td>
			</tr>
			<tr><td  class=upload>';
			echo '<input name=photo type=file><--Upload photo';
			
			echo '</td></tr>
			<tr>';
			echo '<td class=upload>';
			echo 'uploaded:'.$photo['photo_filename']; 
			echo '</td></tr></table>';
			echo'</div></td></tr></table>';
	?></p>

</td>
</tr>

</table>

</div>
<?php

$de=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');
$opt=array('','Yes','No','Exempted');
$catagory=array('','General','SEBC','ST','SC');
echo '<div id=service style="display:none;"  class=section>';
echo '<table align=center  class=border>';
	echo '<tr>';
		echo '<th colspan=2 >';
		echo '<br><h1>
	Miscellenious Sevice data</h1>';
		echo '</th>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo '<br>Catagory';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($catagory,'catagory','',$staff_detail['catagory']);
		echo '</td>';
	echo '</tr>';	
	echo '<tr>';
		echo '<td>';
			echo '<br>CCC+ Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'cccplus','',$de['cccplus']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo '<br>Gujarati Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'gujarati','',$de['gujarati']);
		echo '</td>';
	echo '</tr>';
	echo '<tr>';
		echo '<td>';
			echo '<br>Hindi Passed';
		echo '</td>';
		echo '<td>';
			mk_select_from_array($opt,'hindi','',$de['hindi']);
		echo '</td>';
	echo '</tr>';
echo '</table>';

echo '</div>';
?>

<?php
if($donot_hide=='qualification')
{
	$qualification_style='display:block';
}
else
{
	$qualification_style='display:none';
}

if($donot_hide=='experience')
{
	$experience_style='display:block';
}
else
{
	$experience_style='display:none';
}

?>

<div id=qualification_section style="<?php echo $qualification_style; ?>"  class=section>
	
<!---start of qualification and experience -->
<p>
<table class="border" border="1" style="background-color:#A6AEC8"  id="qualification_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;color:black;" type=button 
			onclick="showhide('qualification_help')"> <p><b>2.</b></p></button> Qualifications :</p> </th></tr>
<tr><td colspan=7><h2>
	<table class=border style="background-color:#EBF4FA;display:block;boder-color:gray;" id=qualification_help>
		<tr><td colspan=7 ><br>(1) Fill Qualification details in blue row</td></tr>
		<tr><td colspan=7 ><br>(2) Click [[Add qualification]]</td></tr>
		<tr><td colspan=7 ><br>(3) College, University and Year are must for saving data</td></tr>
		<tr><td colspan=7 ><br>(4) Click "X" beside the qualification to delete it</td></tr>
		<tr><td colspan=7 ><br>(5) Upload Degree and Registration certificates where relavent</td></tr>
		<tr><td colspan=7 ><br>(6) Delete if any mistake is done/ upload not done and add again</td></tr>
		</h2>
		</table>
</td></tr>	
	
<tr>
	<th>Del</th><th>Qualification</th><th>College</th><th>University</th><th >Year</th><th>Registration No of UG & PG with date</th><th>	Name of the State Medical Council</th>
</tr>
<?php
add_qualification_raw($link);
view_table_qualification($link);
?>


<tr>
	<th  colspan=6 style="text-align:left;">Note: For PG-Post PG qualification additional Registration certificate particulars be furnished and subject be indicated within brackets
after scoring out whichever is not applicable.</th></tr>
<tr><td  colspan=6 ><b>2.(a)</b> Copy of Degree certificates  of MBBS and PG degree attached - <?php echo $degree_attachment_str; ?></td></tr>
<tr><td  colspan=6 ><b>2.(b)</b> Copy of Registration of MBBS and PG degree attached -  <?php echo $reg_attachment_str; ?></td></tr>
</table>

</p>

</div>
<div id=experience_section style="<?php echo $experience_style; ?>"   class=section>

<p>
<table class="border"   style="background-color:lightgray" id="experience_table">
<tr><th colspan=7 style="text-align:left;"><button style="background-color:yellow;color:black;" type=button 
			onclick="showhide('experience_help')"><p><b>3.(a)</b></button><b> Details of the teaching experience till date.</b></th></tr>
<tr><td colspan=7>
	<table class=border  style="background-color:#EBF4FA;display:block;" id=experience_help>
		<tr><td colspan=7 ><br>(1) Add all appointments/transfers/promotions saparately in new row.</td></tr>
		<tr><td colspan=7 ><br>(2) Click [[Add experience]].</td></tr>
		<tr><td colspan=7 ><br>(3) Change of type of appointment (e.g Adhoc->GPSC) also needs to be indicated saparately in new row.</td></tr>
		<tr><td colspan=7 ><br>(4) Put CheckMark checkbox in "Name of Institution" column to write name of institute not present in dropdown list.</td></tr>
		<tr><td colspan=7 ><br>(5) Ex-Army person can use this table to fill their details</td></tr>
		<tr><td colspan=7 ><br>(6) Appointments with transfers shall be entered as respective appointment type</td></tr>
		<tr><td colspan=7 ><br>(7) Each transfers will require different entry. Indicate correct TYPE of appointment appicable to transfer.</td></tr>
		<tr><td colspan=7 ><br>(8) For Current appointment select 'till date' for 'to date'</td></tr>
		</table>
</td></tr><br>

<tr><td colspan=5><button type=submit style="color:black;background-color:lightgreen;color:black;" name=action value=manage_exp formaction=experience_management.php>Manage/Edit Experience</button></td></tr>

<tr>
	<th>Del</th>
	<th >Designation</th>
	<th >Type</th>
	<th >Department</th>
	<th >Name of Institution</th>
	<th >From - To - Total</th>
</tr>
<?php
//add_experience_raw($link);

view_table_experience($link);
?>




<tr>
<tr><td  colspan=7><b><br>Note:-</b>Tutor working in Anesthesia and Radio-diagnosis must have 3 years teaching experience in the respective departments in a recognized/permitted
medical institute to be consider as senior resident.</td></tr>
</table>

</div>
<!--
	<table class=border style="width:100%;">
		<tr><td colspan=10><b>3(b).</b>To be filled in by Ex Army Personnel only: <b>(Not used for online filling of declaration)</b></td></tr>
		<tr>
			<th rowspan=2 >S.No.</th>
			<th  rowspan=2 >Designation</th>
			<th  rowspan=2 >Institution</th>
			<th colspan=2>Period</th>
		</tr>
		<tr>
			<th>From</th>
			<th>To</th>
		</tr>
		<tr>
			<td>1.</td>
			<td>Graded Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Classified Specialist</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>		<tr>
			<td>1.</td>
			<td>Adviser</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
</table>
-->
</p>

<!-- end of qualification and experience -->



<div id=present_appointment style="display:none;padding:10px;"   class=section>
<p>Note:<br><br>
           1) Without Photo ID, Declaration form will be rejected and will notbe considered as teaching   faculty.<br><br>
           2) Original Certificates are mandatory for verification. All Certificates/Documents/Certified Translations, must be in English</b></p>
<br><p>1.(d)i.Present Designation:
<?php 
	echo '<input type=text readonly value=\''.$current_appointment['post'].'\'>';
	//mk_select_from_sql($link,'select * from designation_type','designation_type','present_designation','',
	//$current_appointment['post']);
?>

</p>

<p><table class="border">
	<tr>
		<td>
			<button style="background-color:yellow;color:black;" type=button onclick="alert('Upload  not implemented yet')"><b>1.(d)(i)a</b></button> Certified copies of present appointment order at present institute attached.</td></tr><tr class=upload><td>
	
			<?php
				echo '<input name=present_appointment_order type=file ><--Upload appt/trnsfr order</td></tr><tr><td  class=upload>';	
				echo 'uploaded:'.$current_appointment_order['attachment_filename']; 
				
			?>
	
		</td>
	</tr>	
</table></p>

<p>1.(d)ii. Department: 

	<?php
		echo '<input type=text readonly value=\''.$current_appointment['department'].'\'>';

	//mk_select_from_sql($link,'select department from department','department','present_department','',$current_appointment['department']);
	?>

</p>
<p><br>1.(d)iii.College: 
	<?php
		echo '<input  size=40  type=text 
				id=present_college_name 
				name=present_college_name readonly 
				value=\''.$current_appointment['institute'].'\'>';
	?>

<!-- <input size=40 type=text name=present_college_name id=present_college_name value="Government Medical College" ></p> -->


<p><br>1.(d)iv.City:
	<?php
		$ex=explode(' ', $current_appointment['institute']);
		$city=$ex[count($ex)-1];
		echo '<input  size=10  type=text 
				id=present_city 
				name=present_city readonly 
				value=\''.$city.'\'>';
	?>

<p><br>1.(d)v.Nature of appointment: 
<?php
	if($current_appointment['type']=='Contract'){echo 'Contactual';}else{echo 'Regular';}
?>

</p>

<p>

<table>
	<tr>
		<td>1.(e)Present Residential  Address of employee :</td>
		<td><textarea cols=40 id=present_residential_address name=present_residential_address>
<?php

		echo $staff_detail['present_residential_address'];

?>		
		</textarea></td>
	</tr>
	
	<tr>
		<td>1.(e)Permanent Residential  Address of employee :</td>
		<td><textarea cols=40 id=permanent_residential_address name=permanent_residential_address>
<?php

		echo $staff_detail['permanent_residential_address'];

?>		
		</textarea></td>
		<td>
		<button 
			type=button 
			id=copy_add 
			onclick="copy_paste_id_to_id('permanent_residential_address','present_residential_address')" >
			Copy From Above
		</button>
		</td>
	</tr>
</table>
</p>


<p><table class=noborder style="width:190mm;"><tr><td>Signature of Faculty</td><td><input type=text readonly placeholder="required in physical copy"></td><td>Signature of Dean</td<td><input type=text  placeholder="required in physical copy" readonly></td></tr><table></p>

<tr><td><b>1.(i)</b>Date of joining present institution :</td><td>
	
<?php
//<input readonly id=present_institute_joining_date class="datepicker" size="10" name=present_institute_joining_date >

echo mysql_to_india_date($current_appointment['from_date']).' as '. $current_appointment['post']
?>

</td><tr>
</table>

<table class="border"  border="1">
	<tr>
		<td><button style="background-color:yellow;color:black;" type=button onclick="alert('Upload pdf/jpg copy of photo ID proof')"><b>1.(j)</b></button> Joining report at the present institute attached:<?php echo $current_joining_attached; ?></td></tr><tr>
			
		<td class=upload>
		<?php
		echo '<input type=file  name=present_joining_order><--Upload joining order</td></tr><tr><td  class=upload>';
		?>	
		Uploaded:
		<?php  echo $current_joining_order['attachment_filename'] ?>
		</td>
	</tr>
</table>

<?php
		$previous_institute_details=find_staff_movement_details_of_previous_institute($link,$current_appointment['institute']);
?>
	
<table class=border  border="1">
	<tr>
		<td>
			<button style="background-color:yellow;color:black;" type=button onclick="alert('Upload pdf/jpg copy of last relieving order ')"><b>4.(a)</b></button> Before joining present institution I was working at 
				<?php echo $previous_institute_details['institute']; ?> 
				as 
				<?php echo $previous_institute_details['post']; ?>
				 and relieved on
				<?php echo mysql_to_india_date($previous_institute_details['to_date']); ?>
				after resigning / retiring .<br> (Relieving order is enclosed from the previous institution)
		</td>
	</tr>
	<tr class=upload>
		<td>
		<?php
		echo '<input  name=last_relieving_order type=file><--Upload relieving order';
			echo '</td></tr>
			<tr  class=upload><td>';
		echo 'Uploaded:';
		echo $previous_relieving_order['attachment_filename']; 
		?>

		</td>
	</tr>
	<tr>
		<td>
			<b>4.(b)</b> I am not working in any other medical college/dental college in the State or outside the State in any capacity Regular / Contractual.
		</td>
	</tr>
</table>
	
</p>

</div>

<div id=MET style="display:none;padding:10px;"   class=section>

<p>1.(f) Have you undergone Training in "Basic Course Workshop" at MCI Regional Centre in MET or in your college under Regional Centre observership

<?php
//find if met is found, if yes, change radio and default display
if($met!==FALSE)
{
	echo '<input type=radio name=MET value=yes checked onclick="show(\'MET_details\')">Yes<input type=radio name=MET value=no onclick="hide(\'MET_details\')">No</p>';	
	
	echo '<table class=border id=MET_details style="display:block;">';
}
else
{
	echo '<input type=radio name=MET value=yes onclick="show(\'MET_details\')">Yes<input type=radio name=MET checked value=no onclick="hide(\'MET_details\')">No</p>';
 
	echo '<table class=border id=MET_details style="display:none;">';
}

?>
	</p>	
	
		<tr>
			<th colspan=2  style="width:60%"><br>Name of MCI Regional Centre where Training was done/If training was done in college, give the details of the observer from RC</th>
			<th colspan=2>Date and place of training</th>
		</tr>
		<tr>
			<td style="width:20%">MET Center:</td><td><input type=text style="width:95%;height:100%;" name=met_center value=
			<?php 
					echo '\''.$met['center'].'\'';
			?>
			
			></td>
			<td style="width:10%">MET Place:</td><td><input type=text  style="width:95%;height:100%;"  name=met_place
			value=
			<?php 
					echo '\''.$met['place'].'\'';
			?>
			
			></td>

		</tr><tr>
			<td  style="width:20%">MET Observer:</td><td><input type=text style="width:95%;height:100%;"  name=met_observer value=
			<?php 
					echo '\''.$met['observer'].'\'';
			?>></td>
			<td  style="width:10%">MET Date:</td><td><br><input readonly	id=met_date class="datepicker" size="10" name=met_date value=
			<?php 
					echo '\''.mysql_to_india_date($met['date']).'\'';
			?>></td>

		</tr>

	</table>

</div>


<div id=contact style="display:none;"   class=section>	
<p>
	<table class="border" style="border-color:black;">
		<tr>
			<td colspan=2><button style="background-color:yellow;color:black;font-size:20px;" type=button onclick="alert('Upload pdf/jpg copy of address proof')"><b>1.(g)</b></button>Copy of Passport /Voter Card / Electricity Bill /Landline Telephone Bill / Aadhar Card / attached as a proof of residence.:
			<?php
				echo $proof_of_residence_attached.'</td>';	
				echo '</tr><tr><td class=upload>';
				echo '<input name=proof_of_residence type=file><--Upload resi proof';
				echo '</td></tr>
							<tr><td class=upload>';	
				echo 'uploaded:'.$r_proof['filename'].'</td>'; 
			?>
			
		</tr>
	</table>
</p>
			
<br>
<p>1.(h)Contact Particulars:</p>
<p>
<table boder="1">
<tr><td><br> Tel (Office)(with STD code):</td><td><br><input type=text  size=30 name=office_phone value="0261-2244175"
value=
			<?php 
					echo '\''.$staff_detail['office_phone'].'\'';?>
			
></td></tr>
<tr><td><br> Tel(Residence): (with STD code)</td><td><br><input size=30 type=text name=residencial_phone
value=
			<?php 
					echo '\''.$staff_detail['residencial_phone'].'\'';
			?>
></td><tr>
<tr><td><br> E-mail address: </td><td><br><input type=text  size=30 name=email
value=
			<?php 
					echo '\''.$staff_detail['email'].'\'';
			?>
></td><tr>
<tr><td><br> Mobile Number: </td><td><br><input type=text  size=30 name=mobile
value=
			<?php 
					echo '\''.$staff_detail['mobile'].'\'';
			?>
></td><tr>
</table>
<table>
	
</table>
</div>


<div id=MCI style="display:none;"   class=section>

<p>
	<table class=border border="1">
		
	<tr><td  colspan=2><b><p>Note:</p></b><br><p>Have you been considered in any UG/PG inspection at any other institution/medical college during last 3 years.If yes, please give details.</p></td></tr>
	<tr><td   colspan=2 align=center><p><br>Give at least date of last appearance</p></td></tr>
	<tr><td   colspan=2 align=center><p><br>other details are automatically obtained from complated experience table</p></td></tr>
	<tr><th align=center ><p><br>Dates of appearance in MCI Inspection:</p></th></tr>
	<tr><td align=center><input name=mci_date id=mci_date class=datepicker>
	<input class=submitbutton name=action value=add_mci_date type=submit></td>
	</tr>
	<tr>
	<td  colspan=3 align=center><?php view_table_mci($link); ?></td>
	</tr>
	</table>
	
	<table>
		<tr>
			<td><br><p>1.(d)vi. Date of appearance in Last MCI - UG/PG/Any Other Assessment:</td><td><b></p>
	
	<b>
	<?php
			echo mysql_to_india_date($last_mci_date['md']); 
			//echo '<td><input readonly	value=\''.mysql_to_india_date($last_mci['last_mci_date']).'\' type=text id=last_mci_date class="datepicker" size="10" name=last_mci_date></td>';
	?>
	</b>
		</td></tr>
	</table>

	</p>

	<?php
	//echo '<pre>';
	//echo 'a';
	//print_r($last_mci_details);
	//echo 'b';

	//print_r($current_appointment);
	//echo '</pre>';
	
	
		if($last_mci_details['institute']==$current_appointment['institute'] && strlen($current_appointment['institute'])>0)
		{
			$last_mci_in_current_institute='Yes';
		}
		else
		{			
			$last_mci_in_current_institute='No';
		}

		if($last_mci_details['post']==$current_appointment['post'] && strlen($current_appointment['post'])>0)
		{
			$last_mci_as_current_post='Yes';
		}
		else
		{			
			$last_mci_as_current_post='No';
		}
		
		echo '<table><tr><td><br><p> 1.(d)vii Whether appeared in Last MCI - UG/PG Assessment in the same Institute -<b>'.$last_mci_in_current_institute.'</b></td></tr></p></table>';

		echo '<table><tr><td><br><p> 1.(d)viii Whether appeared in Last MCI - UG/PG Assessment on same Designation -<b>'.
		$last_mci_as_current_post.'</b></td></tr></p></table>';
		 
	?>

<table><tr><td>
	<br><p>7 I have appeared in the last inspection of the same College in the same post.- </p></td><td>
<p>
<?php

	if($last_mci_as_current_post=='Yes' && $last_mci_in_current_institute=='Yes')
	{
		echo '<b>Yes</b>';
	}
	else
	{
		echo '<b>No</b>';
	}

?>
</p>
</td></tr></table>
</p>


</div>

<div id=publication style="display:none;"   class=section>
<p>
<table width="78%">
	<tr><td colspan=0><p><b><br>5.</b>  Number of  Research publications in Index Journals:</p></td></tr>
	<tr><td><p><b><br><br>5.(a)</b>International Journals:</p></td><td><input type=text name=ipublication value=
	<?php
	echo '\''.$publication['international'].'\'';
	?>
	
	></td></tr>
	<tr><td><p><b><br><br>5.(b)</b> National Journals:</p></td><td><input type=text name=npublication  value=
	<?php
	echo '\''.$publication['national'].'\'';
	?>
	></td></tr>
	<tr><td><p><b><br><br>5.(c)</b> State/Institutional Journals:</p></td><td><input type=text name=spublication  value=
	<?php
	echo '\''.$publication['state'].'\'';
	?>
	></td></tr>
</table>
</p>

</div>

<div id=income style="display:none;"   class=section>
<p>
<table class=border border="1">
	<tr><td><button type=button style="background-color:yellow;color:black;" onclick="alert('Upload scanned / camara-photo of PAN card')" ><p><b>6.(a)</b></p></button> My PAN Card No. is 

	
	<input type=text name=PAN_number value=
	<?php
		echo $pan['pan'];
	?>
	>
	</td></tr><td class=upload>
	<?php	
	echo '<input type=file name=PAN_card ><--Upload PAN';
	echo '</td></tr>
			<tr><td class=upload>';
	?>
	
	Uploaded: <?php echo $pan['attachment_filename'] ?></td></tr>
	

</table>
</p>
<p>
<table class=border border="1" style="width:70%;" >	

	<tr><td colspan=3><button type=button style="background-color:yellow;color:black;" type=button onclick="alert('To be of filled manually when declaration form is printed')"><b><p>6.(b)</b></button></p>I have drawn total emoluments from this college in the current financial year as under:-</td></tr>

	<tr><th><p>Month</p></th><th><p>Amount Received</p></th><th><p>TDS</p></th></tr>
	<tr><td>Apr 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>May 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Jun 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Jul 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Aug 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Sep 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Oct 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Nov 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Dec 2016</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Jan 2017</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Feb 2017</td><td>	Fill by pen</td><td></td></tr>	
	<tr><td>Mar 2017</td><td>	Fill by pen</td><td></td></tr>	
	</table>
</table>

<table><tr><td><button  type=button style="background-color:yellow;color:black;" onclick="alert('PAN uploaded above. Form 16 to be attached manually, when declaration form is printed')"><p><b>6.(c)</b></p></button> (Copy of my PAN &amp; Form 16 (TDS certificate) for financial year 2015-16 are attached)</td></tr></table>
</p>

</div>

<div id=declaration style="display:none;"   class=section>
<p>
	
<table align="top" >


	
<tr><th colspan=3>DECLARATION</th></tr>
<tr><td valign="top" style="width:5%;">1.</td><td style="width:95%;"> I, Dr. 
<?php echo $staff_detail['fullname'] ?> am working as 
<?php echo $current_appointment['post'] ?> in the Department of 
<?php echo $current_appointment['department'] ?>  at 
<?php echo $current_appointment['institute'] ?>,
<?php 
	$ex=explode(' ', $current_appointment['institute']);
	$city=$ex[count($ex)-1]; 
	echo $city ;
?>
 and do hereby give an undertaking that I am a full time teacher in 
<?php echo $current_appointment['department'] ?>, working from  9 A.M. to 5 P.M. daily at this Institute.</td></tr>
<tr><td  valign="top">2.</td><td>I have not presented myself to any other Institution as a faculty in the current academic year for the purpose of MCI assessment.</td></tr>
<tr><td  valign="top"><button  type=button style="background-color:yellow;" onclick="alert('If doing private practice fill details, when declaration form is printed')"><b>3</b></button></td>
<td>
	<table>
	<tr><td>
		I am not having private practice anywhere.
	</td></tr>
	<tr><td>
	I am practicing at ___________ in the city of __________ and my hours of practice are _____ to _____ .Further I state that I am not doing any Private Practice or not working in any other hospital during college hours.
	</td></tr>
	</table>
</td></tr>
<tr><td valign="top">4.</td><td>Complete details with regard to work experience has been provided; nothing has been concealed by me.</td></tr>
<tr><td valign="top">5.</td><td>It is declared that each statement and/or contents of this declaration and /or documents, certificates submitted along with the declaration form, by the undersigned are absolutely true, correct and authentic.  In the event of any statement made in this declaration subsequently turning out to be incorrect or false the undersigned has understood and accepted that such misdeclaration in respect to any content of this declaration shall also be treated as a gross misconduct thereby rendering the undersigned liable for necessary disciplinary action (including removal of his name from Indian Medical Register).</td></tr>
</table>


</p>
<p>
<table class=noborder style="width:90%">
	<tr><td  style="width:15%">Date:</td><td  style="width:15%"><input readonly type=text placeholder="to written when signed"></td><td   align=right style="width:50%">SIGNATURE OF THE EMPLOYEE</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>


<H3 align=center>ENDORSEMENT</H3>
<p>1. This endorsement is the certification that the undersigned has satisfied himself /herself about the correctness and veracity of each content of this declaration and endorses the above mentioned declaration as true and correct.I have verified the certificates / documents submitted by the candidate with the original certificates/documents as submitted by the teacher to the Institute and with the concerned Institute and have found themto be correct and authentic.
</p>
<p>2. I also confirm that Dr.
<?php

echo $staff_detail['fullname'];

?>
 is not practicing or carrying out any other activity during college working hours i.e. from 9.00 AM to 5 PM , since he/she has joined the Institute.
</p>
<p>3.	In the event of this declaration turning out to be either incorrect or any part of this declaration subsequently turning out to be incorrect or false it is understood and accepted that the undersigned shall also be equally responsible besides the declarant himself/herself for any such misdeclaration or misstatement.                             
</p>
<table class=border style="width:100%">
	<tr><td  style="width:25%">Date:</td><td  style="width:25%"><input readonly type=text placeholder="to written when signed"></td><td   style="width:25%" align=center>Signed by HOD</td><td  style="width:25%">Countersigned by the Director/Dean/Principal</td></tr>
	<tr><td >Place:</td><td><input readonly type=text placeholder="to written when signed"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td><td align=right ><input type=text readonly placeholder="to be signed physically"></td></tr>
</table>
</p>

<p>
<H3 align=center>REMARKS</H3>
<table class=border align=center>
<tr><td>S.No</td><td>Documents</td><td>Submitted</td></tr>
<tr><td>1</td><td>Recent Passport size photo of the Employee Signed by Dean / Principal of the college.</td><td>Yes / No</td></tr>
<tr><td>2</td><td>Photo ID proof issued by Govt. Authorities : Passport / PAN Card / Voter ID / Aadhar Card</td><td>Yes / No</td></tr>
<tr><td>3</td><td>Certified copies of present appointment order at present Institute.</td><td>Yes / No</td></tr>
<tr><td>4</td><td>Copy of Passport /Voter Card / Electricity Bill / Telephone Bill / Aadhar Card attached as a proof of residence. </td><td>Yes / No</td></tr>
<tr><td>5</td><td>Joining report at the present institute.</td><td>Yes / No</td></tr>
<tr><td>6</td><td>Copies of Degree certificates of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>7</td><td>Copies of Registration of MBBS and PG degree.</td><td>Yes / No</td></tr>
<tr><td>8</td><td>Copy of experience certificate for all teaching appointments held before joining present institute.</td><td>Yes / No</td></tr>
<tr><td>9</td><td>Relieving order from the previous institution.</td><td>Yes / No</td></tr>
<tr><td>10</td><td>PAN Card</td><td>Yes / No</td></tr>
<tr><td>11</td><td>Form 16 (TDS certificate) for the last financial year. </td><td>Yes / No</td></tr>
<tr><td>12</td><td>Letter head (in case of teachers who are practicing)</td><td>Yes / No</td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed by the Teacher</th><th>Signed by the HOD</th></tr>
<tr><td><input readonly type=text placeholder="Sign in physical copy"></td><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Countersigned by Dean / Principal:</th></tr>
<tr><td><input type=text readonly placeholder="Sign in physical copy"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="Enter in physical copy"></td></tr>
</table>
</p>

<p>
<table>
<tr><th>Signed & Verified by the Assessor:</th></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
<tr><td>Date</td></tr>
<tr><td><input type=text readonly placeholder="NA"></td></tr>
</table>
</p>

<p>1. The Declaration Form will not be accepted and the person will not be counted as teacher if any of the above documents are not enclosed /attached with the Declaration Form.</p>
<p>2. The person will not be counted as a teacher if the original of Photo ID proof, Registration Certificates / Degree certificates / PAN Card /State Medical Council ID (if issued) are not produced for verification at the time of assessment.</p>
<p>3. All the teachers must submit the revised declaration form in this format only. (Any declaration form submitted in an old format will not be accepted and he will not be counted as a teacher.)</p>
</div>

</form>
</body>
</html>

<?php

function add_qualification_raw($link)
{

	echo '<tr style="background-color:lightblue;">
			<td></td><td>';
	mk_select_from_table($link,'qualification_degree','','');
	echo '<br>';
	$sql_qs='select department from department';
	mk_select_from_sql($link,$sql_qs,'department','qualification_subject','','');
	
	echo '<input  class=upload type=file name=file_qualification_degree ><br>^Upload qualification^';
	
	echo '	</td>
			<td  ><input  type=text name=college_qualification ></td>
			<td  ><input  type=text name=university_qualification ></td>
			<td  >';
			read_year('year_qualification',date("Y")-100,date("Y"));
			echo '</td>
			<td >
				<table class=border><tr><td >
				<input placeholder="Reg. No" type=text name=reg_no_qualification id=reg_no_qualification>
				</td></tr><tr><td>
				<input placeholder="Reg. Dt" readonly name=reg_date_qualification id=reg_date_qualification class="datepicker" >
				</td></tr><tr><td>';

			echo '<input  type=file class=upload name=file_qualification_reg ><br>^Upload Reg^';
			echo '</div>';				
					
			echo '</td></tr></table>
			</td>
			<td  ><input type=text name=council_qualification id=council_qualification></td>
			</tr>
			';
	echo '<tr>
			<td colspan=7><button type=submit name=action value=add_qualification style="background-color:lightgreen;color:black;"  >Add Qualification</button></td>
			</tr>';
}

function find_qualification_attachment_name($link,$qualification_id,$type)
{
	$sql='select * from qualification_attachment where qualification_id=\''.$qualification_id.'\' and type=\''.$type.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$ra=mysqli_fetch_assoc($result);
	return $ra['attachment_filename'];
}

function view_table_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\' order by `year`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{		
	$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_qualification value=\''.$ra['qualification_id'].'\'>X</button></td><td>
			'.$ra['qualification'].'('.$ra['subject'].')
			</td>
			<td  >'.$ra['college'].'</td>
			<td  >'.$ra['university'].'</td>
			<td>'.$ra['year'].'</td>
			<td>
				'.$ra['registration_number'].', date:'.mysql_to_india_date($ra['registration_date']).'
			</td>
			<td>'.$ra['medical_council'].'</td>
			</tr>
			';
			echo $raw_html;
			$GLOBALS['degree_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'degree_certificate').',';
			$GLOBALS['reg_attachment_str'].=find_qualification_attachment_name($link,$ra['qualification_id'],'reg_certificate').',';
		}
}



function add_experience_raw($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total
	

	echo '	<td></td><td>';
			mk_select_from_sql($link,'select designation_type from designation_type',
			'designation_type','experience_designation','','');

	echo '	</td><td>';
			mk_select_from_sql($link,'select appointment_type from appointment_type',
			'appointment_type','experience_type','','');
	echo '		<td>';
			mk_select_from_sql($link,'select department from department',
			'department','experience_department','','');
	echo '	</td>
			<td >';
					mk_select_from_sql_with_separate_id($link,'select institute from institute',
						'institute','experience_institute_select','experience_institute_select','','');
						
					echo 	'<table class="noborder" ><tr><td>
								<input size=30 placeholder="Write Institute Name Here" style="display:none;" 
								type=text name=experience_institute_text id=experience_institute_text>	
									</td></tr><tr><td>Other Institutes:
								<input type=checkbox
								id=experience_institute_checkbox  name=experience_institute_checkbox title="Tick to enter name of other medical colleges"
								onclick="my_combo(this,\'experience_institute_text\',\'experience_institute_select\' )" >
							</td></tr></table>
			</td><td>
				<table>
					<tr>
						<td>From:</td>
						<td><input readonly class=datepicker name=from_experience id=from_experience></td>
						<td><select name=from_experience_time><option selected>FN</option><option>AN</option></select></td>
					</tr>
					<tr>
						<td rowspan=2>To:</td>
						<td><div id=to_experience_date>
							<input  readonly class=datepicker name=to_experience_pk id=to_experience_date_pk>
							</div>
							<input readonly style="display:none;" id=to_experience_text 
							name=to_experience_text type=text value=till_date >
						</td>
						<td>
							<select name=to_experience_time><option>FN</option><option selected>AN</option></select>
						</td>
					</tr>
					<tr>
						<td>
							<input type=checkbox name=to_experience_checkbox id=to_experience_checkbox
							onclick="my_combo(this,\'to_experience_text\',\'to_experience_date\' )";				
						>Till Date (Current)
						</td>
					</tr>
				</table>
			</td>
			</tr>
			';
	echo '<tr>
	<td colspan=7><button type=submit name=action value=add_experience style="background-color:lightgreen;"  >Add Experience</button></td>';
	echo '</tr>';
}




function view_table_mci($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from mci where staff_id=\''.$_SESSION['login'].'\' order by `date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	echo '<table class=border style="background-color:lightblue;">';
	echo '<tr><th>Del</th><th>MCI appearance dates</th></tr>';
	while($ra=mysqli_fetch_assoc($result))
	{	
		echo '<tr>
				<td><button type=submit name=delete_mci value=\''.mysql_to_india_date($ra['date']).'\'>X</button></td>
				<td>'.mysql_to_india_date($ra['date']).'</td>
			</tr>';
	}
	echo '</table>';
}

?>

<?php
//echo '<pre>';
//print_r($_POST);
//print_r($_FILES);
//echo if_in_interval("2010-11-01","2010-11-01","2010-11-01");
//echo if_in_interval("2010-02-02","2010-02-01","2010-03-03");
//echo if_in_interval("2010-11-01","2011-11-01","2011-11-01");
//echo if_in_interval("2010-11-01","2009-11-01","2009-11-01");
//echo if_in_interval("2010-11-01","2012-11-01","2009-11-01");
//echo get_exterience("2016-12-12","2016-12-13");
//echo '</pre>';

?>
<br><br><br>

<span style="background-color:white;padding:10px;text-color:white;" class=section_header id=genral_help_sh onclick="showhide_with_label('general_help',this,'general help')">Hide General Help</span>



<input type=hidden name=id value=<?php echo '\''.$staff_detail['id'].'\'';?>>
<br>

<br>
<div id=general_help style="border-style: solid;padding:10px;background-color:#f2f2f2;">
<div  >
           
        <h1 style=\'color:black;padding:5px;\' >General Help</h1>
        <ol>
          <h4><li >Click  <span style="background-color:gray;margin:2px;">  Gray  </span>  buttons to start filling details of respective section.</li></h4>
          <h4><li> Click <span style="background-color:yellow;margin:2px;">yellow </span> buttons to get help.</li></h4>
          <h4><li><span style="background-color:lightpink;margin:2px;">Pink fields</span> need  pdf/jpg upload. </li></h4>
          <h4><li> If smart phone is used to fill this form, use camara to snap and <span style="background-color:lightpink;margin:2px;">upload</span> documents</li></h4>
          <h4><li>Some of the details will be automatically filled, AFTER data is saved.</li></h4>
          <h4><li>Save frequently (<span style="background-color:lightgreen;margin:2px;">Green Button</span>) . Saved data is automatically retrived.</li></h4>
          <h4><li>Keep elctronic/physical copy of photo id, photo, degree, registration, current appointment order, current joining order, last relieving order, PAN, address proof ready.</li></h4>
           <h4><li>Keep dates of each and every appointments/transfers/promotions ready.</li></h4>
        </ol>
       </div>

</div>
<?php
//session_start();
require_once '../common/common.php';


//echo '<pre>';print_r($GLOBALS);echo '</pre>';



function save($link)
{
	//following exist for all users. So only update is required
	//Staff(fullname,dob)
	update_field_by_id($link,'staff','id',$_POST['id'],'fullname',$_POST['name']);
	update_field_by_id($link,'staff','id',$_POST['id'],'catagory',$_POST['catagory']);
	//Removed, saved from exterience table
	//update_field_by_id($link,'staff','id',$_POST['id'],'department',$_POST['present_department']);
	update_field_by_id($link,'staff','id',$_POST['id'],'dob',india_to_mysql_date($_POST['dob']));
//	update_field_by_id($link,'staff','id',$_POST['id'],'residencial_address',rtrim($_POST['residencial_address']));
	update_field_by_id($link,'staff','id',$_POST['id'],'present_residential_address',mysqli_real_escape_string($link,rtrim($_POST['present_residential_address'])));
	
	update_field_by_id($link,'staff','id',$_POST['id'],'permanent_residential_address',mysqli_real_escape_string($link,rtrim($_POST['permanent_residential_address'])));
	
	
	//following may not be existing for a given user, so update, if it fail, insert is required
	//photo and photo id
	//empty select will give Notice, if no proof_type added
	update_or_insert_field_by_id($link,'photo','id',$_POST['id'],'proof_type',$_POST['photo_id']);
	update_or_insert_field_by_id($link,'photo','id',$_POST['id'],'proof_number',$_POST['photo_id_number']);
	update_or_insert_field_by_id($link,'photo','id',$_POST['id'],'proof_issued_by',$_POST['photo_id_issued_by']);

	update_or_insert_attachment($link,'photo','id',$_POST['id'],'photo_id',$_FILES['photo_id']);
	update_or_insert_filename_field_by_id($link,'photo','id',$_POST['id'],'photo_id_filename',$_FILES['photo_id']['name']);

	update_or_insert_attachment($link,'photo','id',$_POST['id'],'photo',$_FILES['photo']);
	update_or_insert_filename_field_by_id($link,'photo','id',$_POST['id'],'photo_filename',$_FILES['photo']['name']);

	update_or_insert_attachment($link,'photo','id',$_POST['id'],'photo',$_FILES['photo']);
	update_or_insert_filename_field_by_id($link,'photo','id',$_POST['id'],'photo_filename',$_FILES['photo']['name']);

	/////appointment order upload
	$staff_movement_raw=get_raw($link,'select * from staff_movement where staff_id=\''.$_POST['id'].'\' and to_date is null');
	//upload only if appointment entered
	


	if($staff_movement_raw)
	{
		//try only if upload supplied
		if($_FILES['present_appointment_order']['size']>0)
		{
			$sql_att='select * from staff_movement_attachment where movement_id=\''.$staff_movement_raw['movement_id'].'\' and type=\'appointment_order\'';		
			if(!$result_att=mysqli_query($link,$sql_att)){echo mysqli_error($link);return FALSE;}
			//update  if raw found
			if($array_att=mysqli_fetch_assoc($result_att))
			{
				$pk=find_primary_key_array($link,'staff_movement_attachment');
				$pk_result=read_primary_key($pk,$array_att);
				$wr=prepare_where($pk_result);
				//echo 'trying update';
				$sql_update_att='update staff_movement_attachment set 
									attachment=\''.file_to_str($link,$_FILES['present_appointment_order']).'\',
									attachment_filename=\''.$_FILES['present_appointment_order']['name'].'\' '.$wr;
									
				if(!$result_update_att=mysqli_query($link,$sql_update_att)){echo mysqli_error($link);}
				else
				{
					//echo 'update success';
				}
									
			}
			//insert if no raw found	
			else
			{
				$sql_insert_att='insert into staff_movement_attachment (movement_id,type,attachment,attachment_filename)
								 values(
									\''.$staff_movement_raw['movement_id'].'\',
									\'appointment_order\',
									\''.file_to_str($link,$_FILES['present_appointment_order']).'\',
									\''.$_FILES['present_appointment_order']['name'].'\'
								)';
						
				if(!$result=mysqli_query($link,$sql_insert_att))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//echo 'insert success';
				}
			}
		}	
	}
	else
	{
		//echo 'Please current appointment details in experience table (3.1a), before uploading current appointment order ';
	}																				


	//update_or_insert_field_by_id($link,'last_mci','id',$_POST['id'],'last_mci_date',
	//							india_to_mysql_date($_POST['last_mci_date']));	
	

	update_or_insert_attachment($link,'residencial_address_proof','id',$_POST['id'],'proof',$_FILES['proof_of_residence']);
	update_or_insert_filename_field_by_id($link,'residencial_address_proof',
											'id',$_POST['id'],'filename',$_FILES['proof_of_residence']['name']);


	if($_POST['MET']=='yes')
	{
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'center',
									$_POST['met_center']);
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'place',
									$_POST['met_place']);
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'observer',
									$_POST['met_observer']);
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'date',
									india_to_mysql_date($_POST['met_date']));
	}
	elseif($_POST['MET']=='no')
	{
		delete_raw_by_id($link,'met','id',$_POST['id']);
	}


	update_field_by_id($link,'staff','id',$_POST['id'],'residencial_phone',$_POST['residencial_phone']);
	update_field_by_id($link,'staff','id',$_POST['id'],'office_phone',$_POST['office_phone']);
	update_field_by_id($link,'staff','id',$_POST['id'],'mobile',$_POST['mobile']);
	update_field_by_id($link,'staff','id',$_POST['id'],'email',$_POST['email']);


/////joining order upload////////////////
	
	//$staff_movement_raw is from above
	if($staff_movement_raw)
	{
		//try only if upload supplied
		if($_FILES['present_joining_order']['size']>0)
		{
			$sql_att='select * from staff_movement_attachment where movement_id=\''.$staff_movement_raw['movement_id'].'\' and type=\'joining_order\'';		
			if(!$result_att=mysqli_query($link,$sql_att)){echo mysqli_error($link);return FALSE;}
			//update  if raw found
			if($array_att=mysqli_fetch_assoc($result_att))
			{
				$pk=find_primary_key_array($link,'staff_movement_attachment');
				$pk_result=read_primary_key($pk,$array_att);
				$wr=prepare_where($pk_result);
				//echo 'trying update';
				$sql_update_att='update staff_movement_attachment set 
									attachment=\''.file_to_str($link,$_FILES['present_joining_order']).'\',
									attachment_filename=\''.$_FILES['present_joining_order']['name'].'\' '.$wr;
									
				if(!$result_update_att=mysqli_query($link,$sql_update_att)){echo mysqli_error($link);}
				else
				{
					//echo 'update success';
				}
									
			}
			//insert if no raw found	
			else
			{
				$sql_insert_att='insert into staff_movement_attachment (movement_id,type,attachment,attachment_filename)
								 values(
									\''.$staff_movement_raw['movement_id'].'\',
									\'joining_order\',
									\''.file_to_str($link,$_FILES['present_joining_order']).'\',
									\''.$_FILES['present_joining_order']['name'].'\'
								)';
						
				if(!$result=mysqli_query($link,$sql_insert_att))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//echo 'insert success';
				}
			}
		}	
	}
	else
	{
		//echo 'Please current appointment details in experience table (3.1a), before uploading current appointment order ';
	}																				
////////////joining order section ends here//////////////////

///////////Qualification management///////////
/*
	[qualification_degree] => MBBS
    [qualification_subject] => Anatomy
    [college_qualification] => 
    [university_qualification] => 
    [year_qualification] => 
    [reg_no_qualification] => 
    [reg_date_qualification] => 
    [council_qualification] => 
    [action] => qualification

*/
if(isset($_POST['action']))
	{
		//removed to use save button 
		//if($_POST['action']=='add_qualification')
		//{
			if(	strlen($_POST['college_qualification'])>0 &&
				strlen($_POST['university_qualification'])>0 &&
				strlen($_POST['year_qualification'])>0
				)
			{
				$q_sql='insert into qualification values (
							\'\',
							\''.$_SESSION['login'].'\',
							\''.$_POST['qualification_degree'].'\',
							\''.$_POST['qualification_subject'].'\',
							\''.$_POST['college_qualification'].'\',
							\''.$_POST['university_qualification'].'\',
							\''.$_POST['year_qualification'].'\',
							\''.$_POST['reg_no_qualification'].'\',
							\''.india_to_mysql_date($_POST['reg_date_qualification']).'\',
							\''.$_POST['council_qualification'].'\')';
				///echo $q_sql;
				if(!$result=mysqli_query($link,$q_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
					$insert_id=mysqli_insert_id($link);
					////upload degree
					if($_FILES['file_qualification_degree']['size']>0)
					{
						$sql_q_a='insert into qualification_attachment
									(attachment_id,qualification_id,type,attachment,attachment_filename)
									 values(
										\'\',
										\''.$insert_id.'\',
										\'degree_certificate\',
										\''.file_to_str($link,$_FILES['file_qualification_degree']).'\',
										\''.$_FILES['file_qualification_degree']['name'].'\'
									)';
							
						if(!$result=mysqli_query($link,$sql_q_a))
						{		
							echo mysqli_error($link);
						}
						else
						{
							//echo 'insert success';
						}
					}
					
					///upload registration				
					if($_FILES['file_qualification_reg']['size']>0)
					{
						$sql_q_a='insert into qualification_attachment
									(attachment_id,qualification_id,type,attachment,attachment_filename)
									 values(
										\'\',
										\''.$insert_id.'\',
										\'reg_certificate\',
										\''.file_to_str($link,$_FILES['file_qualification_reg']).'\',
										\''.$_FILES['file_qualification_reg']['name'].'\'
									)';
							
						if(!$result=mysqli_query($link,$sql_q_a))
						{		
							echo mysqli_error($link);
						}
						else
						{
							//echo 'insert success';
						}
					}
				}	
				
			}
		//}
	}

if(isset($_POST['delete_qualification']))
{
			$d_sql='delete from qualification where qualification_id=\''.$_POST['delete_qualification'].'\'';
			if(!$result=mysqli_query($link,$d_sql))
			{		
				echo mysqli_error($link);
			}
			else
			{
				$da_sql='delete from qualification_attachment where qualification_id=\''.$_POST['delete_qualification'].'\'';
				if(!$result=mysqli_query($link,$da_sql))
				{		
					echo mysqli_error($link);
				}
			}	
}	


///////////Qualification management ends here//////////////

///////////Experience management///////////
/*
   [experience_designation] => Assistant Professor
    [experience_type] => Adhoc
    [experience_department] => N/A
    [experience_institute] => XXXXXXXXX
    [from_experience] => 01-11-2006
    [from_experience_time] => FN
    [to_experience] => till_date XXXXXXXXX
    [to_experience_time] => AN
    [to_experience_checkbox] => on
    [action] => add_experience

*/
/*
	if(isset($_POST['action']))
	{
		//removed to use save button
		//if($_POST['action']=='add_experience')
		//{
			//empty institute table will result in Notice
			if(	(strlen($_POST['experience_institute_text'])>0 || strlen($_POST['experience_institute_select'])>0) &&
				strlen($_POST['from_experience'])>0 &&
				(strlen($_POST['to_experience_text'])>0 || strlen($_POST['to_experience_pk'])>0)
				)
			{

				if(isset($_POST['to_experience_checkbox']))	//which means it is on
				{
					$to_date='NULL';
				}
				else
				{
					$to_date='\''.india_to_mysql_date($_POST['to_experience_pk']).'\'';
				}

				if(isset($_POST['experience_institute_checkbox']))
				{
					$exp_inst=$_POST['experience_institute_text'];
				}
				else
				{
					$exp_inst=$_POST['experience_institute_select'];
				}
								
				$q_sql='insert into staff_movement values (
							\'\',
							\''.$_SESSION['login'].'\',
							\''.$exp_inst.'\',
							\''.$_POST['experience_department'].'\',
							\''.$_POST['experience_designation'].'\',
							\''.india_to_mysql_date($_POST['from_experience']).'\',
							\''.$_POST['from_experience_time'].'\','
							.$to_date.',
							\''.$_POST['to_experience_time'].'\',
							\''.$_POST['experience_type'].'\')';
				///echo $q_sql;
				if(!$result=mysqli_query($link,$q_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
					$insert_id=mysqli_insert_id($link);
				}	
				
			}
		//}
	}


	if(isset($_POST['delete_experience']))
	{
				$d_sql='delete from staff_movement where movement_id=\''.$_POST['delete_experience'].'\'';
				if(!$result=mysqli_query($link,$d_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
				$da_sql='delete from staff_movement_attachment where movement_id=\''.$_POST['delete_experience'].'\'';
					if(!$result=mysqli_query($link,$da_sql))
					{		
						echo mysqli_error($link);
					}
				}	
	}	
	//680765
	///////////Experience management ends here//////////////
*/

	if(isset($_POST['action']))
	{
		if($_POST['action']=='add_mci_date')
		{		
			if(strlen($_POST['mci_date'])>0)
			{
				insert_field_by_id($link,'mci','staff_id',$_POST['id'],'date',india_to_mysql_date($_POST['mci_date']));
			}
		}
	}
	
	if(isset($_POST['delete_mci']))
	{
				$d_sql='delete from mci where 
						staff_id=\''.$_POST['id'].'\' and 
						`date`=\''.india_to_mysql_date($_POST['delete_mci']).'\'';
				//echo $d_sql;
				if(!$result=mysqli_query($link,$d_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//do nothing
				}	
	}	
	
//////////////upload last institute relieving order//////////////////

	$staff_movement_raw=get_raw($link,'select * from staff_movement where staff_id=\''.$_POST['id'].'\' and to_date is null');
	//upload only if last appointment entered
	
	if($staff_movement_raw)
	{
		//try only if upload supplied
		if($_FILES['last_relieving_order']['size']>0)
		{
			$sql_att='select * from staff_movement_attachment where movement_id=\''.$staff_movement_raw['movement_id'].'\' and type=\'relieving_order\'';		
			if(!$result_att=mysqli_query($link,$sql_att)){echo mysqli_error($link);return FALSE;}
			//update  if raw found
			if($array_att=mysqli_fetch_assoc($result_att))
			{
				$pk=find_primary_key_array($link,'staff_movement_attachment');
				$pk_result=read_primary_key($pk,$array_att);
				$wr=prepare_where($pk_result);
				//echo 'trying update';
				$sql_update_att='update staff_movement_attachment set 
									attachment=\''.file_to_str($link,$_FILES['last_relieving_order']).'\',
									attachment_filename=\''.$_FILES['last_relieving_order']['name'].'\' '.$wr;
									
				if(!$result_update_att=mysqli_query($link,$sql_update_att)){echo mysqli_error($link);}
				else
				{
					//echo 'update success';
				}
									
			}
			//insert if no raw found	
			else
			{
				$sql_insert_att='insert into staff_movement_attachment (movement_id,type,attachment,attachment_filename)
								 values(
									\''.$staff_movement_raw['movement_id'].'\',
									\'relieving_order\',
									\''.file_to_str($link,$_FILES['last_relieving_order']).'\',
									\''.$_FILES['last_relieving_order']['name'].'\'
								)';
						
				if(!$result=mysqli_query($link,$sql_insert_att))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//echo 'insert success';
				}
			}
		}	
	}
	else
	{
		//echo 'Please current appointment details in experience table (3.1a), before uploading current appointment order ';
	}																				
/////////////////////upload of last releiving order upload ends here////////////////////////////////


update_or_insert_field_by_id($link,'publication','staff_id',$_POST['id'],
										'international',	$_POST['ipublication']);
update_or_insert_field_by_id($link,'publication','staff_id',$_POST['id'],
										'national',	$_POST['npublication']);
update_or_insert_field_by_id($link,'publication','staff_id',$_POST['id'],
										'state',	$_POST['spublication']);										


	update_or_insert_attachment($link,'pan','staff_id',$_POST['id'],'attachment',$_FILES['PAN_card']);
	update_or_insert_filename_field_by_id($link,'pan','staff_id',$_POST['id'],'attachment_filename',$_FILES['PAN_card']['name']);
	update_or_insert_field_by_id($link,'pan','staff_id',$_POST['id'],
										'pan',	$_POST['PAN_number']);
	


update_or_insert_field_by_id($link,'departmental_exam','staff_id',$_POST['id'],'cccplus',$_POST['cccplus']);
update_or_insert_field_by_id($link,'departmental_exam','staff_id',$_POST['id'],'gujarati',$_POST['gujarati']);
update_or_insert_field_by_id($link,'departmental_exam','staff_id',$_POST['id'],'hindi',$_POST['hindi']);

	return true;
}

?>
<?php
//session_start();
require_once '../common/common.php';


//echo '<pre>';print_r($GLOBALS);echo '</pre>';



function save($link)
{
	//following exist for all users. So only update is required
	//Staff(fullname,dob)
	update_field_by_id($link,'staff','id',$_POST['id'],'fullname',$_POST['name']);
	update_field_by_id($link,'staff','id',$_POST['id'],'catagory',$_POST['catagory']);
	//Removed, saved from exterience table
	//update_field_by_id($link,'staff','id',$_POST['id'],'department',$_POST['present_department']);
	update_field_by_id($link,'staff','id',$_POST['id'],'dob',india_to_mysql_date($_POST['dob']));
//	update_field_by_id($link,'staff','id',$_POST['id'],'residencial_address',rtrim($_POST['residencial_address']));
	update_field_by_id($link,'staff','id',$_POST['id'],'residencial_address',mysqli_real_escape_string($link,rtrim($_POST['residencial_address'])));
	//following may not be existing for a given user, so update, if it fail, insert is required
	//photo and photo id
	//empty select will give Notice, if no proof_type added
	update_or_insert_field_by_id($link,'photo','id',$_POST['id'],'proof_type',$_POST['photo_id']);
	update_or_insert_field_by_id($link,'photo','id',$_POST['id'],'proof_number',$_POST['photo_id_number']);
	update_or_insert_field_by_id($link,'photo','id',$_POST['id'],'proof_issued_by',$_POST['photo_id_issued_by']);

	update_or_insert_attachment($link,'photo','id',$_POST['id'],'photo_id',$_FILES['photo_id']);
	update_or_insert_filename_field_by_id($link,'photo','id',$_POST['id'],'photo_id_filename',$_FILES['photo_id']['name']);

	update_or_insert_attachment($link,'photo','id',$_POST['id'],'photo',$_FILES['photo']);
	update_or_insert_filename_field_by_id($link,'photo','id',$_POST['id'],'photo_filename',$_FILES['photo']['name']);

	update_or_insert_attachment($link,'photo','id',$_POST['id'],'photo',$_FILES['photo']);
	update_or_insert_filename_field_by_id($link,'photo','id',$_POST['id'],'photo_filename',$_FILES['photo']['name']);

	/////appointment order upload
	$staff_movement_raw=get_raw($link,'select * from staff_movement where staff_id=\''.$_POST['id'].'\' and to_date is null');
	//upload only if appointment entered
	


	if($staff_movement_raw)
	{
		//try only if upload supplied
		if($_FILES['present_appointment_order']['size']>0)
		{
			$sql_att='select * from staff_movement_attachment where movement_id=\''.$staff_movement_raw['movement_id'].'\' and type=\'appointment_order\'';		
			if(!$result_att=mysqli_query($link,$sql_att)){echo mysqli_error($link);return FALSE;}
			//update  if raw found
			if($array_att=mysqli_fetch_assoc($result_att))
			{
				$pk=find_primary_key_array($link,'staff_movement_attachment');
				$pk_result=read_primary_key($pk,$array_att);
				$wr=prepare_where($pk_result);
				//echo 'trying update';
				$sql_update_att='update staff_movement_attachment set 
									attachment=\''.file_to_str($link,$_FILES['present_appointment_order']).'\',
									attachment_filename=\''.$_FILES['present_appointment_order']['name'].'\' '.$wr;
									
				if(!$result_update_att=mysqli_query($link,$sql_update_att)){echo mysqli_error($link);}
				else
				{
					//echo 'update success';
				}
									
			}
			//insert if no raw found	
			else
			{
				$sql_insert_att='insert into staff_movement_attachment (movement_id,type,attachment,attachment_filename)
								 values(
									\''.$staff_movement_raw['movement_id'].'\',
									\'appointment_order\',
									\''.file_to_str($link,$_FILES['present_appointment_order']).'\',
									\''.$_FILES['present_appointment_order']['name'].'\'
								)';
						
				if(!$result=mysqli_query($link,$sql_insert_att))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//echo 'insert success';
				}
			}
		}	
	}
	else
	{
		//echo 'Please current appointment details in experience table (3.1a), before uploading current appointment order ';
	}																				


	//update_or_insert_field_by_id($link,'last_mci','id',$_POST['id'],'last_mci_date',
	//							india_to_mysql_date($_POST['last_mci_date']));	
	

	update_or_insert_attachment($link,'residencial_address_proof','id',$_POST['id'],'proof',$_FILES['proof_of_residence']);
	update_or_insert_filename_field_by_id($link,'residencial_address_proof',
											'id',$_POST['id'],'filename',$_FILES['proof_of_residence']['name']);


	if($_POST['MET']=='yes')
	{
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'center',
									$_POST['met_center']);
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'place',
									$_POST['met_place']);
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'observer',
									$_POST['met_observer']);
		update_or_insert_field_by_id($link,'met','id',$_POST['id'],'date',
									india_to_mysql_date($_POST['met_date']));
	}
	elseif($_POST['MET']=='no')
	{
		delete_raw_by_id($link,'met','id',$_POST['id']);
	}


	update_field_by_id($link,'staff','id',$_POST['id'],'residencial_phone',$_POST['residencial_phone']);
	update_field_by_id($link,'staff','id',$_POST['id'],'office_phone',$_POST['office_phone']);
	update_field_by_id($link,'staff','id',$_POST['id'],'mobile',$_POST['mobile']);
	update_field_by_id($link,'staff','id',$_POST['id'],'email',$_POST['email']);


/////joining order upload////////////////
	
	//$staff_movement_raw is from above
	if($staff_movement_raw)
	{
		//try only if upload supplied
		if($_FILES['present_joining_order']['size']>0)
		{
			$sql_att='select * from staff_movement_attachment where movement_id=\''.$staff_movement_raw['movement_id'].'\' and type=\'joining_order\'';		
			if(!$result_att=mysqli_query($link,$sql_att)){echo mysqli_error($link);return FALSE;}
			//update  if raw found
			if($array_att=mysqli_fetch_assoc($result_att))
			{
				$pk=find_primary_key_array($link,'staff_movement_attachment');
				$pk_result=read_primary_key($pk,$array_att);
				$wr=prepare_where($pk_result);
				//echo 'trying update';
				$sql_update_att='update staff_movement_attachment set 
									attachment=\''.file_to_str($link,$_FILES['present_joining_order']).'\',
									attachment_filename=\''.$_FILES['present_joining_order']['name'].'\' '.$wr;
									
				if(!$result_update_att=mysqli_query($link,$sql_update_att)){echo mysqli_error($link);}
				else
				{
					//echo 'update success';
				}
									
			}
			//insert if no raw found	
			else
			{
				$sql_insert_att='insert into staff_movement_attachment (movement_id,type,attachment,attachment_filename)
								 values(
									\''.$staff_movement_raw['movement_id'].'\',
									\'joining_order\',
									\''.file_to_str($link,$_FILES['present_joining_order']).'\',
									\''.$_FILES['present_joining_order']['name'].'\'
								)';
						
				if(!$result=mysqli_query($link,$sql_insert_att))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//echo 'insert success';
				}
			}
		}	
	}
	else
	{
		//echo 'Please current appointment details in experience table (3.1a), before uploading current appointment order ';
	}																				
////////////joining order section ends here//////////////////

///////////Qualification management///////////
/*
	[qualification_degree] => MBBS
    [qualification_subject] => Anatomy
    [college_qualification] => 
    [university_qualification] => 
    [year_qualification] => 
    [reg_no_qualification] => 
    [reg_date_qualification] => 
    [council_qualification] => 
    [action] => qualification

*/
if(isset($_POST['action']))
	{
		//removed to use save button 
		//if($_POST['action']=='add_qualification')
		//{
			if(	strlen($_POST['college_qualification'])>0 &&
				strlen($_POST['university_qualification'])>0 &&
				strlen($_POST['year_qualification'])>0
				)
			{
				$q_sql='insert into qualification values (
							\'\',
							\''.$_SESSION['login'].'\',
							\''.$_POST['qualification_degree'].'\',
							\''.$_POST['qualification_subject'].'\',
							\''.$_POST['college_qualification'].'\',
							\''.$_POST['university_qualification'].'\',
							\''.$_POST['year_qualification'].'\',
							\''.$_POST['reg_no_qualification'].'\',
							\''.india_to_mysql_date($_POST['reg_date_qualification']).'\',
							\''.$_POST['council_qualification'].'\')';
				///echo $q_sql;
				if(!$result=mysqli_query($link,$q_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
					$insert_id=mysqli_insert_id($link);
					////upload degree
					if($_FILES['file_qualification_degree']['size']>0)
					{
						$sql_q_a='insert into qualification_attachment
									(attachment_id,qualification_id,type,attachment,attachment_filename)
									 values(
										\'\',
										\''.$insert_id.'\',
										\'degree_certificate\',
										\''.file_to_str($link,$_FILES['file_qualification_degree']).'\',
										\''.$_FILES['file_qualification_degree']['name'].'\'
									)';
							
						if(!$result=mysqli_query($link,$sql_q_a))
						{		
							echo mysqli_error($link);
						}
						else
						{
							//echo 'insert success';
						}
					}
					
					///upload registration				
					if($_FILES['file_qualification_reg']['size']>0)
					{
						$sql_q_a='insert into qualification_attachment
									(attachment_id,qualification_id,type,attachment,attachment_filename)
									 values(
										\'\',
										\''.$insert_id.'\',
										\'reg_certificate\',
										\''.file_to_str($link,$_FILES['file_qualification_reg']).'\',
										\''.$_FILES['file_qualification_reg']['name'].'\'
									)';
							
						if(!$result=mysqli_query($link,$sql_q_a))
						{		
							echo mysqli_error($link);
						}
						else
						{
							//echo 'insert success';
						}
					}
				}	
				
			}
		//}
	}

if(isset($_POST['delete_qualification']))
{
			$d_sql='delete from qualification where qualification_id=\''.$_POST['delete_qualification'].'\'';
			if(!$result=mysqli_query($link,$d_sql))
			{		
				echo mysqli_error($link);
			}
			else
			{
				$da_sql='delete from qualification_attachment where qualification_id=\''.$_POST['delete_qualification'].'\'';
				if(!$result=mysqli_query($link,$da_sql))
				{		
					echo mysqli_error($link);
				}
			}	
}	


///////////Qualification management ends here//////////////

///////////Experience management///////////
/*
   [experience_designation] => Assistant Professor
    [experience_type] => Adhoc
    [experience_department] => N/A
    [experience_institute] => XXXXXXXXX
    [from_experience] => 01-11-2006
    [from_experience_time] => FN
    [to_experience] => till_date XXXXXXXXX
    [to_experience_time] => AN
    [to_experience_checkbox] => on
    [action] => add_experience

*/

	if(isset($_POST['action']))
	{
		//removed to use save button
		//if($_POST['action']=='add_experience')
		//{
			//empty institute table will result in Notice
			if(	(strlen($_POST['experience_institute_text'])>0 || strlen($_POST['experience_institute_select'])>0) &&
				strlen($_POST['from_experience'])>0 &&
				(strlen($_POST['to_experience_text'])>0 || strlen($_POST['to_experience_pk'])>0)
				)
			{

				if(isset($_POST['to_experience_checkbox']))	//which means it is on
				{
					$to_date='NULL';
				}
				else
				{
					$to_date='\''.india_to_mysql_date($_POST['to_experience_pk']).'\'';
				}

				if(isset($_POST['experience_institute_checkbox']))
				{
					$exp_inst=$_POST['experience_institute_text'];
				}
				else
				{
					$exp_inst=$_POST['experience_institute_select'];
				}
								
				$q_sql='insert into staff_movement values (
							\'\',
							\''.$_SESSION['login'].'\',
							\''.$exp_inst.'\',
							\''.$_POST['experience_department'].'\',
							\''.$_POST['experience_designation'].'\',
							\''.india_to_mysql_date($_POST['from_experience']).'\',
							\''.$_POST['from_experience_time'].'\','
							.$to_date.',
							\''.$_POST['to_experience_time'].'\',
							\''.$_POST['experience_type'].'\')';
				///echo $q_sql;
				if(!$result=mysqli_query($link,$q_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
					$insert_id=mysqli_insert_id($link);
				}	
				
			}
		//}
	}


	if(isset($_POST['delete_experience']))
	{
				$d_sql='delete from staff_movement where movement_id=\''.$_POST['delete_experience'].'\'';
				if(!$result=mysqli_query($link,$d_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
				$da_sql='delete from staff_movement_attachment where movement_id=\''.$_POST['delete_experience'].'\'';
					if(!$result=mysqli_query($link,$da_sql))
					{		
						echo mysqli_error($link);
					}
				}	
	}	
	//680765
	///////////Experience management ends here//////////////

	if(isset($_POST['action']))
	{
		if($_POST['action']=='add_mci_date')
		{		
			if(strlen($_POST['mci_date'])>0)
			{
				insert_field_by_id($link,'mci','staff_id',$_POST['id'],'date',india_to_mysql_date($_POST['mci_date']));
			}
		}
	}
	
	if(isset($_POST['delete_mci']))
	{
				$d_sql='delete from mci where 
						staff_id=\''.$_POST['id'].'\' and 
						`date`=\''.india_to_mysql_date($_POST['delete_mci']).'\'';
				//echo $d_sql;
				if(!$result=mysqli_query($link,$d_sql))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//do nothing
				}	
	}	
	
//////////////upload last institute relieving order//////////////////

	$staff_movement_raw=get_raw($link,'select * from staff_movement where staff_id=\''.$_POST['id'].'\' and to_date is null');
	//upload only if last appointment entered
	
	if($staff_movement_raw)
	{
		//try only if upload supplied
		if($_FILES['last_relieving_order']['size']>0)
		{
			$sql_att='select * from staff_movement_attachment where movement_id=\''.$staff_movement_raw['movement_id'].'\' and type=\'relieving_order\'';		
			if(!$result_att=mysqli_query($link,$sql_att)){echo mysqli_error($link);return FALSE;}
			//update  if raw found
			if($array_att=mysqli_fetch_assoc($result_att))
			{
				$pk=find_primary_key_array($link,'staff_movement_attachment');
				$pk_result=read_primary_key($pk,$array_att);
				$wr=prepare_where($pk_result);
				//echo 'trying update';
				$sql_update_att='update staff_movement_attachment set 
									attachment=\''.file_to_str($link,$_FILES['last_relieving_order']).'\',
									attachment_filename=\''.$_FILES['last_relieving_order']['name'].'\' '.$wr;
									
				if(!$result_update_att=mysqli_query($link,$sql_update_att)){echo mysqli_error($link);}
				else
				{
					//echo 'update success';
				}
									
			}
			//insert if no raw found	
			else
			{
				$sql_insert_att='insert into staff_movement_attachment (movement_id,type,attachment,attachment_filename)
								 values(
									\''.$staff_movement_raw['movement_id'].'\',
									\'relieving_order\',
									\''.file_to_str($link,$_FILES['last_relieving_order']).'\',
									\''.$_FILES['last_relieving_order']['name'].'\'
								)';
						
				if(!$result=mysqli_query($link,$sql_insert_att))
				{		
					echo mysqli_error($link);
				}
				else
				{
					//echo 'insert success';
				}
			}
		}	
	}
	else
	{
		//echo 'Please current appointment details in experience table (3.1a), before uploading current appointment order ';
	}																				
/////////////////////upload of last releiving order upload ends here////////////////////////////////


update_or_insert_field_by_id($link,'publication','staff_id',$_POST['id'],
										'international',	$_POST['ipublication']);
update_or_insert_field_by_id($link,'publication','staff_id',$_POST['id'],
										'national',	$_POST['npublication']);
update_or_insert_field_by_id($link,'publication','staff_id',$_POST['id'],
										'state',	$_POST['spublication']);										


	update_or_insert_attachment($link,'pan','staff_id',$_POST['id'],'attachment',$_FILES['PAN_card']);
	update_or_insert_filename_field_by_id($link,'pan','staff_id',$_POST['id'],'attachment_filename',$_FILES['PAN_card']['name']);
	update_or_insert_field_by_id($link,'pan','staff_id',$_POST['id'],
										'pan',	$_POST['PAN_number']);
	


update_or_insert_field_by_id($link,'departmental_exam','staff_id',$_POST['id'],'cccplus',$_POST['cccplus']);
update_or_insert_field_by_id($link,'departmental_exam','staff_id',$_POST['id'],'gujarati',$_POST['gujarati']);
update_or_insert_field_by_id($link,'departmental_exam','staff_id',$_POST['id'],'hindi',$_POST['hindi']);

	return true;
}

?>
<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();


function download_blob($post)
{
	$link=start_nchsls();
	
	$pri=find_primary($post['tname']);

	$where_condition=' ';
	$file=$post['tname'];
	foreach($pri as $key=>$value)
	{
		$where_condition=$where_condition.' `'.$value.'`=\''.$post[$value].'\' and ';
		$file=$file.'-'.$value;
	}
	$where_condition_final=substr($where_condition,0,-4);	
	
	
	$blob=find_blob($post['tname']);

	foreach($blob as $keyy=>$valuee)
	{
		$sql='select `'.$valuee.'` , `'.$valuee.'_name` from `'.$post['tname'].'` where '.$where_condition_final;	
		//echo $sql;
		if(!$result=mysql_query($sql,$link))
		{
			echo 'download_blob() error:'.mysql_error();
		}
		else
		{
			$result_array=mysql_fetch_assoc($result);	
			$name=$result_array[$valuee.'_name'];
			$length=10000000000;
			$type='pdf';
			header("Content-Disposition: attachment; filename=$name");
			header("Content-length: $length");
			header("Content-type: $type");		
			echo $result_array[$valuee];
		}
	}
	exit(0);
}
//echo '<pre>';
//print_r($GLOBALS);

menu();


echo '<table border=1>';
/////////PAN//////////////
echo '<form method=post action=download.php target=_blank>';
$sql_pan='select staff_id,pan from pan where staff_id=\''.$_SESSION['login'].'\'';
$pan=get_raw($link,$sql_pan);
//echo '<table border=1>';
echo '<tr>';
echo '<td>'.$pan['staff_id'].'</td>';
echo '<td></td>';
echo '<th>PAN</th>';
echo '<td>'.$pan['pan'].'</td>';
//echo '<td>'.$pan['attachment_filename'].'</td>';
echo '<td>';
echo '<input type=hidden name=table value=pan>';
echo '<input type=hidden name=filename value=attachment_filename>';
echo '<input type=hidden name=file value=attachment>';
$wr=base64_encode('where staff_id=\''.$_SESSION['login'].'\'');
echo '<input type=hidden name=where value=\''.$wr.'\' >';
echo '<button>download</button>';
echo '</td>';
echo '</tr>';
//echo '</table>';
echo '</form>';

/////////address//////////////
echo '<form method=post action=download.php target=_blank>';
$sql_add='select id,filename from residencial_address_proof where id=\''.$_SESSION['login'].'\'';
$add=get_raw($link,$sql_add);
//echo '<table border=1>';
echo '<tr>';
echo '<td>'.$add['id'].'</td>';
echo '<td></td>';
echo '<th>Address Proof</th>';
echo '<td>'.$add['filename'].'</td>';
echo '<td>';
echo '<input type=hidden name=table value=residencial_address_proof>';
echo '<input type=hidden name=filename value=filename>';
echo '<input type=hidden name=file value=proof>';
$wr=base64_encode('where id=\''.$_SESSION['login'].'\'');
echo '<input type=hidden name=where value=\''.$wr.'\' >';
echo '<button>download</button>';
echo '</td>';
echo '</tr>';
//echo '</table>';
echo '</form>';



/////////photo//////////////
echo '<form method=post action=download.php target=_blank>';
$sql_photo='select id,photo_id_filename,proof_type from photo where id=\''.$_SESSION['login'].'\'';
$photo=get_raw($link,$sql_photo);
//echo '<table border=1>';
echo '<tr>';
echo '<td>'.$photo['id'].'</td>';
echo '<th>Photo ID Proof</th><th>'.$photo['proof_type'].'</th>';
echo '<td>'.$photo['photo_id_filename'].'</td>';
echo '<td>';
echo '<input type=hidden name=table value=photo>';
echo '<input type=hidden name=filename value=photo_id_filename>';
echo '<input type=hidden name=file value=photo_id>';
$wr=base64_encode('where id=\''.$_SESSION['login'].'\'');
echo '<input type=hidden name=where value=\''.$wr.'\' >';
echo '<button>download</button>';
echo '</td>';
echo '</tr>';
//echo '</table>';
echo '</form>';


/////////QUALIFICATION/////////////
echo '<form method=post action=download.php target=_blank>';
$sql_qa='select staff_id,q.qualification_id,qualification,type,attachment_id from qualification q,qualification_attachment qa where q.qualification_id=qa.qualification_id and staff_id=\''.$_SESSION['login'].'\'';


if(!$result=mysqli_query($link,$sql_qa)){echo mysqli_error($link);return FALSE;}
	else
	{
		while($ar=mysqli_fetch_assoc($result))
		{
			echo '<form method=post action=download.php target=_blank>';
			//echo '<table border=1>';
			echo '<tr>';
			echo '<td>'.$ar['staff_id'].'</td>';
			echo '<td>'.$ar['qualification_id'].'</td>';
			echo '<td>'.$ar['qualification'].'</td>';
			echo '<td>'.$ar['type'].'</td>';
			echo '<td>';
			echo '<input type=hidden name=table value=qualification_attachment>';
			echo '<input type=hidden name=filename value=attachment_filename>';
			echo '<input type=hidden name=file value=attachment>';
			$wr=base64_encode('where attachment_id=\''.$ar['attachment_id'].'\'');
			echo '<input type=hidden name=where value=\''.$wr.'\' >';
			echo '<button>download</button>';
			echo '</td>';
			echo '</tr>';
			//echo '</table>';
			echo '</form>';			
		}
	}
	
	
/////////////experience/////////////////////////

echo '<form method=post action=download.php target=_blank>';
$sql_qa='select staff_id,q.movement_id,from_date,qa.type,attachment_id from staff_movement q,staff_movement_attachment qa where q.movement_id=qa.movement_id and staff_id=\''.$_SESSION['login'].'\'';


if(!$result=mysqli_query($link,$sql_qa)){echo mysqli_error($link);return FALSE;}
	else
	{
		while($ar=mysqli_fetch_assoc($result))
		{
			echo '<form method=post action=download.php target=_blank>';
			//echo '<table border=1>';
			echo '<tr>';
			echo '<td>'.$ar['staff_id'].'</td>';
			echo '<td>'.$ar['movement_id'].'</td>';
			echo '<td>'.$ar['from_date'].'</td>';
			echo '<td>'.$ar['type'].'</td>';
			echo '<td>';
			echo '<input type=hidden name=table value=staff_movement_attachment>';
			echo '<input type=hidden name=filename value=attachment_filename>';
			echo '<input type=hidden name=file value=attachment>';
			$wr=base64_encode('where attachment_id=\''.$ar['attachment_id'].'\'');
			echo '<input type=hidden name=where value=\''.$wr.'\' >';
			echo '<button>download</button>';
			echo '</td>';
			echo '</tr>';
			//echo '</table>';
			echo '</form>';			
		}
	}

echo '</table>';	

?>
<?php
session_start();
require_once '../common/common.php';

//echo '<pre>';print_r($GLOBALS);echo '</pre>';

function date_diff_to_days($from,$to)
{
	//dates as yyyy-mm-dd format only
	//To    2016-03-04
	//From  2015-05-20
	//      0000-09-(N) 
	
	$exf=explode('-',$from);
	$ext=explode('-',$to);
	if(count($exf)!=3||count($ext)!=3)
	{
		return false;
	}
	
	if(in_array('00',$exf)===TRUE || in_array('0000',$exf)===TRUE)
	{
		//print_r($exf);
		return false;
	}
	
	$days_of_from_month=cal_days_in_month(CAL_GREGORIAN,$exf[1],$exf[0]);
	if($days_of_from_month===FALSE)
	{
		return FALSE;
	}
	$days=$ext[2]+($days_of_from_month-$exf[2]);
	
	
	$months=$ext[1]+12-$exf[1]-1;
	
	$years=$ext[0]-$exf[0]-1;
	
	if($days>cal_days_in_month(CAL_GREGORIAN,$exf[1],$exf[0])){$days=abs($ext[2]-$exf[2]);$months=$months+1;}
	if($months>11){$years=$years+1;$months=$months-12;}
	
	//echo "<h1>".$to." and ".$from."</h1>";
	//echo "<h1>".$years.",".$months.",".$days."</h1>";
	
	return $years." yr, ".$months." mo, ".$days." d";

}

$link=connect();
menu();

if (!isset($_POST["save_leave"]))
{
	exit();
}

//$ret=insert_field_by_id($link,"leave","application_id","","nature",$_POST["nature"]);

//staff_id is foreign key, it must be added first

$ret=insert_field_by_id($link,"leave","application_id",'',"staff_id",$_SESSION['login']);

//echo $ret;
if($ret === false)
{
	exit();
}

update_field_by_id($link,"leave","application_id",$ret,"reason",$_POST["reason"]);

update_field_by_id($link,"leave","application_id",$ret,"prefix",$_POST["prefix_date"]);

update_field_by_id($link,"leave","application_id",$ret,"postfix",$_POST["postfix_date"]);

//update_field_by_id($link,"leave","application_id",$ret,"staff_id",$_SESSION['login']);
update_field_by_id($link,"leave","application_id","","nature",$_POST["nature"]);


$from=india_to_mysql_date($_POST["from_date"]);
update_field_by_id($link,"leave","application_id",$ret,"from_date",$from);

$to=india_to_mysql_date($_POST["to_date"]);
update_field_by_id($link,"leave","application_id",$ret,"to_date",$to);

$application=india_to_mysql_date($_POST["application_date"]);
update_field_by_id($link,"leave","application_id",$ret,"application_date",$application);

$sql= "select * from `leave` where application_id=".$ret;
//echo ($sql);
$data = get_raw($link,$sql);
//print_r($data);

if($data === false)
{
	echo mysqli_error($link);
}

$staff_sql= "select * from staff where id=".$_SESSION["login"];
$staff_data= get_raw($link,$staff_sql);
 if($staff_data === false)
{
	echo mysqli_error($link);
}
 $current_appointment_sql="select * from staff_movement where staff_id=".$_SESSION["login"]." and to_date is NULL" ;
 
 $current_appointment_data=get_raw($link,$current_appointment_sql);
 //print_r($current_appointment_data);

?>


<html>
<head> 
<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;diabled:true
}

</style>


</head>
<body>
<table border=1 cellpadding=5 cellspacing=5  style="width:200mm;" align=center>
	<tr>
		<td colspan="3" ><input type="submit" name="submit" value="print"></td>
	</tr>

	 <tr><td colspan=3>	
		<table border=0 cellpadding=5 cellspacing=5  align=center  style="width:100%">
			<tr>
				<th colspan="3" align="center"> 
					<img src="logo.png" alt="Mountain View" style="width:125px;height:100px;" align="left">
				</th>
				<th>
					Application For Leave <br> <?php echo $current_appointment_data["institute"];?>
				</th>	
				<th>
					<img src="logo2.png" alt="Mountain View" style="width:125px;height:100px;" align="right">
				</th>
			</tr>
		</table>
	</td></tr>
	  <tr><td colspan="3">Notes: <br> -> Item 1 to 8 must be filled in by all applicants whether gazetted or non-gazetted. <br> -> Item 9 applies on the case of gazetted officers. <br> 
	  Application No. <?php echo $data["application_id"]; ?> </td></tr>
	  <tr><td>1.</td><td>Name of Applicant:</td><td> <?php echo $staff_data["fullname"]; ?></td></tr>
	  
  
  <tr><td>2.</td><td>Post held :</td><td> <?php echo $current_appointment_data["post"];?></td></tr>
  
  
<tr><td>3.</td><td>Department :</td> <td><?php echo $current_appointment_data["department"];?></td></tr>
  
  <tr><td>4.</td><td>Pay(Basic) :      </td><td></td></tr>
   
  <tr><td>5.</td><td>House Allowances, Conveyance allowances <br>or Other Compensotory allowance draw in the present post : </td> 
 <td></td></tr>
  
  
<tr>
	<td>6.</td>
	<td>Nature and Period of leave applied for <br> and date from leave required : </td>
	<td> <?php 
	
	$dd=date_diff_grand($data["from_date"],$data["to_date"]);
	
	echo $data["nature"].",  <br> From:".$data["from_date"].
			" <br>  To:".$data["to_date"];
			echo "<br>Total:". $dd->format('%r%a')."<br> Prefix:".$data["prefix"]."<br> postfix:".$data["postfix"];
			?></td>
</tr>
<tr>
	<td>7.</td>
	<td>Reason For Leave :</td>
	<td><?php echo $data["reason"]; ?></td>
</tr>
<tr>
	<td>8.</td>
	<td>Date of return from last leave and the nature and period of that leave : </td>
	<td></td>
</tr>
 <tr>
	  <td>9.</td>
	  <td colspan="3">I undertake to refund by deduction from my pension if nesessary the difference,if any between average pay and half average pay for the period of leave of average pay granted in exexess if. I retire from Government service at the<br> end of this leave on or an extension of it. </td>
</tr>
<tr>
	<td> </td>
	<td valign="top"> Date of Application.: <?php echo $data["application_date"];?></td>
	<td>Signature of Applicant <br>  <br>  <br> <br> <br></td>
</tr>
<tr>
	<td>10.</td>
	<td>Remarks or Recommendation of the controlling officer : </td>
	<td> <br>  <br>  <br> <br> <br></td>
</tr>

<tr>
	<td>11.</td>
	<td>Report of the Audit Officer:</td>
	<td> <br>  <br>  <br> <br> <br></td>
</tr>
 
 

</table>
</body>
</html>








<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Date Picker Example</title> 

<link rel="stylesheet" type="text/css" href="datepicker.css" /> 
<script type="text/javascript" src="datepicker.js"></script> 
<script type="text/javascript" src="timepicker.js"></script> 

<style>
  input {
    font-family:monospace;
  }
</style>
</head> 
<body> 

  <h1>Date Picker Example</h1> 
  
  <p>Start Date / Time:<br /> 
    <input id="start_dt" class='datepicker' size='11' title='D-MMM-YYYY' /> 
    <input id="start_tm" class='timepicker' size='5'  title='HH:MM' /> 
  </p> 
  
  <p>End Date:<br /> 
    <input id="end_dt" class='datepicker' size='11' title='D-MMM-YYYY' /> 
    <input id="end_tm" class='timepicker' size='5'  title='HH:MM' /> 
  </p> 
 
  <h2>How to use these pickers in your app:</h2>
  
  <p>Put the following 2 or 3 lines in your page's &lt;head&gt; section:</p>
  <pre>&lt;link rel="stylesheet" type="text/css" href="datepicker.css" /&gt; 
&lt;script type="text/javascript" src="datepicker.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="timepicker.js"&gt;&lt;/script&gt;</pre>
  
  <p>On any &lt;input&gt; that you want to have a date picker for, set/add the 'datepicker' class:</p>
  <pre>&lt;input id='start_dt' class='datepicker'&gt;
&lt;input id='another_dt' class='myclass datepicker'&gt;</pre>

  <p>On any &lt;input&gt; that you want to have a time picker for, set/add the 'timepicker' class:</p>
  <pre>&lt;input id='start_dt' class='timepicker'&gt;
&lt;input id='another_dt' class='myclass timepicker'&gt;</pre>

  <p>I hope you enjoy these pickers as much as I enjoyed getting it working cross-browser :)</p>
  
</body> 
</html> .datepickerdropdown {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD6CAIAAADvIroEAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAIhJREFUOE99w4cRgDAQBLHtvzKyyWByhjKo4E8z4vs+3vc1P8+Det836nVdqOd5oh7HgXXfd9Rt21DXdUVdlgV1nmes0zShjuOIOgwDqvcete97rF3XobZti9o0DWpd16hVVaGWZYm1KArUPM9RnXOoWZahpmmKNUkS1DiOUaMoQg3DEDUIAow/RjJ3qB92TU4AAAAASUVORK5CYII=);
  border:1px solid #888;
  border-radius:5px;
  padding:10px;
  position:absolute;
  text-align:center;
}
.datepickerdropdown table {
  border-collapse:collapse;
  margin:auto;
}
.datepickerdropdown input {
  font-family:monospace;
  border:1px solid #888;
  border-radius:3px;
  margin:1px;
  padding:2px 5px;
  text-align:center;
}
.datepickerdropdown table input[type=button] {
  width:2em;
}
.datepickerdropdown input[type=button] {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAElJREFUGFeNwwEGACEQQNF//6MlSRSRSMMkY86wdk+wj4e78zaz772Xcw6qioiw92atxZyTMQa9d1pr1FoppZBzJqVEjJEQwt8PXeRLuM/peRgAAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=button]:hover {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFpJREFUGFdjePfuAgMIv3lzCoxfvTrK8OLFAYbnz/cyPHmyleHx480MDx+uY7h3bxnDnTsLGW7enMVw7dpkhqtXJzJcutTFcOFCG8O5c00MZ87UMZw6VUksBgDwaURPl4Jv2AAAAABJRU5ErkJggg==);
}
.datepickerdropdown input[type=button]:active {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFhJREFUGFdjOHWqkuHMmTqGc+eaGC5caGO4dKmL4erViQzXrk1muHlzFsOdOwsZ7t1bxvDw4TqGx483Mzx5spXh+fO9DC9eHGB49eoow5s3p8D43bsLpGAAr0NKhZpZNgcAAAAASUVORK5CYII=);
  padding:2px 4px 2px 6px;
}      
.datepickerdropdown input.selected {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAEBJREFUGFdj+P//P8P//5+A+CkQXwfiU0C8B4jXA/EiIJ4CxO1AXAnEOUAcB8SBQOwCxGZArAnE0kDMB8QMxGIAwnRFxCnPkL8AAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=text] {
  background:#fff;
  color:#000;
}
.datepickerdropdown input.today {
  border:1px solid red;
}
.datepickerdropdown input.othermonth {
  color:#aaa;
  border:1px solid #bbb;
}
.datepickershow img {
  border:1;
}
// Returns true if a string is an integer
function isInteger(s) {
  for (i = 0; i < s.length; i++) {
    var c = s.charAt(i);
    if (c<"0" || c>"9") return false;
  }
  return true;
}

// Make the time into a nice format as they type eg HHMM goes to HH:MM
function timePickerKeyup(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
  if (!e) var e = window.event;
  if (e.target) targ = e.target;
  else if (e.srcElement) targ = e.srcElement;
  if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  if (targ.value.length==4 && isInteger(targ.value)) {
    targ.value = targ.value.substr(0,2) + ':' + targ.value.substr(2,2);
  }
}

// Gets called if they tab out of a time picker, to neaten it up
function timePickerBlur(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
  if (!e) var e = window.event;
  if (e.target) targ = e.target;
  else if (e.srcElement) targ = e.srcElement;
  if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug
  
  if (targ.value.length==1 && isInteger(targ.value)) {
    targ.value = '0' + targ.value + ':00';
  }
  if (targ.value.length==2 && isInteger(targ.value)) {
    targ.value = targ.value + ':00';
  }
  if (targ.value.length==3 && isInteger(targ.value)) {
    targ.value = '0' + targ.value.substr(0,1) + ':' + targ.value.substr(1,2);
  }
  if (targ.value.length==4 && isInteger(targ.value)) {
    targ.value = targ.value.substr(0,2) + ':' + targ.value.substr(2,2);
  }
}

// This is called when the page loads, it searches for inputs where the class is 'timepicker'
function timePickerInit() {
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='timepicker' || className.indexOf('timepicker ') != -1 || className.indexOf(' timepicker') != -1) {
      allElements[i].onkeyup = timePickerKeyup;
      allElements[i].onblur = timePickerBlur;
    }
  }
}

// Hook myself into the page load event
if (window.addEventListener) { // W3C standard
  window.addEventListener('load', timePickerInit, false);
} else if (window.attachEvent) { // Microsoft
  window.attachEvent('onload', timePickerInit);
}
.datepickerdropdown {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD6CAIAAADvIroEAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAIhJREFUOE99w4cRgDAQBLHtvzKyyWByhjKo4E8z4vs+3vc1P8+Det836nVdqOd5oh7HgXXfd9Rt21DXdUVdlgV1nmes0zShjuOIOgwDqvcete97rF3XobZti9o0DWpd16hVVaGWZYm1KArUPM9RnXOoWZahpmmKNUkS1DiOUaMoQg3DEDUIAow/RjJ3qB92TU4AAAAASUVORK5CYII=);
  border:1px solid #888;
  border-radius:5px;
  padding:10px;
  position:absolute;
  text-align:center;
}
.datepickerdropdown table {
  border-collapse:collapse;
  margin:auto;
}
.datepickerdropdown input {
  font-family:monospace;
  border:1px solid #888;
  border-radius:3px;
  margin:1px;
  padding:2px 5px;
  text-align:center;
}
.datepickerdropdown table input[type=button] {
  width:2em;
}
.datepickerdropdown input[type=button] {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAElJREFUGFeNwwEGACEQQNF//6MlSRSRSMMkY86wdk+wj4e78zaz772Xcw6qioiw92atxZyTMQa9d1pr1FoppZBzJqVEjJEQwt8PXeRLuM/peRgAAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=button]:hover {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFpJREFUGFdjePfuAgMIv3lzCoxfvTrK8OLFAYbnz/cyPHmyleHx480MDx+uY7h3bxnDnTsLGW7enMVw7dpkhqtXJzJcutTFcOFCG8O5c00MZ87UMZw6VUksBgDwaURPl4Jv2AAAAABJRU5ErkJggg==);
}
.datepickerdropdown input[type=button]:active {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFhJREFUGFdjOHWqkuHMmTqGc+eaGC5caGO4dKmL4erViQzXrk1muHlzFsOdOwsZ7t1bxvDw4TqGx483Mzx5spXh+fO9DC9eHGB49eoow5s3p8D43bsLpGAAr0NKhZpZNgcAAAAASUVORK5CYII=);
  padding:2px 4px 2px 6px;
}      
.datepickerdropdown input.selected {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAEBJREFUGFdj+P//P8P//5+A+CkQXwfiU0C8B4jXA/EiIJ4CxO1AXAnEOUAcB8SBQOwCxGZArAnE0kDMB8QMxGIAwnRFxCnPkL8AAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=text] {
  background:#fff;
  color:#000;
}
.datepickerdropdown input.today {
  border:1px solid red;
}
.datepickerdropdown input.othermonth {
  color:#aaa;
  border:1px solid #bbb;
}
.datepickershow img {
  border:1;
}
// Converts a date into '12-Oct-1984' format
//function getDateString(dt) {
//  return dt.getDate() + '-' + 
//    ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()] + 
//    '-' + dt.getFullYear();
//}

//function getDateString(dt) {
//  return dt.getFullYear() + '-' + 
//    ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] + 
//    '-' + ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1];
//}

function getDateString(dt) {
  return	['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1]
+ '-' + 	['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()]
+ '-' +		[dt.getFullYear()]
}

// Converts a date into 'July 2010' format
function getMonthYearString(dt) {
  return ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] +
         ' ' + dt.getFullYear();
}

// This is the function called when the user clicks any button
function chooseDate(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
	if (!e) var e = window.event;
	if (e.target) targ = e.target;
	else if (e.srcElement) targ = e.srcElement;
	if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  var div = targ.parentNode.parentNode.parentNode.parentNode.parentNode; // Find the div
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  if (targ.value=='<' || targ.value=='>'|| targ.value=='<<' || targ.value=='>>' || targ.value=='>>>' || targ.value=='<<<') {// Do they want the change the month?
    createCalendar(div, new Date(targ.getAttribute('date')));
    return;
  }
  textbox.value = targ.getAttribute('date'); // Set the selected date
  div.parentNode.removeChild(div); // Remove the dropdown box now
}

// Parse a date in d-MMM-yyyy format, but altered by SMP for dd-mm-yyyy
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  
  if (a.length!=3) return new Date(d); // Missing 2 dashes

  return new Date(a[2],a[1]-1,a[0],0,0,0,0);
}

/*
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  if (a.length!=3) return new Date(d); // Missing 2 dashes
  var m = -1; // Now find the month
  if (a[1]=='Jan') m=0;
  if (a[1]=='Feb') m=1;
  if (a[1]=='Mar') m=2;
  if (a[1]=='Apr') m=3;
  if (a[1]=='May') m=4;
  if (a[1]=='Jun') m=5;
  if (a[1]=='Jul') m=6;
  if (a[1]=='Aug') m=7;
  if (a[1]=='Sep') m=8;
  if (a[1]=='Oct') m=9;
  if (a[1]=='Nov') m=10;
  if (a[1]=='Dec') m=11;
  if (m<0) return new Date(d); // Couldn't find the month
  return new Date(a[2],m,a[0],0,0,0,0);
  //return new Date(a[2],m,a[0],0,0,0,0);
}
*/

// This creates the calendar for a given month
function createCalendar(div, month) {
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  var tbl = document.createElement('table');
  
  var topRow = tbl.insertRow(-1);
  
  var td = topRow.insertCell(-1);
  var lastTYearBn = document.createElement('input');
  lastTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastTYearBn);
  lastTYearBn.value='<<<';
  lastTYearBn.onclick=chooseDate;
  lastTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-120,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastYearBn = document.createElement('input');
  lastYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastYearBn);
  lastYearBn.value='<<';
  lastYearBn.onclick=chooseDate;
  lastYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-12,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastMonthBn = document.createElement('input');
  lastMonthBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastMonthBn);
  lastMonthBn.value='<';
  lastMonthBn.onclick=chooseDate;
  lastMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-1,1,0,0,0,0).toString());
   
  var td = topRow.insertCell(-1);
  td.colSpan=4;
  var mon = document.createElement('input');
  mon.type='text';
  td.appendChild(mon);
  mon.value = getMonthYearString(month);
  mon.size=7;
  mon.disabled='disabled';
  
  //var td = topRow.insertCell(-1);
  var nextMonthBn = document.createElement('input');
  nextMonthBn.type='button';
  td.appendChild(nextMonthBn);
  nextMonthBn.value = '>';
  nextMonthBn.onclick=chooseDate;
  nextMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+1,1,0,0,0,0).toString());
 
 
  //var td = topRow.insertCell(-1);
  var nextYearBn = document.createElement('input');
  nextYearBn.type='button';
  td.appendChild(nextYearBn);
  nextYearBn.value = '>>';
  nextYearBn.onclick=chooseDate;
  nextYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+12,1,0,0,0,0).toString());
  
 
  var td = topRow.insertCell(-1);
  var nextTYearBn = document.createElement('input');
  nextTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(nextTYearBn);
  nextTYearBn.value='>>>';
  nextTYearBn.onclick=chooseDate;
  nextTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+120,1,0,0,0,0).toString());
   
  var daysRow = tbl.insertRow(-1);
  daysRow.insertCell(-1).innerHTML="Mon";
  daysRow.insertCell(-1).innerHTML="Tue";
  daysRow.insertCell(-1).innerHTML="Wed";
  daysRow.insertCell(-1).innerHTML="Thu";
  daysRow.insertCell(-1).innerHTML="Fri";
  daysRow.insertCell(-1).innerHTML="Sat";
  daysRow.insertCell(-1).innerHTML="Sun";
  
  // Make the calendar
  var selected = parseMyDate(textbox.value); // Try parsing the date
  var today = new Date();
  date = new Date(month.getFullYear(),month.getMonth(),1,0,0,0,0); // Starting at the 1st of the month
  var extras = (date.getDay() + 6) % 7; // How many days of the last month do we need to include?
  date.setDate(date.getDate()-extras); // Skip back to the previous monday
  while (1) { // Loop for each week
    var tr = tbl.insertRow(-1);
    for (i=0;i<7;i++) { // Loop each day of this week
      var td = tr.insertCell(-1);
      var inp = document.createElement('input');
      inp.type = 'button';
      td.appendChild(inp);
      inp.value = date.getDate();
      inp.onclick = chooseDate;
      inp.setAttribute('date',getDateString(date));
      if (date.getMonth() != month.getMonth()) {
        if (inp.className) inp.className += ' ';
        inp.className+='othermonth';
      }
      if (date.getDate()==today.getDate() && date.getMonth()==today.getMonth() && date.getFullYear()==today.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='today';
      }
      if (!isNaN(selected) && date.getDate()==selected.getDate() && date.getMonth()==selected.getMonth() && date.getFullYear()==selected.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='selected';
      }
      date.setDate(date.getDate()+1); // Increment a day
    }
    // We are done if we've moved on to the next month
    if (date.getMonth() != month.getMonth()) {
      break;
    }
  }
  
  // At the end, we do a quick insert of the newly made table, hopefully to remove any chance of screen flicker
  if (div.hasChildNodes()) { // For flicking between months
    div.replaceChild(tbl, div.childNodes[0]);
  } else { // For creating the calendar when they first click the icon
    div.appendChild(tbl);
  }
}

// This is called when they click the icon next to the date inputbox
function showDatePicker(idOfTextbox) {
  var textbox = document.getElementById(idOfTextbox);
  
  // See if the date picker is already there, if so, remove it
  x = textbox.parentNode.getElementsByTagName('div');
  for (i=0;i<x.length;i++) {
    if (x[i].getAttribute('class')=='datepickerdropdown') {
      textbox.parentNode.removeChild(x[i]);
      return false;
    }
  }

  // Grab the date, or use the current date if not valid
  var date = parseMyDate(textbox.value);
  if (isNaN(date)) date = new Date();

  // Create the box
  var div = document.createElement('div');
  div.className='datepickerdropdown';
  div.setAttribute('datepickertextbox', idOfTextbox); // Remember the textbox id in the div
  createCalendar(div, date); // Create the calendar
  insertAfter(div, textbox); // Add the box to screen just after the textbox
  return false;
}

// Adds an item after an existing one
function insertAfter(newItem, existingItem) {
  if (existingItem.nextSibling) { // Find the next sibling, and add newItem before it
    existingItem.parentNode.insertBefore(newItem, existingItem.nextSibling); 
  } else { // In case the existingItem has no sibling after itself, append it
    existingItem.parentNode.appendChild(newItem);
  }
}

/*
 * onDOMReady
 * Copyright (c) 2009 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
function onDOMReady(fn,ctx){var ready,timer;var onStateChange=function(e){if(e&&e.type=="DOMContentLoaded"){fireDOMReady()}else if(e&&e.type=="load"){fireDOMReady()}else if(document.readyState){if((/loaded|complete/).test(document.readyState)){fireDOMReady()}else if(!!document.documentElement.doScroll){try{ready||document.documentElement.doScroll('left')}catch(e){return}fireDOMReady()}}};var fireDOMReady=function(){if(!ready){ready=true;fn.call(ctx||window);if(document.removeEventListener)document.removeEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=null;window.onload=null;clearInterval(timer);timer=null}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=onStateChange;timer=setInterval(onStateChange,5);window.onload=onStateChange};

// This is called when the page loads, it searches for inputs where the class is 'datepicker'
onDOMReady(function(){
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      // Found one! Now lets add a datepicker next to it  
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + allElements[i].id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, allElements[i]);
    }
  }
});
// Converts a date into '12-Oct-1984' format
//function getDateString(dt) {
//  return dt.getDate() + '-' + 
//    ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()] + 
//    '-' + dt.getFullYear();
//}

//function getDateString(dt) {
//  return dt.getFullYear() + '-' + 
//    ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] + 
//    '-' + ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1];
//}

function getDateString(dt) {
  return	['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1]
+ '-' + 	['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()]
+ '-' +		[dt.getFullYear()]
}

// Converts a date into 'July 2010' format
function getMonthYearString(dt) {
  return ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] +
         ' ' + dt.getFullYear();
}

// This is the function called when the user clicks any button
function chooseDate(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
	if (!e) var e = window.event;
	if (e.target) targ = e.target;
	else if (e.srcElement) targ = e.srcElement;
	if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  var div = targ.parentNode.parentNode.parentNode.parentNode.parentNode; // Find the div
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  if (targ.value=='<' || targ.value=='>'|| targ.value=='<<' || targ.value=='>>' || targ.value=='>>>' || targ.value=='<<<') {// Do they want the change the month?
    createCalendar(div, new Date(targ.getAttribute('date')));
    return;
  }
  textbox.value = targ.getAttribute('date'); // Set the selected date
  div.parentNode.removeChild(div); // Remove the dropdown box now
}

// Parse a date in d-MMM-yyyy format, but altered by SMP for dd-mm-yyyy
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  
  if (a.length!=3) return new Date(d); // Missing 2 dashes

  return new Date(a[2],a[1]-1,a[0],0,0,0,0);
}

/*
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  if (a.length!=3) return new Date(d); // Missing 2 dashes
  var m = -1; // Now find the month
  if (a[1]=='Jan') m=0;
  if (a[1]=='Feb') m=1;
  if (a[1]=='Mar') m=2;
  if (a[1]=='Apr') m=3;
  if (a[1]=='May') m=4;
  if (a[1]=='Jun') m=5;
  if (a[1]=='Jul') m=6;
  if (a[1]=='Aug') m=7;
  if (a[1]=='Sep') m=8;
  if (a[1]=='Oct') m=9;
  if (a[1]=='Nov') m=10;
  if (a[1]=='Dec') m=11;
  if (m<0) return new Date(d); // Couldn't find the month
  return new Date(a[2],m,a[0],0,0,0,0);
  //return new Date(a[2],m,a[0],0,0,0,0);
}
*/

// This creates the calendar for a given month
function createCalendar(div, month) {
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  var tbl = document.createElement('table');
  
  var topRow = tbl.insertRow(-1);
  
  var td = topRow.insertCell(-1);
  var lastTYearBn = document.createElement('input');
  lastTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastTYearBn);
  lastTYearBn.value='<<<';
  lastTYearBn.onclick=chooseDate;
  lastTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-120,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastYearBn = document.createElement('input');
  lastYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastYearBn);
  lastYearBn.value='<<';
  lastYearBn.onclick=chooseDate;
  lastYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-12,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastMonthBn = document.createElement('input');
  lastMonthBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastMonthBn);
  lastMonthBn.value='<';
  lastMonthBn.onclick=chooseDate;
  lastMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-1,1,0,0,0,0).toString());
   
  var td = topRow.insertCell(-1);
  td.colSpan=4;
  var mon = document.createElement('input');
  mon.type='text';
  td.appendChild(mon);
  mon.value = getMonthYearString(month);
  mon.size=7;
  mon.disabled='disabled';
  
  //var td = topRow.insertCell(-1);
  var nextMonthBn = document.createElement('input');
  nextMonthBn.type='button';
  td.appendChild(nextMonthBn);
  nextMonthBn.value = '>';
  nextMonthBn.onclick=chooseDate;
  nextMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+1,1,0,0,0,0).toString());
 
 
  //var td = topRow.insertCell(-1);
  var nextYearBn = document.createElement('input');
  nextYearBn.type='button';
  td.appendChild(nextYearBn);
  nextYearBn.value = '>>';
  nextYearBn.onclick=chooseDate;
  nextYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+12,1,0,0,0,0).toString());
  
 
  var td = topRow.insertCell(-1);
  var nextTYearBn = document.createElement('input');
  nextTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(nextTYearBn);
  nextTYearBn.value='>>>';
  nextTYearBn.onclick=chooseDate;
  nextTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+120,1,0,0,0,0).toString());
   
  var daysRow = tbl.insertRow(-1);
  daysRow.insertCell(-1).innerHTML="Mon";
  daysRow.insertCell(-1).innerHTML="Tue";
  daysRow.insertCell(-1).innerHTML="Wed";
  daysRow.insertCell(-1).innerHTML="Thu";
  daysRow.insertCell(-1).innerHTML="Fri";
  daysRow.insertCell(-1).innerHTML="Sat";
  daysRow.insertCell(-1).innerHTML="Sun";
  
  // Make the calendar
  var selected = parseMyDate(textbox.value); // Try parsing the date
  var today = new Date();
  date = new Date(month.getFullYear(),month.getMonth(),1,0,0,0,0); // Starting at the 1st of the month
  var extras = (date.getDay() + 6) % 7; // How many days of the last month do we need to include?
  date.setDate(date.getDate()-extras); // Skip back to the previous monday
  while (1) { // Loop for each week
    var tr = tbl.insertRow(-1);
    for (i=0;i<7;i++) { // Loop each day of this week
      var td = tr.insertCell(-1);
      var inp = document.createElement('input');
      inp.type = 'button';
      td.appendChild(inp);
      inp.value = date.getDate();
      inp.onclick = chooseDate;
      inp.setAttribute('date',getDateString(date));
      if (date.getMonth() != month.getMonth()) {
        if (inp.className) inp.className += ' ';
        inp.className+='othermonth';
      }
      if (date.getDate()==today.getDate() && date.getMonth()==today.getMonth() && date.getFullYear()==today.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='today';
      }
      if (!isNaN(selected) && date.getDate()==selected.getDate() && date.getMonth()==selected.getMonth() && date.getFullYear()==selected.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='selected';
      }
      date.setDate(date.getDate()+1); // Increment a day
    }
    // We are done if we've moved on to the next month
    if (date.getMonth() != month.getMonth()) {
      break;
    }
  }
  
  // At the end, we do a quick insert of the newly made table, hopefully to remove any chance of screen flicker
  if (div.hasChildNodes()) { // For flicking between months
    div.replaceChild(tbl, div.childNodes[0]);
  } else { // For creating the calendar when they first click the icon
    div.appendChild(tbl);
  }
}

// This is called when they click the icon next to the date inputbox
function showDatePicker(idOfTextbox) {
  var textbox = document.getElementById(idOfTextbox);
  
  // See if the date picker is already there, if so, remove it
  x = textbox.parentNode.getElementsByTagName('div');
  for (i=0;i<x.length;i++) {
    if (x[i].getAttribute('class')=='datepickerdropdown') {
      textbox.parentNode.removeChild(x[i]);
      return false;
    }
  }

  // Grab the date, or use the current date if not valid
  var date = parseMyDate(textbox.value);
  if (isNaN(date)) date = new Date();

  // Create the box
  var div = document.createElement('div');
  div.className='datepickerdropdown';
  div.setAttribute('datepickertextbox', idOfTextbox); // Remember the textbox id in the div
  createCalendar(div, date); // Create the calendar
  insertAfter(div, textbox); // Add the box to screen just after the textbox
  return false;
}

// Adds an item after an existing one
function insertAfter(newItem, existingItem) {
  if (existingItem.nextSibling) { // Find the next sibling, and add newItem before it
    existingItem.parentNode.insertBefore(newItem, existingItem.nextSibling); 
  } else { // In case the existingItem has no sibling after itself, append it
    existingItem.parentNode.appendChild(newItem);
  }
}



/*
 * onDOMReady
 * Copyright (c) 2009 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
function onDOMReady(fn,ctx){var ready,timer;var onStateChange=function(e){if(e&&e.type=="DOMContentLoaded"){fireDOMReady()}else if(e&&e.type=="load"){fireDOMReady()}else if(document.readyState){if((/loaded|complete/).test(document.readyState)){fireDOMReady()}else if(!!document.documentElement.doScroll){try{ready||document.documentElement.doScroll('left')}catch(e){return}fireDOMReady()}}};var fireDOMReady=function(){if(!ready){ready=true;fn.call(ctx||window);if(document.removeEventListener)document.removeEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=null;window.onload=null;clearInterval(timer);timer=null}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=onStateChange;timer=setInterval(onStateChange,5);window.onload=onStateChange};

// This is called when the page loads, it searches for inputs where the class is 'datepicker'
onDOMReady(function(){
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      // Found one! Now lets add a datepicker next to it  
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + allElements[i].id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, allElements[i]);
    }
  }
});




 
  
// Converts a date into '12-Oct-1984' format
function getDateString(dt) {
  return dt.getDate() + '-' + 
    ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()] + 
    '-' + dt.getFullYear();
}

// Converts a date into 'July 2010' format
function getMonthYearString(dt) {
  return ['January','February','March','April','May','June','July',
          'August','September','October','November','December'][dt.getMonth()] +
         ' ' + dt.getFullYear();
}

// This is the function called when the user clicks any button
function chooseDate(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
	if (!e) var e = window.event;
	if (e.target) targ = e.target;
	else if (e.srcElement) targ = e.srcElement;
	if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  var div = targ.parentNode.parentNode.parentNode.parentNode.parentNode; // Find the div
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  if (targ.value=='<' || targ.value=='>') { // Do they want the change the month?
    createCalendar(div, new Date(targ.getAttribute('date')));
    return;
  }
  textbox.value = targ.getAttribute('date'); // Set the selected date
  div.parentNode.removeChild(div); // Remove the dropdown box now
}

// Parse a date in d-MMM-yyyy format
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  if (a.length!=3) return new Date(d); // Missing 2 dashes
  var m = -1; // Now find the month
  if (a[1]=='Jan') m=0;
  if (a[1]=='Feb') m=1;
  if (a[1]=='Mar') m=2;
  if (a[1]=='Apr') m=3;
  if (a[1]=='May') m=4;
  if (a[1]=='Jun') m=5;
  if (a[1]=='Jul') m=6;
  if (a[1]=='Aug') m=7;
  if (a[1]=='Sep') m=8;
  if (a[1]=='Oct') m=9;
  if (a[1]=='Nov') m=10;
  if (a[1]=='Dec') m=11;
  if (m<0) return new Date(d); // Couldn't find the month
  return new Date(a[2],m,a[0],0,0,0,0);
}

// This creates the calendar for a given month
function createCalendar(div, month) {
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  var tbl = document.createElement('table');
  var topRow = tbl.insertRow(-1);
  var td = topRow.insertCell(-1);
  var lastMonthBn = document.createElement('input');
  lastMonthBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastMonthBn);
  lastMonthBn.value='<';
  lastMonthBn.onclick=chooseDate;
  lastMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-1,1,0,0,0,0).toString());
  var td = topRow.insertCell(-1);
  td.colSpan=5;
  var mon = document.createElement('input');
  mon.type='text';
  td.appendChild(mon);
  mon.value = getMonthYearString(month);
  mon.size=15;
  mon.disabled='disabled';
  var td = topRow.insertCell(-1);
  var nextMonthBn = document.createElement('input');
  nextMonthBn.type='button';
  td.appendChild(nextMonthBn);
  nextMonthBn.value = '>';
  nextMonthBn.onclick=chooseDate;
  nextMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+1,1,0,0,0,0).toString());
  var daysRow = tbl.insertRow(-1);
  daysRow.insertCell(-1).innerHTML="Mon";
  daysRow.insertCell(-1).innerHTML="Tue";
  daysRow.insertCell(-1).innerHTML="Wed";
  daysRow.insertCell(-1).innerHTML="Thu";
  daysRow.insertCell(-1).innerHTML="Fri";
  daysRow.insertCell(-1).innerHTML="Sat";
  daysRow.insertCell(-1).innerHTML="Sun";
  
  // Make the calendar
  var selected = parseMyDate(textbox.value); // Try parsing the date
  var today = new Date();
  date = new Date(month.getFullYear(),month.getMonth(),1,0,0,0,0); // Starting at the 1st of the month
  var extras = (date.getDay() + 6) % 7; // How many days of the last month do we need to include?
  date.setDate(date.getDate()-extras); // Skip back to the previous monday
  while (1) { // Loop for each week
    var tr = tbl.insertRow(-1);
    for (i=0;i<7;i++) { // Loop each day of this week
      var td = tr.insertCell(-1);
      var inp = document.createElement('input');
      inp.type = 'button';
      td.appendChild(inp);
      inp.value = date.getDate();
      inp.onclick = chooseDate;
      inp.setAttribute('date',getDateString(date));
      if (date.getMonth() != month.getMonth()) {
        if (inp.className) inp.className += ' ';
        inp.className+='othermonth';
      }
      if (date.getDate()==today.getDate() && date.getMonth()==today.getMonth() && date.getFullYear()==today.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='today';
      }
      if (!isNaN(selected) && date.getDate()==selected.getDate() && date.getMonth()==selected.getMonth() && date.getFullYear()==selected.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='selected';
      }
      date.setDate(date.getDate()+1); // Increment a day
    }
    // We are done if we've moved on to the next month
    if (date.getMonth() != month.getMonth()) {
      break;
    }
  }
  
  // At the end, we do a quick insert of the newly made table, hopefully to remove any chance of screen flicker
  if (div.hasChildNodes()) { // For flicking between months
    div.replaceChild(tbl, div.childNodes[0]);
  } else { // For creating the calendar when they first click the icon
    div.appendChild(tbl);
  }
}

// This is called when they click the icon next to the date inputbox
function showDatePicker(idOfTextbox) {
  var textbox = document.getElementById(idOfTextbox);
  
  // See if the date picker is already there, if so, remove it
  x = textbox.parentNode.getElementsByTagName('div');
  for (i=0;i<x.length;i++) {
    if (x[i].getAttribute('class')=='datepickerdropdown') {
      textbox.parentNode.removeChild(x[i]);
      return false;
    }
  }

  // Grab the date, or use the current date if not valid
  var date = parseMyDate(textbox.value);
  if (isNaN(date)) date = new Date();

  // Create the box
  var div = document.createElement('div');
  div.className='datepickerdropdown';
  div.setAttribute('datepickertextbox', idOfTextbox); // Remember the textbox id in the div
  createCalendar(div, date); // Create the calendar
  insertAfter(div, textbox); // Add the box to screen just after the textbox
  return false;
}

// Adds an item after an existing one
function insertAfter(newItem, existingItem) {
  if (existingItem.nextSibling) { // Find the next sibling, and add newItem before it
    existingItem.parentNode.insertBefore(newItem, existingItem.nextSibling); 
  } else { // In case the existingItem has no sibling after itself, append it
    existingItem.parentNode.appendChild(newItem);
  }
}

/*
 * onDOMReady
 * Copyright (c) 2009 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
function onDOMReady(fn,ctx){var ready,timer;var onStateChange=function(e){if(e&&e.type=="DOMContentLoaded"){fireDOMReady()}else if(e&&e.type=="load"){fireDOMReady()}else if(document.readyState){if((/loaded|complete/).test(document.readyState)){fireDOMReady()}else if(!!document.documentElement.doScroll){try{ready||document.documentElement.doScroll('left')}catch(e){return}fireDOMReady()}}};var fireDOMReady=function(){if(!ready){ready=true;fn.call(ctx||window);if(document.removeEventListener)document.removeEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=null;window.onload=null;clearInterval(timer);timer=null}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=onStateChange;timer=setInterval(onStateChange,5);window.onload=onStateChange};

// This is called when the page loads, it searches for inputs where the class is 'datepicker'
onDOMReady(function(){
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      // Found one! Now lets add a datepicker next to it  
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + allElements[i].id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, allElements[i]);
    }
  }
});
<?php
session_start();
require_once '../common/common.php';
//echo "<pre>";
//print_r($GLOBALS);
//echo "</pre>";
connect();


menu();

$link=connect();

$staff_sql= "select * from staff where id=".$_SESSION["login"];
$staff_data= get_raw($link,$staff_sql);
 if($staff_data === false)
{
	echo mysqli_error($link);
}
 $current_appointment_sql="select * from staff_movement where staff_id=".$_SESSION["login"]." and to_date is NULL" ;
 
 $current_appointment_data=get_raw($link,$current_appointment_sql);
?>

<!DOCTYPE HTML>
  
<html>
<head>
	<script type="text/javascript" src="date/datepicker.js"></script>
<script src="jquery-3.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="date/datepicker.css" />
	
	
	<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;diabled:true
}

</style>
	<Script> 
		er=0;
function load_datepicker_dynamically(idd)
{ 
  targett = document.getElementById(idd);
    var className = targett.className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + targett.id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, targett);
    }
}

function toDate(selector) {
    var from = $(selector).val().split("-");
    return new Date(from[2], from[1], from[0]);
}
	
<!-- jquery , require its library -->
function get_date_diff(from,to, target)
{
	var start = toDate(from);
	var end =   toDate(to);

	// end - start returns difference in milliseconds 
	var diff = new Date(end - start);

	// get days
	var year = Math.floor(diff/1000/60/60/24/365);
	var month = Math.floor(((diff/1000/60/60/24)%365)/30);
	$(target).val(year+" yr,"+month+" mo");
}


</script> 
</head>
<body>  



<form method="post" action="save_leave.php">  
  <table border=1 cellpadding=5 cellspacing=5  align=center>
	 <tr><td colspan=3>	
		<table border=0 cellpadding=5 cellspacing=5  align=center  style="width:100%">
			<tr>
				<th colspan="3" align="center"> 
					<img src="logo.png" alt="Mountain View" style="width:125px;height:100px;" align="left">
				</th>
				<th>
					Application For Leave <br> Government Medical College, Surat.
				</th>	
				<th>
					<img src="logo2.png" alt="Mountain View" style="width:125px;height:100px;" align="right">
				</th>
			</tr>
		</table>
	</td></tr>
	  <tr>
		  <td colspan="3">Notes: <br> -> Item 1 to 8 must be filled in by all applicants whether gazetted or non-gazetted. <br> -> Item 9 applies on the case of gazetted officers. 
		  </td>
		  <!--
		  <td>
		  Application No. <input type="text" readonly id="application_id" name="application_id" placeholder="System Generated"> </td>-->
		  
		</tr>
	  <tr><td>1.</td><td>Name of Applicant:</td><td> <?php echo $staff_data["fullname"]; ?></td></tr>
	  
  
<tr>
	  <td>2.</td>
	  <td>Post held : </td>
	  <td><?php echo $current_appointment_data["post"];?></td>
</tr>
  
  
<tr>
	<td>3.</td>
	<td>Department.</td>
	<td><?php echo $current_appointment_data["department"];?></td>
</tr>
  
<!-- 
<tr>
	<td>4.</td>
	<td>Pay(Basic) : </td>
	<td><input type="text" name="pay" id="pay"></td>
</tr>
  
  
<tr>
	<td>5.</td>
	<td>House Allowances, Conveyance allowances <br>or Other Compensotory allowance draw in the present post : </td>
	 <td><input type="text" name="allowances" id="allowances"></td>
</tr>
 --> 
  
  
<tr>
	<td>6.</td>
	<td>Nature and Period of leave applied for <br> and date from leave required : </td>
	
	
    <td>
		<table>
			<tr>
				<td colspan=5>
					<select name="nature" id="nature">
					  <option>Earned Leave</option>
					  <option>Leave Without Pay</option>
					  <option>Maternity Leave</option>
					  <option>Half pay Leave</option>
					  <option>Commuted Leave</option>
					</select>
				</td>
			</tr>
			<tr><td>  
					From:</td><td><input readonly	id=startdate class="datepicker" size="10" name=from_date>
				</td>
				<td>
					To :</td><td><input readonly	id=enddate class="datepicker" size="10" name=to_date>
				</td>
			</tr>
			<tr>
				<td> 
					Prefix Date: </td><td><input size=10 type="text" id=prefix_date name="prefix_date"> 
		   		</td>
				<td>
					Postfix Date:</td><td><input size=10 type="text" id=postfix_date name="postfix_date"> 
		   		</td>
			</tr>
	</table>
   </td>
</tr>
  
<tr>
	  <td>7.</td>
	  <td>Reason For Leave :</td>
	  <td><input type="text" name="reason" id="reason_leave" size="30"></td>
</tr>

<!--
<tr>
	<td>8.</td>
	<td>Date of return from last leave and the nature and period of that leave : </td>
	<td><textarea placeholder="Describe last levae nature and date" name="lastleave" name="lastleave"cols="30" rows="3"></textarea></td>
</tr>

<tr>
	<td>9.</td>
	<td colspan="3">I undertake to refund by deduction from my pension if nesessary the difference,if any between average pay<br> and half average pay for the period of leave of average pay granted in exexess if. I retire from Government service at the<br> end of this leave on or an extension of it. </td></tr>

<tr>

-->

	<td> </td>
	<td colspan=2>Date of Application.:<input readonly id=appl_date class="datepicker" value='<?php echo date('d-m-Y'); ?>' size="10" name="application_date"></td>
	<!--
	<td><textarea cols="35" rows="3" placeholder="sign and stamp after print" readonly></textarea>
	<br>Signature of Applicant</td>-->
</tr>
<!--
<tr>
	<td>10.</td>
	<td>Remarks or Recommendation of the controlling officer : </td>
	<td><textarea cols="35" rows="3" readonly placeholder="sign and stamp of controlling officer after print"></textarea></td>
</tr>
 
<tr>
	<td>11.</td>
	<td>Report of the Audit Officer:</td>
	<td><textarea cols="35" rows="3" readonly placeholder="Remarks from Audit officer after print"></textarea></td>
</tr>
-->
 
<tr>
	<td></td><td colspan="2"><input type="submit" value="submit" style="background-color:gray" name="save_leave"></td>
</tr>

</table>


</form>


</body>
</html>
PNG

   IHDR       m?z   	pHYs        gAMA  |Q    cHRM  z%        u0  `  :  o_F IDATx  ?tj   `h   mFL   |	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   F_    ',f   	~    `H  `$      	6(   FCG' 0k)!5/R	1;p  |UWRx4[3JDZ.4<	  _ A
 "w2M*$9noTBeHURY#4 !tv!9wK)-9gc75$1s~"{\"I)ZE)0|  }#(`Q0=T^x!`GY=v~?0:0_x6DC>_!: { ;ihh]WUUe``pA]]hQ0
F( hyQ0
FgNvwU>|(/KYefftdl rN-L~CIF@:0=03!wAr >H-+++) BBB[uc4FG(` h<
F(`m;gt%}`GY_.@:0Eidlz`e4h6S3=OLJ5:=
F(`M @Q0
F(t7noW7.hYv8!ujaK; >e(#J'cFN1J#rq0?!+wQ0
F(`  4Q0
F(9}kN<iZzX U'Bwg;fpG>yyym22F(` h<
F(&Rk	9{wT~a	tbovlAdmXg300XY: y3b2ct1/g1ZF(` h<
F(j`Z6m;}CpgX'0l}2. B"6/Fqb4l?221<6 >4//'7w'OMA`Q0
F 4i`Q@iM@3AX	r5	uaHX'P6#)F^QurAWNyuLj#rAN4,Lc8%--$..nqAAT5
F(` @Q0
F($Z*#oCOtkxyY5il 9Fl$C:LXO|:K!C:KZ406SyyBmmm6
F(`< N(`;X-[cgIuBall=!i 6l/> "J:9tg2_]E$0|ggg	W_|||WTMy`Q0
F 4Q0
F(fu&7o}Aa3,@?(T03LB[E6\&Z&/$EDD-z1O|/_9vN5s1u)r=,@rN?1r%e)qQ0
F( @Q0
F(3B3f8u)qqh%3YP-/3{]@peZw9_		326@|[}[~
Yb1ktYwV+**hk,wtt|42G(` 4Q0
F()6l||h+ :06_=USqu9***wdee:z{6O 22'fy:#tQ0
F(/ N(`G{N%tPlTNua '30:@\\\o9bl4dbx_~c,": O`gW^^-)vQ0
F( N(`Pp)Sd;vsk<[nMP'bwA3s{@q555}p3'
@o -v]:e`?5rh
`Q0
 h<
F(#5m/^ vh{kOfa:I
Hv5DmH?3/Ye&%%{~~~]\\}	SNqpYa4C	X^nAii<
F(` hyQ0
F(**q?8??O332\ataa{va;O//.|"WEEEKac/.A2;'fCuuu))i{FS(`Q@[ @Q0
F(<gO3v@V.80x6vhl3lVoeXB0Cwt9/Fca=
O=xq c	OL6-300hQ0
F( 4i`avV	:1`*
tr!3&tRG77Q1lG;8@[[K3`B?0r38}bV<
F(` hyQ0
<y3/3a\}|+N=4hL?%6@.uLtx9;']7qQ0
F(6  F;`Q0@Qan[|[B	Yua|,8?(Bfac`ee? R{%##cX f>gq
/l={4$G(` 4Q0
F/_imm>yL}/F6k1,3nf^fPkI		Y]ZZn4&L<iR]@Z  ,@%KFO`Q0
 h<
F(CSY}k
hX]fQOF44'7wwqqqllF_,YnC@{!*sF
#/upt~0`Q0
F @ vG(`sfNKHY:SAw!faH"0}X{d{ 2y79&&h^.3hE ! c		5NQ0
F(z  XF`Q0
79s?~( :,,2h+$@3  ;)v5>+RYX[Yxe4BC=|)}u_  ;r&M+4`Q0
Fu @ 4Q0
F ]ZlY}+l*A?N.p/l y1/X
d4R#<<<vRS3b/i00mP`Q0
( 4i`A?*1{:Wh?6[<,APt8x5NuAlNN=bbb#lrr_oeTW
02O<o4G(`@ vG(`jL6-l@sR3e`d`C:>KvlO2fdu@5'@*[ZZv\_v%^vn'.\qk4G(` @ vG(` s} 
ga
r/to2d5l$#o\]]wO0ihp!op_rl`	(A9KY9{>x4G(` @ 6
F(taZdIX +Q 	WruA3%%,))0C=KNN;i$;0h>'''?@'nEZmzf4G(`@ 4Q0
F'E,Xuf_`fO:k9 #ePg
f``:w),,lubR 44ewa32BR +)K9;z`Q0
F  FgG(`
3gL>q(P7|1N3UFZ?#
Yff`ggx"==} 55u6hW:\79={Jt0
F(`	 htyQ0
hV\n6ulPzhO*h&a43X;v
6dF
 2G[[h?P__7gTffFit`uuu7u4F(` @ vG(`N}6C0l2P'6~e?v

^[YYj4?0] pel?~@~fwVUUhQ0
F( ]=
F(T W\YbEEb*[@rYP'vo2+|1 &J!zPxr|B9 **jID4J[Ah/;?2@[-^8ihQ0
F( i`
G%meF?AN3k
BBEf``C*vYl4F&k?ff&v~vP:aSl`1YwS`Q0
F9  FgG(kV6oN0 9F^z#@x[.'_Casrppvvhl{~ ^f?_=:w`Q0
H 4:<
F($ukW_>N%DeCfA3?dddV;[]\wQ /_
	Y'H'teYttLngW`Q0
H 4i`"<v~I 2`BiC:TTTotww3z( ~>- u	:._=r`Q0
Fi  FgQ0
Fp>{>yX6C@a{EA`w#jvlI,``df`bf)00p}^ ]}i3&&F+b?| pm&%SG(`R @ 4Q0
F8t-[|v poDfaW @z@lQCfXra4F@g74r5CIIoNn`Q0
 4:<
F(Py]v3t@; >gp=""z{{osvq7TuVg}<
F(` h<
F(`U&=w]XX@{a'WCXrZfZai4cee%^^>Ae]=/10
>lL6(sGe4F(` @ .`X0sL-[^p<q2rqu3x6hv/1}}]\\(*+T
27c:oA{55?!7
F(` htyQ06oqF;VN|5d2#lrl2kPJfaKA?~1pqq8>""hjE;o]s.s PZouY#`hQ0
F( 4Q0
Fhnj[vm@^L1l	6br?~;N5H?bNS;WFC
 ;7f2l^wYN(`Q@$ N(`XkpM2%}?vl@?~;,> M]uADg>uk{ZZ,K+10
hm[g O(`Q@< N(`XGK=;v\VO} 
u#SW/:
lmmt3a lP'RR6
F(#sSzh"/<@l9h=Vpqq}iig|}Gj: =lQ0+M-Z%gaKA|P'|5c?)??#3{h;~,*@>=G<yf;j`Q0:/^|GcK}VAfeenLB>aWj"@ }@@_IJJ>SQQuvvVWihyQ0,/_	Aeaa9>[
`caK&Fp%#O{#Glm,?x aiq;w&fcURR=}Q0
(vG.]<oSiP'7"rs@[ 0C>YV:5-jW9p
4|OW>;C9hty(`H+VD}JXQH|5tai`ZAprp1h@>|]FN@'xBi~6r`Q04cGvr(<\)acewa=}E&` 6l0;@jMffz~pyg0,_+}}BN(`H={8}VXx[02/5y5UXO`/OqqqlmG;`aa6AyPc(=G(`'O ;n/1qlyA3rg6j:DIrGyMb>~6v|a!;onkm}fkk{8==} 4i`pyI&_lBR!00AFEA hO3XTCF_AzA0A+#@2RQS]:
qYrW81bHCr@`o>kiZlFF8XgA_9EtnR`	jg` fna/VAx958LJJlo}@ vG(lYky3F
T
;)=h&h&Y9;FC]!Q0
F(Xp}
Tknnnb;-:.>d=YiX:6
JNN07s"!!a~``W 4i`Z0{L~7o131:/"26|2
!H3l%?TPP01<"h:7r`!xhQ0
FVZv1kP,2~acLaf)"J#/V? waja@=evi%Kh0@ vG(ttE]6tXw	dS _A] |z5+;P-X!==Kyyy=(7'|4F(>cW(__66rYNiu?3ApNF^M7&0hu	N;oA`C 4Q0
Lc't?*XXE)ugNL*AAX9{OJJ7z(2,Q0
hnp?vh#=n00UEkceN75gam:Yrmvd79/`@'@ V`]mgIV(lcee5fb9 h6)yi$mb<<<O2004`8 `:q|*,_0PmQ0
Fkv'^tI?vA3,	  >m5L
;(v
l" jr l^6>f4haKfcxN(`@AaNu#3#han@zF%!{Y
=tO 77F&?k{g(n  N22i`Q@% c9)6l6wamX|8)3[;x@b-% |0m<\pzMiv=w3X<xIO_k9MMDhyQ@WpeZ`h.  cFVV
V"l	))We?
+ XCy3Q0
F(L2kEkj?H:{Y~rpp ; 0l&fd2mg#upGHH//'^^O/\\\_\?{w?|  _~rClzC~; 155} F;`)ttt?X`F0t1b)lL	rw2XV17:@6#!11WYY9(B1$0,<j`Q@:8y	O<aTTpi /l^o?l2.@8JJJ~o`rVKK##SNwOg5~	h6h.SL6 CH\0`P| 4i`_Gr
v/2lPA6
R
`k ZdCe8zhi|,uot?(` fL1s7o^!V'&@f3h?3|=&~c zg?IFFYkkcWUGDDuV{:?vh2d@	 /d7l 2: 1g+W2<zH~'@ vG(4sr/| -Ul1F^L:  6 ez?BKKK#}Vd6qM{Q0
F(._3e}9~uvn `0yC`$D+p$ZFmhhxmU5_-,,^ yfvr#6nC9RkP{4x Z  Ab!65H(,bq?Nv;H?hyQ@UxlLmX a#SA T:a, W01zXq9s( lk;@,%%5z(` k65kV5&xt3%:6 o,gZY29a+SS;BCTRVWYU=,j#<?@DI.P$Hu)0z8hyQ@Seo`adXvxD?+`lB^v!w/wX]>o4G(,d`r&  ''h4F( 4,_<r
<K|6iB3SPGcCtO 000OZvm0#3?gNlcAYm:y$CNNV)zhv 4A;s:_ 63tT]NN4?Iqp/.=x7Vl%7;tKBa3\
HXgv2B?G/,))[7`;o2}VAi.t'9HSP;T4PIG/_G#] ScFchQ0
=-4m,`[\	`/F(u@@> C.aeN>psuu_&L7soA([@d w[X1[[ITTU}}"Z u(gnu7o?\!NuF}$c sA,,@O;-m***wP>(SzPGA
=*~/ xvf3"'ahNaQIoTTsGrwU~}-*@0A `.|)tSffe]@GOoNDEG,Uu[!y?g^X(`$[jL2%t?`PHY$ef
[*VZXGT8::O\3ckJYyIEh@~@` >z66#]aahF 4*>}MAdA,1#CR%Z$A
2@( A9@OV_"niF	
AqoRC&Qbo|q/*++G+Wp9sF_:@lp?reDeLe!L(\ip03@Nyec;pC`D :t@+_RG%=@:wtse:_FcdfUlX&xq(|]Mhy: wm'OZ=zP)`w`#W@j34h4vY5`gVPHfBm#7a4hc@v<:g]i+kZzI`Ax$~P!!g]
Q0
FHb{A+@'8vCHS;v3u,,S	377?	Zz=z&4m\`8Gll*Eff&rnGMO]N( CsF;n,`,#n@4wI@@e>[nnnwFJ?abbp*X1SF^A  7a`fV'K.q]|Yc?	;T)A^2Th
2 Zes 44|5Csz`a	@gY2b%A1s@o::QVwmSe__)i{Fc4uF^`ymtXGYW)**-(,@M7hyc/^h}vOEf&SP 
[2T``<bx4miiysCCa?z>_ Uq"A,b(Anvwv;tgi
6z~"pi5*@`ogH@@2
F(}
K.e/jI }`6	 1~[_%dCA C^^^[kjeb?}V]G~/bt=UVkPoP F; lYk@!O10>lq(}[CbfIjN[hiesq}p6f
\&WP\@+CGh;@{as'00p}[[7
h^>i&gNAmPDJ{A yPjq;  V`ffv*  `	mmo)iQ0T5L@ uKXp!XGzp|/H}h@DnOVVVGcc999={0zo,N@[%TN9o:gr@ vG-t6oy@'%h&v' FH<zPX
H"e@:tPK,Y|hSPgV@A?2llL/NQFZ/r\|0]l!\e +XXAB?JHHokkHCcJQ0
FSNW~t%-X;dp L>sk+TpQpcfF^!KC---QG 4P :kA6mvlvl)ry	.: 6	j0_~:^XF4 -y[r&p9wv--U$=AK!PN9~#22ryjj8
l/h	[KeBN3F.aD<+% @eZbb7
F(hpq1`;ok1 
kam;M(83|.8UNNNgccd4T__ceeF!Ko99U h<kW6o%.+K@ <Vp p IC PDa.N3z^RHp5Xxcs&_tIq#|&l7(iLt8A~AFs(&w5kB6lv4|_8h&061de?x#@ c--%%%uuu3G(I*e]>`j
Av<X;fZP?_*9KLf& Amq5=,+( F;# lYk%Gp &X#Auv@G#waKXc
}"CC`[mF
]Xp#@?nnnX[uuu>z@XX
{K"E:`^Y#!{#PRG:'z-Z(r	IFcwoK^W96#z4zX2@$]ErJNNQTT`+V9=_Akl;C^Yk_	8**h<062X H{@Ld:5TLXDr) F;7\%*b;TP\kh"dC"wZ-uT;zgD>e1dEBaFPPPx :0&6-*?m+`cPC= 8#w:c:ZZT\\c4jCtX;% [r~8ry1HJ&l0d6-|cA]~V4;+k2y r>(|||-22nQ@50{4_0tP/l6@*'a!U95hp~caMj3KLLF 4iflk
/62idkYTN"L-z[:"hg1Ykx>_YR@?Hj<1' e3'?}v=UIUOF>y
iD,mt.#l;S/@{})_:@FM69
@#|P~mf,w~[ZZQ@MyFI&}S@iv`w(DFV`rLfTS@eGAAwr4&TeY@l2o\>*}+
j3]i@^uqur@Xy< 
+.d}2fzz\M`r+xl
zk	Ne92e >H=;V:o\_UUl4/(-+YtY40- u8:
Tl F;N@^`AUBA!e"54H"G83`*DDD:RRROBuu*j4}ki=|PGr=|cBN}FM-YeFe4! S; vl?&&&.PQQ#E~>G^\6f`iAFFnUpP,_lSm'7
92+%;J#;"#N#t=2s`TZZZW-^:\9$y}+/76@~B-F. V2#e111KcQ0
F1`J,HRp3W`WE(8z^!Y	=+m&	)`W>fP\5	@!=-z;vy: p'^?Dj<[u.7.'w*uAbjjS}'2k/_mF1~d2{<NA03a3I UhHH`u'E6m\o>OI@_D(/D>Q<UNVh)f@@`hkWX"~w&mRS2g#afx% v3YY7_oA(aIc:{X;}?RB drC0e]~f4Q0
l#_~ucfAdfDy}\/2|%`Y~ws%taEHP^qHrNW^ZhQm"aF>>6"m/Frghpq/1'IIjjj@3,J*w,,^p=vwUDqC4#*9/;(. 5FG:qeZ
e`O( //\K[&d>B>(f9ny9''7E444nc4j`:6Xzu(0Mv|ii"; `W0}_PUUM55Ay-@uueg06 C***ePmV$*A?#fff]M`X`-|;gl81`#MN3]qM&jgadB];dS_N'}OtwE} 4i54L(~dr`-PG	z$8!_	n{YSS3N\zU>{)F )HAsIEg 6t ;KMcuA-Srl9Rf@B<rrr]9>>hwlXre={@W B:m lQYL,:Yc}}u}=s66vJYZxQ8326qG_tI:g5-)uzWX\mj|+a988^2z](#q_y7oTc`12SR}5;:=X] 9A+w|4C\.s%j F;C1c%d4N_Vk<!/YfDM>Zbmiiy<OD>g@#g6}IP?Y_Xcv#;;dHh}<hTcc[~|8\i ;~@qppqtt?0h'N[|IM|	`n! u0FB
.!005A466>caaqP7jg. r^? >]Bs'^`p!wa36(bL(!)5',142y7#F(b6lk/`3#3FX+AP^Nx>=<<vhk~LW?4P; "{w] F;CYkNIgJCgqU6gNAK677?5t'w&3gLN>eSW:e	 aCY_b!>	H'<%&!GXXdhLj~e.adB2a\>~ v\9bbbrPW*a`m`z<t8~X&s&?v!vy6^BHg=( q>4<<|eYya`Siz=2huO< 7AOg3F_=e#Xg e,8 3!1upa-XhW]Smef#EE%H F;\vgi7ofBrl
vtX^KKcZ:uo
Bu^~YjA]KhVp^MAAAkYXXQ@mpjW; ddh=Q;<BeP"a`dFZu1[[C.jW.qmdV/0 gsi~`c6rokl$FZqG5rqFs(7	t@>6IjBn3l/ADi2B:c^__Mm45Tvn?_I	ZI?l:2`ll2e@A
z{B/_ Pc7)e#N8::K=9JlzBgk`b0N'f<!|j.\`i~g?~1((( B]]hj3gN	>54Gv;,-*Ak_UU99<aYTzr2[ Nr'5x04"(Y,y{)333`vAAl%"kE66vOFs(C\vco~6LWakB./t
ig:?&P;~a$kSa}	+P?	<H: F;[iieC%xCjw!a8:Xl([u*v~%t?k
-\hzhhj	/{\pwo_!VC7#nBqtnjjzB]M{^v)?vC -_lla+&*+~rsm{%/_> 'GUwg46^miii
6Q0
8}[}n0k`1FgZ `[)V7}Zz_Fca\qPuPRZZB 4iD%jUXYa'"/l215==9yt[v"@!;Vj3A


Z0z( ]6ulutiBOaLyV/t<AHHh+hVeUi/	5 e*	U+_>v?daF-k#};x h`pM6X&8>{~8)D>GPy];"fd`>bccs$  `cDD `kc1VA6Dl <#xgyH F;q)Sl\Xvl_2 ^Q]~{Xb={>F= lvJ7@pPpp;RGMAWWGe"_|K{6aWAN D^8/xDKJJ6;LM0=`BB{ -xc[Zs<[lin:c| zrornvv=yyys
6Q0
Xdh	mcaF,\:w?3?o=;
P@_owPZHAWa71@Z`xOT `X0\	_zpE4IL (&F#FFr&{yyKKP]4~^Q0,GCPG9t`B: tlTSq	[oeC:??~2Y %E9mGOP4bkxCopikk;y+Gs(@n?|q0@f3RXg`?:DPP5Fc``rCWRC46))I5qx)"|{vA	b2|epm[7k;7caebJPZuL`'/HhZV?{,aPrH8le)| 1P)XqqqWaQgOJY4{68[kYhIszLKq}0.	FM_=pliivw1F(/hm;"N[Ch.i~DEE-eZ:+a@Iy_3)AtvvndUU
b i{0>(GEIz7.]l:P.bV@ivufind7wjFccTWW',_({!dT[I0v:uHUVEd<32;oeeufPU5#66zs3]
LVa`KaDZostMM-Fs(i;o~0n/\v 9&&
L3&*)I'@WV'2
H{r#D^g&fV{)b>@ 446$^y_Ifh`@GqDLLUEyU{hx<`I^/|0lqu_m kD
l	u> fklj;63ZK\'O4?+|ja!XYs=4m<}6aon9}q?t ZtEvK8LR}_RNYr$(A{s'ih0PQIeQ0
N8"5wAnEuAmXxptHiBBsWFY`m)))G`,#|B?p 4i#6 f'P6C|fA`'HcgQVVk4thokaCO@{&:Nl%@NtXP= 1t?A`(lI;Q>\ V:I3Wkkk\04P];iommm
s|%d	?dr?Qg> (p=
F@?kZ133AM ~M1-/:1%|~teTl\g10
(7n\pqqj{3AL'@RHHdS-K{ 4ip@AAwo +{+a80XQ6N6k4t(,;p/qf)ut
2[E,gec@?X[nm;i#'P:c\0yDb`wB>P
`xYu Z+bF!Dj73+V~oP-?)m R.7a)K`z[.+:lll76OvX^uX,)))CCCh<
,>|0
|%l{++;Cwwe8WfO]@w/FaXG	jL,~Sh4tqmIyk 8t
~,KSut!iYUXJr(M `?(df<q@o	
G( dggmXn9u tI:En`3gNl4>GG}) vM61[}<q+`X2Lv]Q0
q|s	`?0-.+1a+D` UHk_6qNN ?~Z|fh%&&:.B6@n&-w8CYO<:xpIFO/7? .l1!|H;;nCffTz


6h@>4Q@d'%$$s5~p`ff7-mkc<xf t;wb -uV%'


S;7NTTt-0mar63	  0x7Ae[<Q0
wo3fikkn-M}y<m =<. [k@X!i&Mshyhkk_Cn_
gIk6@ 4dge_>T:DeXvhyHII^wwwXp`^3*-gAnfXY3']EGG/pwRwgciii/$cY:}q3  y:GkX2 8yPvVlP
6Kc4of tGC;a+#A^`!!!-y0Aa/4<h>+L&FAC)iw;fZH-QaeAk;j1gg=			F@to"_Xy;W5 F4 DF=zECwInaG3^U]l4T_^o9N uF->_txeXB|c\33YQe</	6o3g`*t~BMcQc>J(}{kmmr4d/_NVyPge|l=ZXWW~}E`:3aArvS LT^l!rn*6FHW6Z0n2h2-`, } aFj30oj\dtj?~T"$$d-+D,-:IKSS;8 F;T/?olyAR
SWWQWhg8{ I6olX!fMY:Xe+PCy8+22rixX==}NIID 0DIQ/k(455|_x{'.& *+7|&%(,(**)^?_UYxx`Yf #iPM+$GMu]sTL5{`D-[^~]~e1>"v%&48gd>gFUZZZL 4i"Z#?~N@C8FCv<g%!:p`}}}>T v| f#N[
K=e:[L,L!Z j`q*333;~0
/gWUU
lL@A,yMJN=05+LJJJA[?H"/A{_:\a6OWJY{(aAu/ MJ{Ma:
Fp gp1cF@ONh]lzdu~~O	IsKKK(@VV0	;(?Auy~#d.@ v @*DGG/}	,~D@>Tfa{ "D7''gh8t7XG|aD$*L }[XXp{AA^U)n0qgv3`hj`in--Ma:'P"UD;!&&|yqFW 7_fKJJZP:c!gUxg@BLy=)@vv5lgPS]:K62b g)fae=0WWXX~f4G`ZZ[?4X`RaSSwN3,A{aU,Hor<R3y BysRA2N*-K~:3/p#g.?6Em_=\3UHM#L^l;l`.!o9A`#,\<bH~
N Y1kv[ELlDC~e|`cHzZAF7o^\{m70_tl![i`;|<|0L7<WUUniel4F`
I[arP}4?!d.@ Maa/.N1+t`9C;{em!JPXi&_`?|9cU@:>%$,)<<v[+	2C|22\~fCGGSma|_'`;Xy  6SR(q ??`NOUA{r8+'MU:\`a h~f;GcS7
:8|L___'i
d(Sp?~'t@ P[6 }.10
3}um1XKu*1hL at	,`*uHG<`e^PCPhh)!J?p%'|x3uM .rgfX6_K#"#;:t-33h71@8,w7q9#d?~w u8``\u|I&e;>Q3_lA;xeQpj^^1@juu=
6hk_g7YdB` 6wZp!ccFQ0Tkh
`c,.A.;V)*mFC`" DhLwv`^Y4r4.OWLk@r(++6Oiiip?@6V(~X6K~.<2N@YWWWkkk? W755>d	lHcbz~9:*=z0SL5L+e,M2:qoml>;
+s`3AyNYXXKHH:4RM<{N?6LPTn7/0Dyn,pUR:y0s4YfxB
|oH93g@ 2=Hh<p{FC5 *ay FoOD@ 4i&n-4^YF3"6k E6566\M]v)uh@*%IwXCCC-F5,TUUYQQ]:yyyv>5kKGGG9d3l	1t/. 0fZ|ue$/r$$-L(+Z`W -~acrj_6K`@T8^A9Ru&&Otc([,W?~/e*@ex*??oxu#Z;\( !O!OOAjhD``wBQFv!'})e[[@cb
)S{W	/P
{#_gx.A5}BJJ*">.f?:	m%Z~E'((suaM0h9--t#c['M3e~8\}l'Gpw,)[r%$,AEk'B
y?z{{JMOI
\|gyI[mx?`d#*K`F hg|V10
Q}HYjh`fj,q/u8~|h2ul2&`eb (aaP#
g!?p%;hYUJS?"#7abox-QQQkA'ksDTLD5.YlDa V\nRZ	r58AKPf3@yvOdgNY>{E/_<f-u6? :g82 0H%d /Ca$;;$<-"2h[|9#*
P:1 #QT .;XX [!g8X] dNHp&(No=PamX4Qf 4	\\fzJ6Y Dofe@3e3k>4I6l	`(NE,ar6c8?	

KKVPP~Whm{9`*dHbF>	Z0yy9'M2a4]p!^P5hI0( peO9	IYGC4=`a`#/`.y]SS`9|(a3 *@hLCSSS=??[cU
@;![`h*Vh~a?%55uvYY|GLx\/N3 9)Z/YEXhrFpc&fg6n\8yy7"5AA]!85LaW35LwNLLe^^^_r=k^F[^~}'k*f mV^$$$ih"Wllb j5XYC (w26.hhb;gdg 3	 6XhE%
 ^:2ua+(>}VWW(($iaaj4DGUqSN 6l@)kk>~X@ARHIJ?IKK2z(1 RGuQf 4 Nm70@@D!RY,L454nvnd 68nPv 	6[|d4<|LBByhX!ckc;,@a;UF'TY-\qu2dN`4G`y;aL:().9x
|J,\5~A|`Cz_QaIX@TT/6555]P aa r O<0aB`vk1jpg_Aiau2\W`7P+9V&e	mm+QSRF;`d @2yBy%H4P:shlET	f.G)Ob`6w23cx</73h_t`KJa`4`l&@3V6W7dennay{;e<-gOPxKTT4h{"h	hl&V-daa;7!7`hHJKV^	dZ>0!`wPzz]Q]]	9U4yPAe=hUlYmit{Pqc3f}.`J,L(b~|Xah;t++AR//k10
F U9;H~ & b$N?*/y6; ;Xju8}X ~D< _\ geWOf +c++h3h6`= AVi%gN   4LvY8 3MU$jjGEy+Vdfd2CmAT>!JfC{z$q`.~- Z+@K8q*bV
[le80-@L3gVXm+-uakf6X]}ewvv4##w10
Fu~f&+HD@0XN[[{=: Fg0eeeMV5X t;>yoL{v3g8qXXse)#8A'2TcRSSg888=)a|(uo^D78I2gk^E5Y
 "P<f`
C%%%]fAfVjkCk0j%e#F;=_~h06\ 9]j,rFpd)7;V*(p/]3l?3|l	]-wI[F_rdrrXVPPk h9TFX<S l??UVxL
4:`#*.a%G#_1|99`eq_Aaq-	GO	Y 5>T?~(oh|SB555nAmamQ} 9Z`y8%3+ohHJ6o0	@H+c5^{sce!I: ~7c,L`A|@tlZhhRuf~e=FVU.a@UN1l?3})n > Yoh7`O@7}$l 4j
4Y`13  )!bf
93\&M{DQV`f~pu`:3%x 4'oSNgQQQk~?0mFDx"o[`r2u5[YT<@bBBF?~a`cG9 uNgVE99L@t1
~X!n0/i.*EAuM>.]*/}(ww?a>!9
-/|^z??'6{hVA
T>CVVCkLGGG9
Fx[6PB ,&&Xh/i&_~f_@A`IV[M6,0e$ag;xX1{@>fHG>rnA:%,,wSssG CC3gLJHHX
,F?t8qbG'98OHf7-A#{suup4Ik6 !?@H2zbRALY(yymmmFF&GC27aoDnn Y_/@!k/Q}e=.cv@,l~DlAU[ m_Q`GF(@We  \(""Xh_g|B/(` 77JSSCH wbZbEh2(1T?;-5Da rtAV }Y vvid"Zl.!\!N2caaB<-5[ygll;e4/_V"r(@|kkH`;wlrICY=1~hHtUVx&{~c2$kW'v1|{GQQQl(cfHCYQ90D4h
2f~t_lyT~;We4mP^YhQ#013g2a=|/@9!4@J1204:%%mt0 <<{&M2G>(|>(5y\66+7X6	7WYW:QQW2	:
kv*,O_%\{{!H]0o o=hy`T@bA gf277?qk4$G6ev
:01[v;oWqxC| _Hn1OIII=spp>KCCkQ0
 7oTg9PoC/+ ol6tY IHIiiw~~dJ\3g}9qpY@D^-lG~0t-DJV_CB> ##jMYc3Ceeyy[FCq`p/H:&QSfBr~`)ekL-MHSPPps{GG8s`nn'O n[XXx+G*chZj~p\"p,i]y	]xLNNQ@@?
F#Rakt lU0,oL!wRR2N<N 4grH`Z|
DV: t6>f`57] :?rWwJdU6AOkrApsmR fPfeewJbxbccdrpp8ge4$}}+o-;v)::z?>zxQaWYMPbl9sf015_WWW_XX(;{aeX 6{2`<uK.>cj+ 6~*lAZ=<[e[b:e6*n2s4#Oz )JJJH1 F|XIZ
A42l6?k$\l533#*O>+}}=J&=i@38:|a4@p/_R@ma!:tx0o:^)m tDbR,_H!;o0 %%pLs&N"G@AS
w@-[Yne7n?~j1W|U]~r
,msBF
$:t`4F( \tI640RT-rI1 Fe7L_C`4]+W704D16n\xy8FZ^
=^	A!fa3=M.t&N`Cf>yNYY?;4?~'E[n^\$0)P>|++GC]~\066=UZZamc|426mA@:B!XA2cqmgwJ?}y!bq)hn[t^TskF(011Z?|n---F 4b;;o:td_H+ }#"N&OT0er=/\` Z#AI|6kN%pX%|q#&*Xl^mffv4i&LY{3|||VXihd6z<AXh`'J`b~Z*^y '''Q!H;tRK.|tB|??YB aMU;k@-n}] l6y#?@+L6 nW2Cfugg\](/Z$?L_ Fl~`]o50a8s"&&fqWg	gu4G+u` v64:v)F`}%##hTSShddl|'63DPrg6w	o.A867j@y0@R3'nQ0;+*_zy !, }l6 Li&={V *YV#Vu/kA[YY<Q0
zz"|:,O<1o@#rOsyyi[`!CwCOD0aJlY6:B{8|2lV/|/)|]DD_g?{Wnc@>VP
9cGzFP>s&Y3} 2	Jv	vGH/_p@#lXvx]`Q6Z1n7?~Oua+
@ ,}T`u	]]+nnn;6Q0
hmOA y	v$ qGKY&
4=a"?a);6c;tw!i2
UJJTfa{#lOuSSGO`#//H~ 7$aWg`mV'Nwvqld2)yi(.`yv0HYjc(d=k.&(gh /O?{$FCqhf3&8-uYD>Wv/fb`L@G(},V"21vT; hu;+:
"y@MGM6_>4:G6v*0`:tPaKBg`8!:.	GG=#G"X4<NNNP:l6jJ3s=q`ZvQ W|>{Q0
rrr&sG Zem5^^>FCqp7qm7_b= oH@	,B>6VbgQ@'x;`vP6Us 2a|]l#aNkXr<Yv66o`/ 6 8!ev/8XzO=ldU+`S u+WE 2A`l)++896?
F,Zwy"NNfb;7p&-%S!8v,o}a6r'Q4v%8fnn=NA{{Q0
&|F}6+2hkco* i><KkMu`{ A"(a5A ~~--#oY}@o\b3gAJ`z<
_RR>A+mlFWPXX;OXy0yIh:dZ4' `>k@x?|DvelViQ0
 ..SoIX
2z/=hZ1g]v|2 oDa!ryFca.uR\]]wnpp$Q0
F;w.^_<7ari^hQ@lvv`E 3UQS0]iQU3p -QBlT<>-<X:{bcc75z9ptr|43lF2i:7o9k[zZP;4`jC% (RR2O{( ==}gM<yYc;n;+4,ug7c*z
 +)X{}'P=[u(@H^E7 l77!<2IIIBH-?~NV1+V__i:=:""a2Bn`WGW:f^;O[{m{7<
 ??ko{8c%i-QmFcd;2e4!8
F&X~^nnt`=e:#f:v H	 }=.\xA;V&C5Q:10}2:phQ08FR@SXrXr1<$`37u6EE9eafd3$2C7k%7l;	..o|x)4cZjaG>i~R^^f4I_em7 W..N6V	rSfff'F;`_oL=TAn!X	F;tK,Y|IakswA  kPtaaWEqqqQ0g=z$v=kZXX$> 3[6ov& -5&iXu1L^5q<?}vt 3" 45l`<!/maP	`;#--JJN7L6A2=FXu=#$''Vmek8FTa >r0Tk7 <:V N:[jUhtwwl
gW/,0fVSaG44=	{A	v| 6 kV]9i^dI@ H4c~g8vo1kK.;7cPgiMlP/rJQIv~~~_PP=|AjJ'NyV8)F&(}^(**y!H<8u={\9+ax`U >SPP0a4F( :u*V|=l5& c?.^<oi4jkn`@S~!aKuAc6=
Fwb9xp#3RSx@n hXwW^ir1+eU ++qX|y@m!:3{t d -e!Y+1}}<<nfMGEE-+	lV-:F!XyyyM8 jd _FC8]oP[)
Xfeeg_T\v4F( TTTc'-z	?au$0UWWn-w4)w'<,V.jPX#[pL}>biFc`-[8R1 8;hX/<r`ADNNNM/u?~XvaY@G`@J9l3N.^5g $l|6HIGC08v( /Xc5YX[MNL2%= 0hQ@<a^aA;P8SN[!hSf?t7TBj %pP:)<S}LXXMttRQ0D5gpvv~Ei^j;
UW 2|/^2l,S.,nnkA3GKoO+PZBrO7~.i$ &Oh9RAp_~0B}i<
F   ={6; 
Tn\$fTe$roOPS!r15n6!fRwC6{63-=sQ0
hoohP9J 4lgCCO8Q8
y8sPsaAN$owy aWJA4"cJ);!f1
JU4fQ Q(u<@01]t4pkdE6p>A:KF!+A88lSht(d.py{{l}6C^[ul-FF&K| SNXre{wT%1N]X2OqvLYYNVVS?
Fjj*;Fl|d&fo( LU+9coP.l!KNRCza_~.YU,	!5aBH9(`3x,/:mG:=r8h3*@@'F=mrU65;qM3gbd@G	-FXKXXOXY[0Q@>3XO;r'fZT[at	v_
B>
(fc:.`\"5a4hUrPLLboo?
Fu5I?mXq;l5	)J;  @cSSY`IpA T>1s(tS;goH$l	6jSH%_O3zFQQnvN^_d(u{?cV,?:;;+[4X;z#y&+GBwo_?AV_!.i0 ;l{d1AQa~]?|x'/m xe/AH{rl6HZfjfj4G( t@ `cxp1r ,8:4Cm`V~6_275ZW^r 1`fZlFx8A89add>	hv6P`v{OA(=iVX a!7
F@GGm[7AKllM{{{GC2O:r888'2evr0>U6i\Q0L@ggg?\@4R&`+888oP[ v;wau
a(awI_?O$&&Z~AOww)$l?88 ]@h:NChEB
V-sS+**Z<nfQ@
PScooCVPklC3467.A8}}7,!mC%%%7
Fu@aaa|y^gi,L|0B'N#t2
?(i -5\V3F#OhP	FS(\|th-K]/BCCWS 4v/pE>a=H<a6O1;;{>],AQRY[L'L-&my	Q@.hc3:cZr3r`."2ZQ@%u'=U2k9XT?]]a#1o238$pc(C+A (KqV;+@#(O(_>IYy[ V3vr{re]u:au2{0"tV5U4J3 @0+h9^^/vvvUTfQ@) m9tA+Av3l#/_?-_"2"h=aee$\>g4F(.sNO^:rTuBzaE_*V0Zdi2?~ ZL	?*?}B``	t=]|`4Q0|3_Z]zl"|`&QQQK fA 6 +h*5DPddW.qM8`=20AX  @{;0 ;VvvL 77w)\ H0`3cN3?*,,PaaaGCnC/cj`55{'sv5ww[9l&M3gO> ]6~02hW93A N)sRY]Fh{6)
Y/P};@ NUL@8^{AFh??#1V8WZY`;<BfHb?	YSV^=4/MMMO={iC`#+`r%.-Mo#=vVAr4Q@6.2auAu4CA&LP4g-o [[k.}v5e_3ph&fm-F(!X^oL+!}&`>vj Mym^`a0ZH??L,G7oZ,wWrz5l66U4g^Q=aXb-QtLL\iYYYN]yi 8K4?U{fv11p`
9rO8=bnaz4Q@`XGWM 5BJvA?kW/?vHpuwwM!+DY@E?##8~rCL
LfMpL<g4Q0@yYQgL?2 O`t?@|	1U!@u@w'O}h$6J`u}\PO3s)]]KmN.G(';2m@`|)
,@]{w82N;bO@)_9Y:|94k4Q@[i6 [:@{PVfWir0`o({*===.]5,`3*N2|#dlXY-\
S<<<_W,Mu`<mf-V&b8TWWM 4,:Gl> u=:iLYn] h)2urA7	&
X3Pe[
V33/555G(( :uv91Cn
m;`7\74+"?	
2pE<;v_~czyw4Q@[|h_|f,b_3rct4]"'2}G`b3XP(5}CmhzxZ6:R[[&[ hX\9gWpX/
=v-
99-v ('Hf	LW8N002_35kvG@l`10l	jC=__370gQH+WWO1~:(Vfiay*''gQ0
,Py?\~ovC3fL_w	,[>~8v:ALYv3}Q
7$ma'TT_ KQ0
F6aFCPY"--k@C~2W\-W@*SSSi~:;;O:Q w3kL{
Gfa.0@/_4b(0`cchvp{!	8Y8dwN3esW,d67fWV_6_,X9SdqppHN3F( 5VX} YAm6-['{wOa?~p00afad73#J3c,O%Uq uMXZZ*/l7153F(9g2CMM-t@ N@B{)wc}wo ++c6FPe# o|:3RRRO$6GQQ1vlLF#/c`m&Vvpea,u}e`%k~qK;fbeO&V?a9C@pGS(G8`_-]Fn?`\mt T|^\RVCHaWyfA|`4.3df'P=+!5Q0
F,X0ar|)ryzy{9QXX8-@C++@=}Ov[5&N+q+ Yr$^dQMN :1yG(w!"NIv	3m'8~3pc/#ogx3d`av32_	iMa`m<rm`el+#m?;~Hfk	fef jq/777]S|'F.Zc\<=geeM1F(0pq
]VV+9OC +jQoF^K 4;S UDD#
k!50{l?13-/ST4JaQ-$`"9y9&&vAl\,6
 <|0y| c _O2_b<102+Y```YX0!?||Q0
\]|"ay3	k@Ylw0tw6VA`!Vfgrq)!!!w.nzQ0
F:uKqqq<AW] 6uF&=	@C{N7`?k@+nloi}?J?`7@H3xY%hm>G& PZ6RdN^}TJjOOkE?o71Z+s#kL1C{b_l?'h588qO7>2O?^vc7F(iB~N	1%#?&Y5+kZU-}5!+@7@Y!Nhii_
Ym4Q0
p>mieec)~`t~;hHw]uANhqJp_:e(K/u@Be0w,obWJN)VVNNN{rss'V`(==om/C5T!aifo!w36*<'3_`tF>3kj2gVm&@MY` rh`[J1s-]&:&n6mA_:Yq^+`A@jA{~3_-r2f`8b`h|!..nqXXT2
F(=wO	t^	OTFt,wX[/D/4>|tg ?(']z+: 3u 6@YS216*!Z|}S--mF(Ne##`0?cb`3r1|cjf;@MKF`3O`?301F fxv4UQ00#?w2*^g}vOzt,,X03A:v% ?HQm`7b?h`a!/\0M"D!IQL+W 4d;O6u`
E@AJJY@@%RXn	
A#  @KJyS:zv,!F>8G( ((h9~nY?C?\?<&V^02{*;10uL|d`76;LLJ!I!(\]]w-_L3Wj=gZhQhE@*x?kL+fl5lY9\FIf.-fegcAOGsr&M`b@lLTc[AX
y:K4D`ec7oDz l4R#7F`SX3gNwv/iQ #ai f2<u3&&fABbl4
3#//{6l8/e h=o'1 ) $ZV1 N?fV0 3<
*5BV0GGQ0
$&&vcL3BjA_:t@5o3g>|&l{GX{[WCROOmm+F(D}UUl`V`Xs]]z d[,wQ5Ac} &	]}&%Kb,Yd
&2h!,R1!NwC i=51}}wG()ca{a"01aawV~_2/CEA!+c<ad4. VlF	I/{{ixy?|&K-u<[tWt[F'3}j:#$Zdee;$//(88xmAA`@g,TVTt;%C0IHgUu/$''O<4!i-o4S[eeea]}qbab_\ P,GfaK	@l&XV:~9Xnn~=k8qc;<bN`cdyn!sH?o^fFV?X@>}p;(4!4@ Z4Q0
=cV7B f/Sj`[|*7=%| 38ey$< F!-m+cc=`@3%+@}+C=>r9fN5 dvN-]j{|(000r_@{#x40#-2^6"Bd6M'ph`iit/L{L~_^o_N^0z6fVl1cl,	i`+XV e=)i@h;@.5h*sm+WF,^t??@qPfYY!;X-!
k p;ZhLQ0
gN9sLNxIlpy`Fr'tu/-Yv  @Cmo9+
fVx aI522:lB)SGg988,@{2(\^HE k; 9q!x/h:	rZ__5uG(wFH3;?~cb`bf`2	O'#c(7XOf?2Z'7fO	0s1AS4@?p;
F SY@2\|	Vy%sg.:yN2h+3aF>yz(Hv
#!
;+4h&+3>gg1<
F(a;wl;A{;ayA@A^N]{ 4:k>~(y0@5 q g>uali7lt68*>lFIXNVEEh ,,,+	q%	tnf_?3L4X8320N3_`yr_c6ttt.Q0
{x}Pc_afl
4[im^{u}/_;0;0y2optt~0`jw*yTFqqqby> ""p0 `0P-'BFRkAlP4b1u_;G_5(2aOAa`uOrwk4Qdddmooo]d[:!?h*(1A+/Nga,|!AA=AKpK\>4fvQ0
?h5AAll3eM@#GXV@rqqRua!36Sf Y'--*08`c#79
F(&x=]k98 h}cVU[ZZ !i>}	x14a#-03A\JTy"[|*<AvAw `G@:B001	;y %d4Fg?CprVvpo\9o&Nf h~4Q0 '3Y`@nRfu7h.Actk+aPTDF@36'gssN\CEEh,Q0
hxyy?AUxTf/'B-%aa}
-,^ 4:tvj!y@ElwvXXh^&Fl4ho{Q@;lPrA&a|Ch@yxK|=`7Aya3AAs?fp*Wg'P89>M=`.`aiL?{amye ]	lDDm331;:)|*HhR'~;1`Gy{bb`\v4F
gkcSX1a0 @ N3h]8(vf)U8o|Z[:C~~~fQ0
Hnnn/[r
 @)|M?7c`cbX-df83_w5O.?vFt`YY3--b=o e?kX2A&Pfgg=,sw	# Q0
F(3m\`lV>P:331(((./47K@ N#dKU&c$$#  wH6:4l7(U33fQ0
(y(h	jA8z!7O@B@G|g`c`Oip:?gNAw1&})g	@s'Yx'll`0XBd)f `
-$))p@`:''{4
F(O,bff TXT5WY~ !i~lO]+6*&+laFvL`P1n
dN?6#O0;f`9 :apwA~],_;3={T3
F,YtHtgXQ]?ufH*`e6#F(4t566?;??p]@C~j%*V#k 2Na0l2eP	>, `<|{lll>G(>^O/v
fp''dv]fT?_L83^303|c :{!3KF0|_SFS(_jk!y`0l1y5[|)D33w'Y6:{Q0
O!8)"K.}A;;' 4;svc',XY@WF*11 :ARCVZXXM`:| V1303OY00jr;??<3I5a ''7_fKB/x7Mo vY`[ZY[t`4F(!WV4_rk^k +Nf#@^v;vX/r$> 4199A}M`jRt>a`>~j2`` 120s2<V?e3q/| C/P\UUh` ;aP7 k:[`,2!Jppp8:`'0hQ0
F(% Ai>z5kB3#x?li50N4oHcFFM`CWs81||lO][0W"r0}c7_w3pp0/+,s27?1bF(|Cg='`##+2a%/s[xx7v7yQ0
F @ N'fs.W <{r2
)OKad+I
Q4ev?q355uFddhCtLrpx>O72f`tx_`y0O3;j)f=LQM@BX9,FV`/rL:`t!V!`
[? {@KQ0
F( 4o^oN26-xW$/>fX#Vfaah)2fe4hQ0@LLIfa;;#*SV`'?Y~W1cda`cN3P&**:z( lE}	Gr r-`bX;ixc@}anl %&,kk~Q0
F(? 41XW	XX4V 
q; u3R(X'@r?ZQ0{23/~ofVO1p2;X0  ]/u_ 84,"2hRRROGS(.Ydl_| 0!OruAW_ yGeDFF.+4`Q0  t~E=}F"kX
)l03RAi`i[UT5'OZ w&Q@6`ddl6444tPuu18:}XA3u0g`,eXT!_=*@Cc>}SNNZ[[xV~!`d
7V1,_p.iw#7fEQ0
F(  izyRRF>h!A40*X*%H/D5Y&D*eXa|li'l:h@&&=^;ia% sFaid$*NB7PmAviR.y`9d0[O(eZ]4%hoWpxL/7gYLY>1 F={XCTIJJY=w*93t	O<yc3a0?PL@sGbhJ4X=nV%>|-GWDth3XW!_?;;Cqqq===G`A n3?0W?hT	iOA}F 54w.zp@@FS
'u@CC074
wuT(40\#5;> 	lvw	M8o[TT5kF0z"> W`?# h(4 ,,nqinsfqX~/	(8{91&tt{j  Q0xJHJ:{*Ns`tCw	dZS+AF%F>6x[EltV~M)`Q08@ md~
t1 U|3l&GLz	a0d*iI5Ja|b5` yXRA3mwefch1P5	ap8xk>F\a4oP1Ai
|oPdD^i2xC	&1-<V/j#ZONfn~~>hg+lD~Q0 gAQl~Z.~0{jEH(:`:55Q0
F(   {W M!zh!#ghhwE?8
,r{??S8P(hGl@%a8q6+*ej!T.<H"|y
g%+
V P(
yj2<EItyG5\ASWu$P{Hm-<-o.GthTi +#-faN]weYGx	m,$+Xta?i(IC30MueD\$IB 069Xf`zYZJK}}"crlY6[V/x lff60k5 
@S[jy|&5@S\?~0aw^^]Ldy0w?gc+`XHHhikAt|_@,6O`];=>la:=t :'`iA<wKKK ,S"GPC^q2
F( :


U>6Yta2	dddR
+Nl/8lw2mXg@P&P 0_@rNqkeXeFU=+> wS!eYX\<X.((f7B>wLXgW2#7K	:4MYf]pVV.+99y;/_uwwW'55u&0Ol{>~(|Rae>~w	564tN3|46lCQ0
F(  6VJv*0cK``esw@@^VC)454i4N_?YA'+b71t.u>bL,hg_=2s2}f@z+fvGBfo9gn`88:TA<0Zblfy pg%KT6		pg9EX@A[px/=LX f[`uPv~[nd(lr39bS55Q {e@=)55}+W|`;|"]5v?AAAuuw/YnuoC5l!RtfX^h
` nkV<s)P'
JX:xYVVcnkzZ] L+/rEFF~v0Wn1OVVVFDFl~p,tt+`N{:EAy'KNLHVi~yyy	v
!9K~05C:L3$CNfczS6zJ|V|^SSSgkkkco:2"L 6xf(((kjl 1{Nie@EU+P}=I{+(@`&@.Oquuy&<'h	P>o6AF>_~F(`p f5k7<yTYX-]ba->+ )%)uvII:d}?~f!fV9S(Y8~A ~_30l98;Wu;8Cq4{B hv/@]9c?[_\8203e`Db/`g?[6Ol8r0dV,C@4(C:YfM?C!Z9?@=sq|mIp*>~z/t)A#Cj" 1JNN:y'dv3<t+@}}}[x9u'Q#lcO:	@>kt0g,	&xM+`qk(9:co9PZ
f?~f[`G` ',]pj%zW *+))_v?ti4Rl!%-G4CgN;948k`}bwF&y>|~=3jXsrrAs@Z6&===KnA`%{MN|rV-Mf?, EZzJCmsxY]\m% _?Cf
nonQ0
7 idy|b^!:nnoQ;$;h; %\g^`#;h*s@4lmelpq/**J8&&}@?)_-2M0zBn#cD5d3II!G:1io;9b&ZK#2g`<Rm5h2rNbd>zVr;Ctc $F- t khyQ0
9 !q`Kh&K?zo@bBBBoKHH<3La>l7LRp9`XfIVaa~v>}RvO>58gX#_;k-~~~N?~7#o?l#oCf lJD~GS>s4WKK*//~,]=BuBA4Wbf_Mua3<SA'JG@}	j!%F:maQ0
F 4$:?%]s4j[gz7nhW@;rA4<99uv!
Z?X$77h}.@wz]5!Adggfaa^]]:7oZ45OtD1:r:&s~r11O-kfbDbNW`<*~311hggw`M@@f:tH(?~py"_OD|q';x:!}T:m_>>`02`C2;yDBe5,<H`Q0p  D} :`Y&&Fkj&\rnUL06<x_eaa6a6pqsuw>`7\w~;A}n!];Z[YX|y?
ZIgkrz#fulk3;cCw?c?/`:f`gDC<^v|v&u"`zAW48 ,b	C= tN<#t`]
?nz@F[`Q0@ fPz6A
hv
=U`x[6Bnak!_l {Fq<,wWWP5g0q'cMw`a
sVgutuNg14>Yw5LI4y @/`@,qY=TYOg/3	9cj*,pA;lo2BX@!_>
#ay6++/ll`C(,pshyQ0
) !iFj|V<dHeee--deaV?P"wab},cyy6&$$'2aSab@JKKwvv~7o^63fwOto,cPdAs:]j\:
e6l 6k8O/X\3XY~1V&F?h3QCr*33{-]
	!555\/^[Y5;]8i$fZ4c(#^Rs\7ows,><y$XD.'ahd/_im9t/Q0
F( 4gDLi<0~/aDnP*dRNS=0gfd,qNlufa<l&6	]!\3bU{13 ddw|O;mm-=n0CNW^Civ"]K/'Ocmt,Hbbatk}@\	]2il={f4zSF_6l?zlYsMLMJiA6|Z1jfLC0 s|&
iA4H
^mX+vV9gZrydbb W\`B+Y)>V}fAE_Lm;a}5N.L~&V#H%@; m'5\G>sQ0
F @ N33H8p8hf;'5D!@4Gg;*{W ;YNdOEE^Y3gd;wEE"!_A:wAtt=}%qhI'FTZ|`dlmm}4cx!`{P!:9|`_wIZ(qg.'NXc3#:G3227"izf`\[o?$nFirX&A>T _xc`5``:k`z3C__	
AwJJJ>+?PB Ki8fVAP`ND?||' oN.(@x@ % *l.!`#c<a>
F(# 4GV)jI`jjj@8P#(@=DCYYI!rFhPeuAgatGb#JHvE;++3SD933S6'hX?;	tyerebQjp3g(pk {YCCsDDD^]sg ;]:h/(l2c_{Z_mP'9SSR]r$]`q2?DxW{.w`A |3"O8-[2UV65 \)ua:gPGb:.r')\2
F( h;$$?-+W8vG~arn`VNC;tI#q	6m
% 5h7m!V.:
{'Od?Z1:iljO,-lxN.x{`KAW@_Xw:ugN3f"<b t8|Ak?$#~l.3n#I[KMM1$bvN3daf(3(l]g?~h ,,;@VD
%`u5m@'t52g%fDVb[I1R LCc`0CF(` f..TJhI
;wCoow%?n ?[nKXuC:
1;voXU^6S#hQ1QQQ	~Zlnl5kiD#z1+^j'?~_,lY 1.Xg'X'e/2h6y>H^WWh_XXXa3V..nw/_@3`44'''/n[^^^H_yK.b;!;+mRMnIP
3fp9x;w7aCj`p4/^:EGGS,-`u?]VV2h'	B@b":u6:H
+@fI ,^#5(` hH4/P3N9=<b/vy&CCM]{ma%'xO/|3Ik.L';5`3VYN0V__Ofkas25MM?IIIsw_Xc'waa#;%Fl277kjjz0+@AP3th`f-;?a<l/,hpayrb1T73;\Xddda{uz@@(}0. g]LLxv/_0>|2yh(Ae;~tOPv"g+gF(`  1>>O4 !i}A>bHKWW/j-'';hYbf?~,k1"A/nll, ?@3@8-- `_+`VVVG Awfgg mn~qCNN;yy{B"o@Ir90eeemAL<PJZPP=
ZR	i&dh?0l&l;sE6qqqG{]kC: 	[6[@?	1 ((>:igRuu,>X;UrO4#v0KN:e+@mE>s,& @[8Hi'vQR`Q00  D$a ='N
|e)0"%6@O>1-.9l:p$[K[;5kN]"N@Nfa5
grv% }.iii3II]]_``6	~) uA&d7oa.X/d{]B5Bif62UT }PT;#8 atvuPU)'ZeS A+^?{0wDX6HuDI9CYPPx:06HA@@CEEBBBoA',d3@ 	eu5B3V^Q0
FH 4$:odJxO3rvrxy^oz[5370T2dEiW@9WUU&&&	=|P?)=b6v||/Ro{454.'''`	W	z3b\xq<@ynaaql-s,^zi w3Mc&h%K	(e_ONBf<xP	<P8N
iN=VP}(qP33#N5>C<# $qA<J !M	ptt{
f&!W5:Z0x=\N:H8Ym ;lm%OG~=kls$ S%6nnoQ0
F(  D1
v{e@>-*yutMSk8[[jhfF)x3L
?)03oL0t)[VVhj@4Lo2_u\AKyyy?nDg666<:EaqJBZC0#d{Ab8CZn[#ps]|CGW0 N<
`f?aC,o,s!B;0vE\Z	_fom7/@?1?f&"b*/V'Pi6uP83# aQ0
F 44>]4#;W+\v")> ;$6
>t`/~Y2	t;555/P_-MiV-#FCdAa-K^inw`a6cbbXk>t*qrr-5VlZ[[,ds"?OAw?.diiK{X\w	-s,"tP`y27h;_rGehPP/233K8rd`S8=	;a0#W>tK	 2e~2|oX9p;&h@6 D055H}dF
ZCn@a gDe
`yQ0
F(  $1)0#N sDkII` 8 va5q	k:A`OR?vRsvrX|d @=7,ov}c LNNFTsg--WyFNoX\ /74l?4VVf?l?AK=lwt|?tB0^@aUV$r'Oglhc!1YYGC9KJJ>C^k_Oz~zC9B#:e`./a@A
L:455 &d qo= &.9
iw)SQtM9 r=4@F`Q0@ N3)bf!apia]B iveWOO\ee0L f-"_#kDAg)<w @!3{FaN&.{{d]4
4}P3Xg ipc\{idff 0or;Hk[SGJ !!$*ks	cY6rC0|mu`7og)a 8:Im  fddL+!iV0gb`bd2icxxRb~r7M;`He`]'ay9_ `Q0
5 4|N#b-.jH;Q4 5~+00xcww35V
[LyN8Vh[r[~4&fR;;;n58f	@ ~>RnPz-.mf_KK,}a]lh|2#u]B:+Ba)#<&[g##s3P)XVoQgQbP,Ec:~BOg#b!:ZJ:ezL$b rxLj		I55I my+@@^^!5Fj^fUG(`h  fq@t 4w-A1G,--Xouvv2&VRR{9lv luau|e]R<y``g%K ;W@v;&an5B@3QBCC4;EOvaW,&+h09lATj;vlSf  ]m=}UpMM$XS|gFMCa\G=""PH=tA~75hy6-iC..nUTTn<iy6rF> 7t4 gBN3UwJ{zMMItF 6r@~~>[=F`j
;G!`7o`q !!b9:
F( XN%F/PUU(**]...N.t`	Q@5[aPIjh7;s'E81}z/Af[`HAN!lvZJw_~ /#0>;05paA:mQODDd1~w(..m6`<W~!H.WK/\8;@ChzNrRRR4hz#w	<6
R1&*=^^^fo-c;33S=\:C6P0nH=[X
P?aQ0
F !sXW.8 _ 9to'OB i5D:u}llB/ ^d.?} R]vJII=4iR	:QWWe
odtc=g7xcz_@6#3<S
\9#Q]]tu|>X3;|xPgh|d;x'@C;?A{3CC<I/_v~pHMMo9s?{[]Uibgfb
[.bqqC=Of?ll3g,}4gi]3~xXZAZ.exi6h tfpDR.h0t!`kY/^9~'X1\M?!<@R`NA4B7db56cy&`yVv1W0"3t=h1mm+Q0
F(  NYM&|!E_'
@W/_h)h'l _RRRL%x`?TvNYQQ{?~t-ercy71vvN[f(HKK6yJ?73,} FH/o>{6nkfD#<+,>'|)?ZA!zk0'>YXX`iO?z$46;D_c@wBZ>5c jl11WS dyPVdeii{@+,Y,a+[JC9h`h+`^b>}-gQ'k%	ZohZHjdq/_lvS#|)H;m=`Q0@ N-m%N3SX4:"zwTA&3!lV`puer{A^vk  k":p9yyy(`{(m`N>{c?:F^^^Qhhr[[[q=kl:d_? <
>t'*:@?dfwAfs	^NSV>$'"`t,iNH'dy/_G:XyYKKhI:?>*?ehhmXeAKx/_CWj8LZ&` f/> X	<PWM(5ZWqU ,9`c
`?r~|0
F(` 2CrO>V^^]OiK,@'ph/AB>y?"Lq	:4{pScfyMa3]vf5nQNN~m8WL {ax99y!!!v?d[s2P`ueI'N>AnN8=(^@| '4(sX4~Nikk2rG~0111 ?Ws@;/_qqjj`mOS	0[}9\38t4B+anQ0
F  4d:Xul;o'O<s=5kB-Z`GM{.\Xt3d)2Pi Xg4+
loUUUZtR}}o@0P
JKK;@Sm|Y^|52}AvttQQQ		q rrr;z+MLo<q[ng4QbAzo8e==^!/QFm~p+@3
qV&P;`}AN5
8{7/uwh	M
W0Fj
z	Gf#2N/F(`z @Clmmyr'J 4_rk8FTA3~8qb:P $iRVVlHOue!Vh\,d?#h%%II)3);xyAWo
2tJ7v+h h)6"ynnnwAv '  ~M6fv3#w`q :bYRz)b;BBBf)#0.~]JW,?psCCCbP
 0W#L:n!`0mxwvvVSjvIIIZ%%f*Upk ',ii'MQ0
F(  #PQ5"al_-r{lkk{u|ooo=6n>]QQqhv3UF>!KIIiRjjj@ooo>lF6@uaKA@P`i]if%S	JXC6siM'c^ehhx$F-?EU7n( |v4qmC)o^ Kf(t Rw9Z^0aBi=h(^Wi'lO3="E(kjj:)1:i+,{N)z&FpMu(05(`~ @CbZ*{8VKy}	:N=R E@f9;;3hy;0>:z77M6]unq>~TwsIIj`RVNzh95,/u>air[l<	0
d6t:b/7tX`56~'3,X=g0#F-KW8=,C<311`r~ ;srr&PLfZ5;@_*--cccsmP@MoneCCMQ0
F(  aVO>!8vX3gn
R	lT
u;wKIIQ^OO$Zra[n1#/_>a*GF} N]nKNCT|o.>>K62tx``Z`|'Rt?%{uIou}%RlqN2@uzCd0c#XC3	^6A^ApJ~D'@=`ce`8|h\nSN	?~`X;<sK@sq)C
10WP8:<lni,//g7/gH1cEBk.P3_qqaNooRiF9L+8/(K@dc/_~fqgJ*F(`z @Crqb?rO78;=={6;+&]v}xYVVaO>#F `MDPP~:hvB~R:X4uWUUdu KZ>|F_>vDxX =knt`sq:F,,xn5{-c au`	60fkUO}k0;D^^>7]6Xv=&e>us7n?{?=V?ma[9.A^/;f(` @Cz(9bFnpuKklZs$f7`CJkwB=?wQnMM?@:.5[zu{'lt9rh]P@?O>
tPoAxi7VAh	.[}sUTl=eeXXOGKh[7(L##UfX; $.$$Ls"iR9y$|o kbRVV\sgAmi&9t"lp,va{==`Q04 @ N7`G/#T]`vI..<y|xxxDE9##K{#
thfp~MP	-[FFF_|PG`c=+@ AeH#DqC,VKVXfm/4:|:8k[CCs+W.v :8[<CA3@f:mOsk3-n,133Q_YYA{**2::fko?8@+`C3v.:L3sQ0
 !Wi_B>	ybB^uU3fHL~fN/u OXR/_200p/[Af,e]jXCFv3l6dHl&7443lG,:(w_0H\MMp1{_A++/r0=Dfh9]RaB<L{l	Zt"Ypf:::>nwzjb vO	-#p<,t{a+C	?4;G(`h  rf++W9	Ti]vMgDFF COt][yA9nr/hvzu	2YYa$JXg= h  
hluww/\~OXX^AW(!|! 6KumYc7JJnT0}hE UUUMbbbAOIK,njj <n^cnKKK%aNC!+6lXGuuuK%%%"][v~b]9sfS5(AbCXl7<V`Z|Q0
F(  \9FFuKqf)zgVX}CV/84C;$9::>>}tn < elv6[	[K@.SM cDX.[?k8Y=v"@aU 22CGE-!!admm}}3,o]PyNN.2 

@[@m?vtt: suwssBMcNk>d="jjj`Q0t @ #^(>@4=IYYY	|0\-((|yKk/Y~z.{a
u"uAN]rejml4m6_-;+H`36FMM1| snU`]---.[	{bs`]n mwA}}}e	7;55u&(oW>~O>fffvt=$mj_5V[k5+pn2
F( o<8A's&#-bnhi03h{:Vg3n7;;zRDg`[x;#VF&@Q-%5o1'O	iljm833GZod`gf?3s5j\``d;|r8kh[@'ON<	*+8`~'O 9Y7
*J,((hddrguOOO~ee%'s;_@h9}[VZVuY6tF `}rwhN` ?{N!0a?103B*&P}z
vDRIOZ~cHNk8hh+:::?F55T~	t71h&RY66Vv&f&3f]\\fq%m 4(\;mGXjKc7nXHMs[K,,,,fLnkkr0yjjjERRlKK!9 4Q0
F(:  L%`	yN<.:"?Fjyua@@	wA:,D\n6fa$NAaaaaK0 `I&e3=ctA ~uA Vh;9oQ0
 !y+_|a]Wjp*&}s83/DEEM`0m C/u=f)ig=L444n[>O`GQ<7	jbaa~~4F(`h b:A>y>2 lx9rfFhy&p5\{aCi@qp3;}Afyhj``TILQ0
F(Z  l{+a]Wj/\`C:`k7oD2m RdWp177y}VV!af9
F &O'&>z?(`1 @Cl``p>0h{$A>x:tq4G(8zp`~BMuA 4_?8	$:}bv7h'<MQ`,8y)FfQ0
F 4d;_.:F8|39st4G(8py#uagXus#%l@g ~OcuQ0
lUl$BrkhQ0
F 4|tw"PQ0
6_msC;(wB 
4#%|kh]va{LC	r=MS{G( fLgh{ $$8=
F(C 4)B P|F}7_-02|GG#)O"_7i3O52F(pO'hLMMO(`M @Ct}bhv[!%f !yjq83\3=i4uQ@_0st_~`yP@@`	 i{ <<|%5vv6W^]u4G(;s F>1v ?effNi}CSC
<CvF+~_~OMa`,^8s+`y$_{Q0
F(  |m77.bfAM`c`%	Q?
Fm|G2A}U0Osx4(p2##FqwU';F(eGa"_;& {GCnQ0
. !iNfa}`;wF{u277?lh,]Gp ~
js4Q@l~V /ga4PDHH` i8x&L>u9
F}@c0Qs(!!aH/N0V!*9-Z8F(8yh:6+`A|#u(` @leesDAAaA k_2`l!4k@"/cKP?KK#9hl,=@?@/yFS(UUi?dC^b:H1!7
F(C 4+*wt)N5:! <1M`45?(rAt=N%.fgx@PHd@;@:&'M(Mq`o}0Lcb/XXY~5-Q0
F(  G@qrr	;Vhh0!j6c$0
F d?P>aXO]X$l3004 *@5FG(<qoa|!6(TxzznQ0
F(  M)66vpE;`u7W8F(> EE a'@hP52! hF'~i7o6`5l{^f5S  9Tl>=e4F(` bNqww	:`P=:*8X76F(Wgaa2C>
Cg]138kft=FG(2Xb{![$2VZ:Wu(`} @t@EE++;PPkmS5Bp	GK&Q0
,Ydsmuft7A3 qyyGoFC@K;a dbY!7
FuysRi/lm_ 9`<r`Q0< @ 17lu '5*O3F(X`A0oYf_`[%@c];y>QP0:-g P88qf7
FuU]JUc |hPTThhQ0
F  4:W*4a;!`dG(,;wTAy4a wA vx hKDDMhhC` (,APEggghQ@0wX(#cd29##chQ0
F 4:Z?<<<v`AUnal{G(={vP6"!llR<:{4__-sU5MFCoK^k?26 \e4F(`  brus%"* Qll6h?N<eq!$1
F`vS<` t/3#3'Mh}q?|;L(lAYL8qQ0
(-Hf`aaoOyz"(`/ @lcct)!XG O-M`^p?XJ-kC	;r4oo-{ 7j6
W@<{LzV7
Fy`9W^7XvUp>;t	ht|ss` iz,00p6XcgO:eizd1
F`/_50A4lECN5<A< 2$ lmm	4Pvl0zzz*FCoyRyv Ay~fPDQ0
F(~  mhe/"Ywwh#s3[
YRA8BGHKK%((073:\m7
Fi);|Dy@zz` i8{.**j//l(NP%9;x4iQ@<3gN}a9Rlahw@PIit#@QI j7X6!_6g{hQ@teYYY`8` `yQU(`? @!eee{+DA +BYfe]~m4yQ@[dYf "7(Fprre&u],|4C;67
Fq\\\sgaeP4@%  ?GCoQ0
' a?LLLl1{AwN=]Q@ aoZP5(a3{AXEENUU#6:?2N?C:lY}4F(6mo>WP^B4HH\l` hwM2R ALL]<,0DF(";g|o)	uFA;
GC<P]SDTTl	6S
rfMMM7
F2lWq`e**W(`_ @#b|T!rU"kU9DF(?*h$Vff#FhcL,F/  /?"XiFtA3d`GUi7
FvPUYCE=A>.f&F0fdba` hQ	:e6|&hTI~/6&u4Q	z{{>}CaKa1 `*SL
All55[r 3[lIGCpTjR3y6Z"	6iGQ0
F(  FL955u9tdF JtshR fv1X6jD[ VvOFCrP[S2B  qt(h`oqD#P8CJKKGCoQ0
? u	hX	Uv wpdDQ/hw4Q G9sf0&fx[A36Sx u .z=wa7o^njjQ0
 6t6hLrvm?ArXYYsw5`Q0@ NsPp@HP	syo3hdqG( S={pD3lI6h@?~k4xv#o;r)#[`1LLLf/"/1V^[:`Q02 @ 14O4OPPr/0E$1&{u64F(-C\%z3lhEh_QQ.PTR2
qF>
 _w!8
F2t~aa8 0
F(# Htuuu+!PT1:>`wf`w4v4
m`` u-z0jprrrjA57`f3Ja ?L/Q0R93na3T7H/|6mmm}$77hQ0
F 4";!glmmEj
vL++2u}eggh4:::>|4	Q	%66#!!! ('`VA;66m
04GH&Mhm+]@P>m[8FG(` b_dYAS02*N)L ;
sF(I 9){Lc`e WJWd@:iL)!H[`db.6.a>#!rAx1nsf`uQ0bM\ ,@w3 ]AeP'&PUTU}Q0
F(Y  FKJJz3Xg4nX^;M'hK.M>`$]vfAf3!y	4sY>`dael/:HN3g`D	`K"R@	HTVfQ0
F(  Ft9..`xz,YP'd|$ZFu5g=}vkbR&;[fU3"<{,::zP/2ABn#y?!8
;hoo}v,ly+(n ]3566(`L @L#= /^Z+!.qc|00p/pwIhWpQN |QVR1k4?faf;puA6(6~=.WN1I-YAr6h|Q0
F(  F<<#@463i
wnn.GCp7p-|o@}}}80j1C7:rA@!5k5e4Gp3gL7oN33dllP=*@H%?;|`4G(` 4B	P vr&X|Z0X\~E0tvf+P\\<a{GJK;MKW0Y ,~`,~A Rhoo?~h(v8q"`'amI@q!9ZFCqQ0
F6 N31KKKYX::%ngVUe( 773fY.*/(0:  ;v,l@>@hp4Gp Oollll2hv`!gl_l_whBP`Q @f$0i|aa]N2=	=MTZ-^8~8
2hkk^vm(1i<b`@\hjjX~hs 'SA+h`wkfae3 4|onnj4GP=zmS@:PfftOo8
F(  F;~-/uGf~UZf301hW(`3gLadg49(r
3lF]@oh**kb`d= ec	 4O#`X=DiQ0dO	AW2J1p428
F(  hb	q'9	X	[nEs4$GPK,joo3[Ek\" Xskk!9A2a32mG09Hy6gqF<xLV/#a_gQW-Q0
F(0 @f,`N+ckZXO;xphH [cTS]l\Zua.A)?'RSg&%[z4<m6l<<<F'OQ0T@`sL@L`}=3d`;wnh(Q0
F(@ 4i\PRR	p~S| !9
3sj~~T`	<oDf#A}{s{mm@CC	
qy6 YiP\NI@3;vMLLThHB:>mbB_=*` /4553`Q0
@ v`# l'gyQ0m[4F$(A*2`yPFFF_4C:Y *@q]ua F<8`v `d4m\)YEfr?4,hHQ0
F(@ 4i& X
Xqfaa_[eGQ0,RRRXVG `i6D$%%75 `#//h>;28e*b[8<"#GCr6}>Z6sj K4;4x:!&:nqqI`Q #1Wtk6N!3bfa`ae=4g''9
=4?:<ANr^&H7ct;94 ;Np0q fN[nChH O?o2l&;jfQ0
Fn @3D 7WMMM@1	=l`:qihh---3|	jL:NlVi:Q9a``{a
h~-lHv-P-<(h<tJBV6g0Q0
F(  hL$ P0Hj`21@@e	~]_?duhh LXO+lv1wL
CG0X^~]A!	0ID:L;A*2[=s",4K9
Lz_2,BAgFEE%eQ0
F(  a4^/_$w]v`GY2Ux#MLhzsfga#H^QQz44keec*>}d=B;.\>$!!s4TG=S'CB^zU<:=~z)U===%FCtQ0
F! @fg(wU:?,:{y=N(5nu?-A`A_ml,_-;@Xtty97}C_Al:qwv-'xJUUhZ]v(/0IV~,3:J&Nockd4DG(` hLwz2,|?\qSj!!{FCt
8:-plZ;	!?""wtL	dhkkwoT@b66pyUl&?~hhhp4TG-]&Tm)aew'r9ciHyr`Q@, N3 {a/6`K<	;Y[n6XIIIQ@-pIg^h=l*dYPG0 {"4,lUww@^^{K|t"4yQ?+<x@.(&(/+:uJ@a`\faaE6O(tvq;`Q0
H 4z 44V
GFL3??F5s*zI#p&v~` aN4++sFCt;5T1vJ`lheW(z#`3XYAZ
@i...0TKkmmv1`Q0
H 4i

=s*vR;@3)S!:
EEW6$M`!|;l6[~UMM-{G 8~TjjwxAV@ l1rsoooP-; 2la:tkq`eo74t{zzQ0
F(  ]M"7oreq-oU
#RK=s^*G( :uJ88clE8dF~*2u,% >FCudYYff:MVVDNg hF[n5kk!;
H'NIdA]`O I2*TUUWtvv-?
F(l @3TuU)Kx6NP=idBf899QB;2R[B( Q_*WfA36_+]:
^<G`+{%4livjNXZZYj]hb@xXHCXY`a$hHWc9xoJJ*FCuQ0
F%  Fgqp:r:*W&~R9 onj~O/c!;
;wn1-]$5c$6HILp1&f&r}--mUIIIGCvo'g}w`,/`iy:2O>e1sfE;
m[7{zzy"33[`32(Pqp{n0IPPhtf`Q0
F  Fgi 6lXgPX7vuA;LL
v##)'N=s UV5666fF&afJBBbSKKKw@XxPci
a[v[Y+`{![Q3D8eP 1!qg~:6l`6Xt<t+|P1Q0
F( 4i8rLZj?z*wlP
.I	Wf@N		Y7ahlp-]vy a34% :	qUM466}7 J}'c'sr!;+}7;WeVl:w` 4shQ0
F(& 4rr=sVzllnjT:@v	T@y`&UUUg&iP!G0}}}E&&foGCwGW~KsO!r`<F/:tHNNw:@pUS}NAAEr[IA>6'55mvCc`Q@m @f)voCP/GA }Y4H-c:'<

gEF7S&O*'hfQ]~(v+VUJIIQ@,&.!~"_pV ;L(i6`5,V>w,FFCxd4+@O3(ele;
F(  Fg	f,_$V lfyX7 u;vW0@Dy9QQQ33-+W|7t),(uaf 7I3_i4tGr/_N=IAAPTqqqec8;66v I_dIi]yV+1A>6&PF;{AQ0
F(4 4:L'vW>}
aw6#wz``gPt?xIu6VW'#hB
lU,:2ZZZ(+|44?<`Gt`~:;{dvSNii#TWy36K+7X	HVmdlf4G(` L3}{&O{Ac>9%Dk(?56A4~q_tL<GGY!6m\k YQ
Lf,"_w=HF--<
	N1io_?zB` b3\^UHzU ##6""jiaQ+x>uq%`+' '%%ekFCxQ0
F= @ v se9)	Q	@:<L3@N3  j`2hHo9rN aHXDY!0~h(Z]vtuWu#	TcaprrXYKOhii]	
]k42e5kBo	Zp[}6e8T^[[{NqQiP`Q@/ @s:uj'OB@|27F(zvwn\kaa5l{w*ow?|s#Z2X#9A
lo98VwN<
h^3e;wva 9Xj9yrtp@D..CCBVf~7nhwcDl7dMRQQ3`Q0
	 h<s}=tE]a  [qu ""kVgg=x-te{~	8@8JHNh!9633srQ@_0g,Yf>z(qxh'uA5LL,Gttt.)]=AeKqgj~UQ 06LII)&`Q0
 hy'3'~l	<ObDa	?|F,<qpphhXda}a`X) : 6	k@:  @jaq --*##chr$8un,:W!o1m2&QO*V^6@\;wn2z |fspppss,fQ0
F( h<'9x`_l9.4V@{AQ^gx!{{YWU	\qc=;|PfA|7plNU@;43fO?!WM+l`v!6=?VqX:1  `iB {Y(3T68#490	]8;'ohQ0
F(h @A:;"G7P#`YXv,a;F	iin8m;,uV==?kf-Lhq]}Lihh=6`K.UTT_rI^m@q_@;yL@"!S3c.:m-_|)`&H'q5(@ulpy_;#l}TccsP`Q0 @ v)8}It,lKH	?*/+37gxxx]yj4).a]+W>~z :g$	*(jX<"^?2aaa+sss(*3
}#X3y	kDypkhS^2G8<zHfUMC7~ vt pQ0
F` 4i`M:/^`bq5X`3$GXihKsssPGla$Wl!^	8Kg#||`!n2hplJhF''{?

w.32X	L6#o?u~o+PVVt	5|NNX\k+-D8f111KTUU(` h<D	&OO' qiT#$$}iffvwC@JRw	03A,=,.``!0meKtOuuukj`#G477^qU6 nE -2l{|aelL*UkkiTpM6}Gf0EyF{`7BYY*--6153`Q0
+ Nwnd8qb}neX&g?asUUUo:bo2m1\4cliu69Xx@[9k4'@+4::A+ifX}m+4#+gXG6	1A"#R2-,,Nvvv}8R-{/\`cy`G<X@6H	;hEEA!Fs(` h<:8sZ22g-Oe `MXvq?)`mMMkqq	k8qmW\|aakP:/)Fq
;v;M`8K[~[S|elI7 "h	 9qq54:99vrrN>7>~&
<XB3`e> +`a'?~ #dYNLL>0G(` @!v[|5- ?HOCY<@`Dkd;s+`W#vQUUaH^ufMR\zU@?|t@yv0^>
7l	#l6|+!wwIMG'#1cI-VVH|6 XG9<	XhD|  <p>0<%((VAA]##3i39{og>`x!R&@Oq?eiJpfyOAAAnnR`Q0
 N0 ;vl={v'@:ex)sGY:} -q /9\vSyyY55ML:vK3*i2;VpulA Y+&p|v
0]\xmgrr<{D0y++0X;;6@?`|H~cw :ZXD;@~SQQ!&&Tiii]
0Xkuz.\0|8S>2?X9>hXE `t9=hh`Q0T@ a(Vm:^\,[&M1H m2X)&'<q(t,@I@NsEA0<#E\]>
dx6tIF)tJDTU4MKhKt_v1|nr$I/"GJTX/3yeqV95W>H uzXetDj+\~ig-u\87\$O=bVi8q@#x=CL_asB9<74kg}E--:]5S%5gi~PC90#KIVL*!.v?[GC1p48ix:<uWYH?i[b mRDPDU EE+hw`uZUA_AuDzjUh*xk!TO|tfHg7XWWVR>	?8;(g{`Jgiz)Sg%}&:ou,\~5VX. %{\F@MrLS4_y'WrnO$KpX8%|+igGyhrn;(o9 
;>3{-/32W v92eSA3,6C _r.T'rCuXGP!X^AmL##iuX`'.NO:jb-Zg.?~8"VNe3JFYF+="G<+ e<@o3/@P#^~CCCW9;;?M`Q0
 NK.)-6KAa#C`@4li	rhPe`_jt^y%$9~uL__hwT9
FylgNe?m`^`CiFJ/:y1)y{l	;A@1[SSgij|M`Q0
+ N/][pa-[|A{EN2PL 2czc
})P=L(3AY<#'_oLH_ o4Q@=~jg^zC/m@21xQuaw_ o@@g(Ka+jC&&zzzM`Q0
F NS1cF'A{m;q!9~9,1F%lQCwbv5P/V_XZZ=
F@__O5k>| Vej([u+ah`GP crfgnMi`Q0
F N( -[67'+:<*3+X.b*Yw8xXYY~g4UQ00+\6myeyz<|`e -fe~X6;xZ		AAAkx5
F(` 4oUV>|th(l}6s1,2tfZpgo%%2:<
F'NX~M74>~,?N>*`m8NPSSvQ0
F(  h<
Yf~|lL6 EXC//~>??GFS(CWam^{u~tK;<@mQH\EEQO/mvvFS(`Q	 h<
HC@k|h3>>OZZZ<<<vZRS]8
F0ogG_|)+XX!/g|faaqg0
F(` 4i7;w?{ ?A<(x(61f~e4;1+EEq++c.`0py>~Z\,@r	6k[|BG+OG-CBlRkaawW@g-2220`Q0
F  F;&.\0xU_|)+1`cGq?xP$).>X@|L{E?QWWi``pAGGX`;wltu<y"LA TX _B|
vFp[ ~%+@[[*c|NAAQ0
F(z   {g EQAw,*wDmEHY;3f{eYZu]{m:M8!Mu1?N{j8M!=1{E2 |d],IEs5:6j#coCLFMQA4mm>36R4~A\        	6(   FC4   6~#@    `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ v@i78O0q,h%#@  221+K)` [ 14F(` )))>{T@23333022Tkggd47n\)}}KAAAkw(`J@ vG(` ]|=Pgiw?;&N@9@ZZm@hPVVmeeb4F(` oF 1E@SMzI3EWubm2 Vfed=fBya2MrPV</sf.' |u
N(`Q@gp%%KD;- y]


GC;:d Px:illQ0
F( 4Q0
F(t vU`fR >f5t6hTYY2@]]tl_8(`{nP`Q@ N(`Q@gp~hYDD:=|@{/^3:(5+G(` h<
F(`;w6Y[[/7o;?[nJ;`]gEX@\\BM`A/_3gNh(Q0
F(  `Q0
F:][YY-:uj'l7oUTT7P'OGC;8}-Z{5?g/^}c4F(` htyQ0
F(30j>>?7a4$SSweeekV^[z48k(`R @ vG(`:qqW***w/~&>>~?122*-\0~4$MM_pjfAK?7:`Q0
 4i`Q0
/RPPx@I&M{b:t,IZ+(`b@ vG(`:%%{0{Rf;f5~`]A:*`Q0
 4i`Q0
;e}-(( 8y44III|}}<yl`Q0
 4i`Q0
lmm<-s
)z544~iii]ihh"##++GCdQ0
F1  F;`Q0
F s-5`WA{?~( ^i44aaag\]]angQ0
F( @ vG(` 555IKK?E^''}w@9c2l3(^~meQ0
F(@ 1DQ0
F(`hVVUKKK+1cFhg?pgCGCdQ0
F> @3`Q0
F`i ,,l%(._3o<`Q `Y\bn"Y21@D	t$  ACN-i+t*\j-Rz~w<*\.ZmZ%BHx(TU]1@(k~=E xYht>v{p1hE==N~7Vs\'uze@//Gu'I|7/:)\Kx1M:qKgo5vm[?MV|~7AOc+2o}	?4GQd%Ir~{0|wwwi?il6;uvmo+]_L8			O|NMM `c`e
0A	
X3&%%UQ3csd>	a10m5-w;???ZY`Q
Nao2OtennaF/;@< g](=>vZK/W^,222J;lQ<G2!'N*X
x85a8r$?*5;hmlf?M6zaIYYE^Z`jG%@y9]_lllCA(.K5[A;W\VUO3|;d;$mcW=L6HG(xpc RC$4LfR}B%.a!K-m ?Er'f
VGEE5x'PiHR+]Z!N9]4REL |s
??YAG<,$|BfuA:G(r={MZrt-r]hoo=rxP3,3q5V:wZo>9P{twh/jn1{w]Jmw jg..322JKqm=vWf3gYZ"=PFxQ<x1@ 9{{{O77\D"efnG#Ip+,`j[v8I&yQs1	,Dg/g&	}9e0UY3f>yh:H:0QdLMMSLa_;(xw	a.KN.~ n+1  ECgc+*K{;\~win 
lKYP7hSOWI)K![FBZ%,uLn@J;Tc9h2R5rP<ZL6uTven}x}ybM.:)@SNdn9K)MFLm4 uJ%^tv8}UJ-Mg=<-f7Dk}@Ik35-X,c^2[=FX	>Ohtt:2+6ql}*seKDfgZ}_VqOp.j[|b3rc=e5?0[V~}$lsG3<XtfGy|z/
+ =lJJJ^AH?B>b+++S(**r
p|`89t) Yry	;x?0'??y@v+nln`}~)?{,71X:9s0Ng2-U-/]r@'--9}c6,3@^^+7MLLVbuvv9kl[A'h'''WyP'?h51eN/gcct34xQ<1@ A
;HN{:=p*\D:5#f !/y-HE`F7=o5JMu};86~Ycr<?B.D*SQ:1_D)NZpJ>w]'hFn+UjY&@c718^E.2\HG;lm X;t]a 1>ax5l{pMu>mOidl	$,Se)<EqnVM:iz'a|}8'{?/^<`lR(,<xab^oE"&"2?{L0elWD$f&E&B5zsTiQ|" g	#e7DAz\VC+o{
qHvc;b >(4OvB	~wmgJ#nf>&
b@2h{GWz}R?r]^|r0R|oBL\O{\ebbbbbx<`UhfqS
nw qs
:YMJCp(}'xE	F|/^9k*dHLaXYusRMgq,zm,P0$IrNHd_yo,"zG_4q<EUf $9tcJ m	H<.H1w17[)JBCiVm^jR `?zp^Pyx@a`Jo&zl_*;\8oa>+2rxXZ{9;1vI(AB^Zfsv.s}F,YS N3xe5@>F"fi79sF(::z;wT@Hrq`
hKKNeXvsssM3gN*h*;vM3Auc:a3F0Y*1GYryXAd#7^aL#l/^;F/pC...x:;uhLGG@K-N}5?UJJJ 2226}7n`g\e`K85eNrq#u>|t;7mT:IYYhm9
{zihH-u`P1FNxF|,=`Q0@ v%(M-a(mI$	7s>zH%a}4k@p,@Y.Q=KdY;yr;LZ
kE.(rOoe2l<l:\EzBDe\GZ{?L{{92\Rb#8	ftaucS s}@$kQ[- Nk9Mb^51h44<}\.o!@:cm/vH's":#Pt:fy]u"{S+B+S, ~7I3RDmR)4Yp?\;[tX,>JgtegE|BOtc,Jr]t&sbQua}B]<",6>`A44:684c G Kjc49I
vA7:68IN{:4{~|{4;Pa/1O@"RLWrJ:aTmuS88}9^T(z-]&H$[H& W2f0Nk6IX%IAuk6mR0mg0! w2I5@6Hu2+a,PU  C@ j4te+?<ND^&rNc"T~@^V;kFQLPiYV\*zuVdr 1t(Q/:)k^<BayQu.KsbK{!Vsi.
]c'!:h\A[Q18 uj}z]lBNI=v@	~Sn}Vz1<sO_/.w.Q/Ll]
B7q*SPf9{	[W)NN$8^T${.CNIAmk"Bj	q:zS\*I97t[]7`='ADV/<C!8~1x}/cTAn%zS\=,Kp8,L~Fw6mz][Bg(,+,BEU5R[q4M+S4o8182n/_?~aFR|~m>Nfs:=snS'VP"Mq5ux|S:(BcO&-qt:vtr&utH+kb8Oy^5wn'G[=kwn0<::5H#4r!F;@lmmcE6LE]	l(T iiZZZrdI<r(w"e <  0e;;9@gWot2O:~7q5;. ;'I'P<al:	 :w5/c4.aP {U@u|u` :;a6{,O3<FIGsqw.
n>{P]|i.u4e>c8FBq_c #}pweQ@~~~&@W]Niy [=Jw28vSRR*`y9aaWbbb>sAw@3/,w+-[h; g=(x}wI($ID"B!"%!@h??"!WB7IR"s9T"(A>sW$~KAI.q|j+^4M	nc>%_Z24Z)16mh{p<dYFnLB.\9J7MzK" /q)10GE$OpLqo$}UM^w#%JKQ+$SlJ@xx5SwiP*;G$Q	8F<t4Gu*Rt:uQM`L5B'l6[vB0
*2z2lCX<|)	A~|x<^t:=bZfx<7s;gd\1f_D"=zLR9Ff-@g~eYC\
Nrnsczfi7 Q:G.HBx(dOCC$u<u@	FA*,$:?49B?suM.sv d?"@Gwyh^A>:/,: mp0KgQ#e,:"(ZmF*:{~.f(*y<'t)_&
f#/ MdpXaiIzmZoN'jL|q,cD"\Uy`FQ A|>*KJe.|s /CNq\8JL&nAfPX`2lBY {.eM]gq4#9^dUL6`\#xn+$]aY4G	Dp}`ym@,~wK m;d2`~P{)#Vi|~0$oW=[l ]Kq0h:!&S'eC"Yh/h!AZAp`(u{p}yNHhlwh|`&	BM0dYZ{e n}EQvxH$RT'`"'dsUsg
C ?Zi'.cho|*`W +Je!}O,\.]	1#t}Qt1t:jjiuP6bEh"GY0gD0-xHLbqX}5v2<z)S]|8QUUf(~a*|L&yO^)Nt,L[lX,O_ G$QnK5mA6t(Fkg0`< h03>~:0k* M:ZAe p~3PWqs%}AC' m=;oE:=;SZ$Z!b!//w*BQsF\zhh	BA|.B	KC4EV@WN{#*;{fjJ|pJ4c/x,^0oa~<c|J8Q4M}f<3Kc(nd5ou"2Vs,xN8eYDg3l_UUH|NpvLw:p4fKOd4yAP<L}Q\GX+{u]Xlf3sd|(kc q|-s~9Y]!,51+GqiS|{Q>BMyiwxn|},3;ymX@e)[} a5$`'2nOb>|6Qk,k`hb-r{+MDLm/#Gm`~;q#--6	4s#Z#Gl@K}
g%<rC.'WW 0Y9g_]|9TfuF_
lDk!JLLa%<dZ=m4d;@M8wC[2p83@@SS[<>5 6
y4ljjJ~K-
hyW ;vx{ZA/;fF[[GVVt{{yg1AAAVD.#_m 11/L8!<[q+a`9ih+kQ0
> imat^eaann~D+**> FS8w\u8@*P)00_~Fn[.=`cl-`}eNB$rC|lkk\dI=j'66D-}<w \`X}-C_~Y2ll>rHHHX dAn@"EWSSbF! ZzO/lO5Q^%waed;aKw:K<v,$RSS+@3111KNI0w[[_z%D<xM-xN6(U?!%$$t
EEEA ytJ[len hwS 0a_' "oMcSLf`Q0, @ v%(
CD:H6D?zc KAP$KAAih	OMxg}y|~4O	93FT| O> dS
A (NbT;ZIu:zjz]o PF?J 
T=P.7NRjm'DeZE\F~bs_3\Gd
 gh:&D"qAdY"! `tFWo`0"gW/#^)NI37MUUdgIB s\d ="-{W+wN	-,z)X,P($6M5Ux<^6"p84-i4&~x0n^*Vk; {nwXjck !VN:5t=H*:Z)&WRifm}	ac :B&n|q0f\9TwmOG%s{"Huy	7^Q-..Bk}#k^t>i6	,\Fvc;<w?=$y X_'u3*daa1<ain$iVQQff g~
4dccCk\0h13&y,6w^{qc@4 -} /,
ApOsppp',-6&`9L<
[`^0sL1ij;ssof"09P8LuG3{Ai~]e7}pFQ<G (*Ch13\
D6RHmW6D
&A`BE\+	P:Gl==?sIwZ|;n_CFL2|?^%g$_KmZI 9>ak'zlqo4W/R;h<Z}\nt:%EbxtS>~vyj9L~^?@ay*eXmWjUV6T+:MB7RS(X7r 
}G26G3dGX"BVyXi{P@ -t\mbpmr}DC
)HNpa"dt|6}P
i{n4DeSjm==djS RJV|>oBH)mXH]R)#X,fzrrZ[78HY]+_XkzoB1J_{X3k~K1t.j=H
6VuzwiS2il`>
~z>\RTl6f`~z^~O}{"A&,
afa~	aomm`q3cK>+3tMlT6skvUt}/<5$$}tdh-}6Yl<t5fL$.@faqgmm;&sttMb>j62`9!d6hV*lx`iF<%  pBBB{(`Xoj <m40`:}40wv=|WX?'y9mA3eAAA MDD$TytI611XV-/3 \PP-dq"<r|AV+All(c;a<m40h5fjb=(]:tH
]zX1P@'#Q<G(  {g!#"!lL+BB!1HdiuY7S 9NZR;$DGq|=$hH8wOd(vqySl/ r\y(q]Ah4
'JvIZmH!CPm{Pk cKHky
L4aN/]JtLUX<_eBqes4sUUssE{``[[Hu@Tj/(6nx&3~HFR5hF$IB<-NKu^]REQ<Gh<mlY~Xw?bMZ\L.G3	&Ll3~`q(jm(,%[%<PP{"La5-~Bau<.Z,sn@GPy=gY;^]Y6Jn{jMnv:C5-!=i :^D,yluqiBW""ZH.pH	\,^Ye.Eu_a%z$7BrUUBIEQTlc">hEi"iNl@d]_ZL<#1]Y;D'I3`x.s67APX
8Nh4
EG OY2oj-Y7R"LO_ f(I
P NC9Il=M,QiR%=NA~rk?G?AXQF|GvIK O1P04M4		lcP5<;WIXigLf,Zz|{MR(2NiC7*'74^I5>g<7_Z9_u\I3ajw9;U /)g&m.Xo:Y<eoNwQ84	v@`f0v2 La+QSKxv6M{]=nA~j]g8?:lA)
rEQ[y4cUU[H)+%4seP! <a^&!daxtl{$;]L.TyA8CcOklam6Q`s Pu)pBPyl,dQS?~?HVi\K7w{gRBwwyp*dSFw]fO2:0hV3iSQ`:888~`Q0xWUyX+xKsTAB 0&*!Hb hvW\f?rRu]Kk$k!`
AxVUc6TQ3s/Ac)},G?$xaeY1TAd*X%[2I7	kXSs0:US* mi/^WfbQS@\ ( k=qn>ys-%IJka>% tJ@Q`GD%YJu9{E2H%2&jr_l\EQ_Kux>|9/ {gs D2a9[f\m2d#%k`E?$C$`7j'
5zBV
kelTvY;< _.g 6Mj}4GtJZ	xy@dQ,9=[6u]?Eqczu48zcB= <z0M1r4w[(^^S@<;Y!z_c  +ya+	txKc@_Ffo-8nSA+HyTjL\{W@3C-S!;e	 Qtf U`4&MA.("E/)k63)7%81.jf(i7B+%p~1"\M`cb3cl!nCK)kJ$`,!)fD<Ym\bW;8r~5Bz)VrVEkCQJx75;Ys.)$_1m15f5_X?In>~ZH3sciT=W3:a hic!^&0bPqOR>/]z1"6Gg:jUeV'9;qF<
(HXuWsz%qP{2UYwozfh|w`m=RJ+>P5^Jq])yxs%|"0,f<~YJ;3"A{.LY*WI3p#{@   j3%"h6L"jF&zXM=5m+VxvZZ8jWkMr
MDYwRz}+H=u%;9eyPkK"	Y4@ix[3-j:WfxUx~w9W4S#9 }LGOK;b_vM%@-jNJ6l' {gx!CQ6`q7`11_BM10'I_y}jj!o9P'#M$X}&KO&@^+Z!FDnEQHUMXWg H3z{m[M)1f((L~H Ro :},es|q%gU_@ U A
fp%fpn
K<CLX/=<_ X:OH)=Pd:>hU'GY!IllL}5! EI.feWeoXYOy{V!09WE|1M@<n%z=NY]%?kkVQ`k`0a; Xp4p>hvv?kXDZu'nhNdVYj{^70%{danI#SG?4JWF{DDq&{u$y2h4	Fy`G4CJiQ-}{w%iO,Znf@   0&,wa:*B! V_H=[K7bG&s*d~:5!l}GtpX!f9b$xPL)m$9[?"fY(xfG	=@Mn9YF}"m1.9pi&X1j`E?~4A3'O02`Q0
F(`o @#>_;8(K27$.]bCg&d(`Q0
F( L3r`02SQvA,,,7~9:#\p<0=QVVS[[}b4dF(`Q0
F(  F `Gav@K6eS``q{<
F(`Q0
F  4:222f~ it2
F(`Q0
F(# `j a#(-!(R,Gw3Rs0gy-%  gD 0 k1] -tA[lfsKK   hty67oCff_~i:>}d8:`Q0
F(`Q0 @ v BmEC: W{D7[jZ  OG  Tl-A ^I
UQ  OW @    @E   #    AlP   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ @    @E   #    AlPI3   `    [OAY$   0@ w    IENDB`PNG

   IHDR      x   h   gAMA  a   sRGB     cHRM  z&         u0  `  :  pQ<   bKGD      	pHYs   d   d   VIDATx]e/]k^Ld2	KETPP(;Xh
I djf2=zp	W2 S I! 	``0!01IHd0A! 	R%OBv;l
A 	"bQ	`J03l#fKP"FI0LSm\v+C  !H`@@2I @% P%XSw(nBfxmS+s[Y^Pbf| $I@H	tQJ1	3e=PXW`|ay~$  $( D		$`@>K<]344?53-=[Yxb!H(	p3%0`I!	i<k-&-Rd	>zgEs&]:2d&H*0!b P]uYwZX=m~f6	El1YIY7O3	&(O13>UID  6}9k\<i:DC:b%mG7;;8Ke  3N!1D$F,|q=R?:o8?5slU1{JJx
)pG]|y3LI3S0
@H}/<i<q
O;ng99Cq3{@+2ohYg*` 	0,H@4t~MnIy^o{gwczEa@p<99rNyycO^^p"ILD3 0O;;^	BU``%j~gf/|G;~8ol~:`"	/|x/S~7my\U &M"$#IxqX;/{G~,AY}>{SC7>x?"KfIz{sws+i6H;O8gj\O0$$5sf[{:3S2d6Y2,9d6\t]{| 6%'I)M>EJgrJ| .O;/{|S IN,#ycKm#xPdHYN?_\<ryW-+H b"3_T/$" @8bC??5PK DHi_
E{qE9.7k
V%S~i'3  Hb I5?y{7.Mq5)Q$ pV3@ ._yq/y 7OLDHb fOw}xL0:ld:mW}U	 f&H&|0&z\qck}	 U2Nt+=l3J 	 03N!D@].1<kp"V(K@RJ,vw^5a"M$3!!@ qAQ 0!3Nk[kbcq!	%[vwV"G$2v"
FO)fHlB$AH BA$ #I3H2N!-)N9#!A8T|D]vU]8 D>`Y)iuCg[,mhC`yagT$3H 8$C$D d &,~t`6A
N!SfHW_nwH0@ @LD8P,^bzLyy 4! R`	I$,@
3lF0B1GOtd,@`$ p7w5y\V,AS ` H IP A Ia@(i(i,G(-C'" H  HULtwOB I,@8T=QDIKwTf  &$  OH@"ad::rS=.h4QR7_4x-LU|#5{kb;O*>.L_:-FaUg)m~L?`<xrO` H@0MS*}9p!X	3I8K $I	b`\hj`aC4=\3OlTk@lmk;gjp<PcnW[;?nJ[~csmG8%"EQ~9Ma*]{^xr	  I01 ArR:Y{Y $0@ 3 "fd0 )  0 "?8@ zSw-(q;V5csNY-4	1<$#
U44VbQtc8mTUPMS>]FbPU /ak Q,C
nr.18 fQDDD	 1PRI@D16;W-tZw|j7.fYn["ao	tua7|?wx<qjiF<a)x<gxDe%lDT5Xt(d
fT[{SFToD)  a   iKG0M"IV%Mx&(oo]_`ZlSi\qB*|^uFiN+\<y`HzFy'ab2g:&75BGem]S-	cW&?c,H B H$r3
srd0Ia`f LDT-$!I4tPB0p\;N<./++-NfVUqYnfnX:"*/vJMVG&bU10	eByIa7*b9?rU =8@$&A0X {.y/gTVgfS Og	f&"@m8s&~LH"H@qr=n'L-y#
W-R|xlnePpVF,L	* 	LH"	$R0	
F1d4q]	R[FR4?5[m
B<7X,~/as f"bf" 13!i{x<VBHfJb *$  #$ G"nESXD	"m#YNM4YQvit}
7lyv}M]mj;V~\@<Rg?7n*JP}Om%srWj!O9:w]5';~\z|i~qQCYr%%$@0JJ?5'm+~]
uMSPdHDes=ut;Uc26jZS-?{m?'oyLe+_tB(kv4|42(G;oX2EUi	>nUpCsSO:X`|Z8T'fH* 9"oVeNvPKOCw^2cWo,p 	>g d ``G^E=o~LQH7||n7p[~>#1N5-i hVI(0LQHO?dUB>IRj~pRjJehRqZ 1jXhwXTj%x\6#^3$Lts/^Wfn^<KA>gLH Ai! AX/m+/HWcbbId3=CDHu:S4{/zs-.h"/1Iir;dAZ-jQFZOo8tETCuZm;Np4)o;9T#9S*vg9GjuDX~nU`A&I8s+q&$) $ Xni?,dpT95#$V`l6YSSA=1T;zjO6Kn3/}&_zGo76#n^)u@?~S.^zdD'6hZKS&/j6t~ZvB%hwc'B |"8 6MR|D2L/ZC%72cc^&MII
b.u^W#C=c2]jS~iei^8PKo(m:VR?8ju,uPTflf 96o8?2&C/Ma*P	<kW-=Z)ik~M:Tw/Y 13>	)Yz~;V%7Cq<nK[x|SWkqSK]1SyGdcF(vOqs0
ij)LA 	$1L	0@ $f\-3 qM/>bf)$BD;j4[uUM(DkL8618r2 Q]T!Ii 0
 ,` S  X0?K)tE/Ku{[n]LTb!AHb 0F`B ~p9vEI, i_zt.b~)+W`f&1 _06DU+dRKfW?@0R]],M!5J$*P)B!0$ $$C,nhK3w71Sr5X}0m0}=k4|vM0A ID`	bMo8\R&7ucAu!rJ	b" p[vwj07Y@$D$5EQ_zlW6+I)M$ %@I@  "bMyvK`i1fW>W7hO !12b)O{8B?_R D  AP@DMGZ:(^uN I!LL,@ ^GEau6vDOq   $@>bI&~p_[h
$y(;G[QHIHb$$ Id:Wpdb*1uwBY4&XX$@bHQH =C<fbb $~B<H$	HYr%	Rr^eio^v(	 0	B2	0#b~ynMuzEUU	DLR HAT6VWjl:;y~_tON.NIL W[1@K $CEGs'@`7ER`1 Yc7m
rd@Yr%	0O^;@&{-\Cd$C@FT_}@4%@ILL "	D	1wwR7/z/mj}iwYRflrnY'38zH 1{bC`emE}dW9$",@P,&rB $3L0@nvk$)rIP f&T,@  E}#onxg 1 f4W P6lJ(DXI# 	f =;;_R[/]z	^wm=Mxoo;vBsC^>WI@0tlwn w\0W&$ qFI7=!aC.I0J `  a"z16LIh;6kw().?(]Uf&"H,@% $ (2 1$  AJD  o~oWAAco]>(w4}nIx.M,\uosq#VW``&/U8c`
O"[zm6{=% I@cG"}mPLaYikV_dQ5b?zy;r*KY2xcsTLDHbAHA`A`&T $	` &C4kkm<n<iyym b6YfQ|s*cnnIu}50RW5&bT@ #`j4|@G3!%w6Ur[7YH$xkWnB$.F\PIn@`d=uuDGZn/L96mBIaN[5!b@e$I@K&AH!M} 0$?wog}Wkj)/Jbf6]<Bnd^<eO=T1	VkgMq)/2)D A21Zz?N8_0{LSqZHb0@0@27vvHt )g;WOwdzY(	+-q6Co8K "*XSj:4q$){gex\V2vM9n?7 =HDuo#/v
2pLM3z aI% 
%T|v_{?bn9~/]2m'Db. !IN!:RGt+/&RqZ II	@k
-
t^5  ~9;6^=J$faXpZU7=}ed"u='35??ws%tjmOY(6UDc:(iPlJi-sRlc2=N`	._E~i$4$	P`L:{'LdN)}34dgx->ezEZM[OXh @ADD$XK_<a* 6""7}4-I|NM=hBAg8\9E'^<3bQI+|sgO(&H9m@0ez2]%( Dc!OoQcRrRV  !D$wUvW
bHFdANZQd4u{.v}nU|ctvbD .?nPlw}.1c8 @0Dhiq6,[3>.6lq9g#wlJ1Yw=9:+9z-GfO(*KI !  HMUYiW=D'^{q{zEx	mCNXi \VWC9tc8V6m6td~,)D$'5;9u2GTb$!t4V* Hh`I H~%{}6WWw\Y8n~Mq/_2Kb $A`6) 1F\H`Lk\wb =o8w	EacM99lz9j*$&p9|.c) @R0lX_yM3_ dyj;|A@`n8-	 B &@:jUE<P|ZD_I,^Zk	Xy%Ss#Pysq9yaI D @2$/n>C+f]}Xu8mt@t[nttxl&"mOKn* |D01gM(9zo[]KCZqIl
X  "=Td{$zHb1T H $(~Yg)YIu:\6+z\`hmp(.L>aN|-7DMa,VHYUx{{r<VW$ ~y_4[mucg@[Oa0d<3XPfV(f-q r8.H 	`iRKb$}M1NMf`0pz*N0]~"a,B`$}j)LUjzq"~5?'#NhR}z(}zW>=# BkkgUdjBgE}wN,Z0.;+90m4puxzYEQp'.]\] h,!IBH0!7iY+<_{\(i0X,f! DNOc!IBQ]rj@q=
ey)6s B= exJ{zY4W4M-q;|/^8]}Y'Cex	 	DHzwW[N\:ml5~_^wnUyv@D?x6yx/qzcFp #I U:	Sj58r/ z=6@:N56Fu&IX*N)	0Y*$ `$AMCSR1/^:<lH8jw.Utp;k23=N^YX/dl}e7H  H0GW3	k{kW~Sd@P;/'>pKStn7nS@H$kMa0@x]_;P8k}{O30/]vbQUq &T13)$ 0nr8"p@rPd dj)S]y.`R@0CSdHX2~?L] 7%R2O8@!^\j{G?[6@%	afb{op93FF8+kF!$Cy?m$` _d. I = Eu;r0
Gczn8DJ b*`U9'6Mu*rBpw007\<)vw;VqU+DaB*p-<&<VE9&"EiB @z?[p8 rlN[1K&q:
 m4+M)+;	bf)eXO 0$ 0O+~=x
xr	&A8@HXdz].C> /i@1Ui*$g?aUSeY6<@Z1+0]6E#L	QU(/omqaYpKf94VPnMpc0d.tGX#[<A+Q/_8*'Q:|{FqK?L"@D?G!AD + 91v( 23*
Pqza[NKo0@0%Id@Vab5
p]YMKT":PZswX G>Jwr00t$MK[4B,_2M[m3kkn[DQvOqqsq-Gz_X$FE M @yg{Ufz)EaBi0FiD)tSOc  3# @0Aj6UwqQEu'+{s -48}zco;-%
 I !ny)i
6U[1*3S/liWkTf=]o=X1`Ri^Xw7wx<?=P$ F1=uVVvY6v]v E Fxd)S|,%_$A{^N`&e!:'sSR-Y) ao|fVPHu|wuhin]<{(;Uk?[:ja]7._8?9TkeY;m}`01U*f]/Sz]@t^unIw  "1	R SdzO)w5"THNK \I]'	fRqz$I`NuEH5:h-mih.Y',iv,cCldYXmoJ_P;qhR
m.+.E U{^o8"H_2Y' Ki75?phr:HBRUChnHL(	R 	n?y^O`(0p31@ H(iniA*>HC

!m]0"8hC".!I>kn`rv04j ozf4?h,_\J03a_/!/Ca>[	R]);iw\:o|;a_w BKU3i$1 `0$1c~U1(6_peAI@Q]4" dM$bN-J2Yn[8:+#N_/O{uK)aQ8!ycxqL*d\vGWK&~	^mZwUi."]cN-{c?]D4Dmi"r`	! 5-OwbHim#k<f1N jZ xmR>a 6UO0#`I%um
Pv7ahN4w?rxWG90,J7j2<[TUQ-u/l3n/MEdvo2Fi}8{ %npvjN;gBmzcs}X2!vvB)z,\< DH"B@kHn4)^@tXzUMc)KsR AX*N$R @VIQHP\OPrSj%fu'f[wz{hm\hg~NW-`=nU^|s++V-n9{m$e)nm|m_{`en.Rrw_	P/8VQ00} 1aRSEfkI+* AP5&9-8ms`}4	c2O(&H"#"f"@ln%mCMm}%9	E}~_rnz=`nu;+m;=.2,vnZ	zH/Z~F%l5w9Z4uiK[%)VeC+f,X?]<lvuRB H! '>#?qVNLpZ[	1(1 T|," i*sjKq}8$ X5wU"0om%t-evr<O>;Je3XQB)W.,i`Qa@PuI'{mtHKghx5x+FOufmXso7s|a!0 f"b UicYwUTZ26y8rg]$<7CT# 
KMKhkMd0J|RYa#OohpETui5t=@/bvs8l~Jf`A @KH /zoH	7nI(!*d..?>e_x0#q"6R}^knYR`I` D0z_pBaZ{t"s1 D  $65p	IX:g|Jw$,&0'9pXu
3]Eyl
R "EP$g^=/b+qLx{L/-h[w/^0[Oo[,,=u#c2m]cp8n$ MPC	*?:i:yW}&& 1@BL(LL`>34w#P@o{ 	$E@r}fW,V	$1"b c	)Y8->gx#.jU!{$?mSi{s'o|R ;L]1yVyMU,6fi}`4/MA,S3Rm
2JsRgVl=>.#RM9nbNMt""Y8CE_t\UuID,IHG:z-8m ILD H"@$)#QQ+M\>[fL)cRY_]2m#	@QCO`\X)RH"	f&O~#VKHy+pYL':[U4}
($%pH^pl)tO@ 3C?{a{_x}@$ B1Gbq`M\1??fB7/7p+z6KOxjU;[TBgo0j`neEsJ/[z9B	&$	
ji_-KMqY@G!;&e[4	 Rq[vg3 0 bms31D]f|YU9_11	$3	B	 $	a(*0Uf.^4-7!"'[4,mZ};'v4t=eWveo$.M	J   AhiW}.~LBT7ZF&d$` 4rfx^2 0@+qd!Pfm2&0' Ad-T|`S_7h`h!Iau'd3X54^48\|bqE)?4` zyU3>gmM.hvf1D^1W/GB>qNCm?u9&k_:7BywG:We @ %L_TM-LL |e83=h'FVL/
!) yv>9lJEqE\>}i\#{F  7w6UDDvLC[CC-][6&w
AUs1YPc	I*@41<f$A`#fsq;&/yeqv<N+&th^8c@Yf$ 01T9.Ui8~+gI`@d/hu%&0d~~EMN8kWeO.hnUN 0MMDLDsWlx]rk4?rwK2vHF{Nx9%9^]:B}x$i%p)	U_~>9i03P,+{y9j}=d8k_pe@`@ A	[?"g_Sae
^7C0@|e2 V $h=0/;$7o<2X7w,$A(  Y6cU>H,9A9r,KtZ{I%YS_xe5$Pg&F_
R:40L)cG#!b#L "C*	}g tk~{We@LD  M?g0Y+H$ H FPa
DLR@{9,?|)ax!(+7H@  	s{MnMXLt%S=/=g$GCW7r%O/YUx^	CnVX<_4oe[M# w^>C4BDL&Bfe^X?gl1
\<L
6A
[,B!m|iu@MV[6}\I;mu]	" @L&x=j:Z"^nUX0d$*DFBqbL"1~=zm|eE%{^]s_f"N:jMc-oI\47.PQb8AF4_>||"8 $	PY[1dNbu{[V5dJfW`x_ wDOMx[m	M)2SB HB IIDf^#m}a V@`PA<?cBY]n+C&AF6k{Z{FIYKgVH(w6o?Hko7cW12K&x<b0 0jjX{/ui	D3D3DQ5DcBb$CPcnv([NXmUK|w_&5`l;wwLBP.YQ]q[a( 0FlN`gx%C7{zqg DL2tkxFqZ7hgK  ,i8s*$0$FfV\UF]{qcMMYJUU-qu|
Rs&0tm^plcMGZ^\}iMHw[n]5XnOX,ldxQ4EGune/JXu1Bhp`}[Bh"ec{TP 5L(	*HpmWL.ZT&hDT! I&`75\:`{>7uI`H@4IY8NSm=X>
z|ub%
kO-a.M8LP{_0O4wX(:4\vm#:,]&cXu:<_;a*w5;[C
"/%[fw*1Cw\gT-JP/"	 $1|b/'3echwLDX*XA^-k|a*A"@(,AOW/,Q=ea72S4tf{{>&0a-M}IBQv/	E@}k@mOUC#I-6(;cDB1eJ')vminGYT+`n
nKDIQy\?n0IlNvI $C)%0XM'e=~%=C+~oH$txvcex4{J)I`xyCT8n?*3yeSJCO_taN"RL]h't>iQO*#7..Yhk3'5- (FGV
3& ARgNtjM6M*k{J2SM,d0Na"BC3I?3t[5U0VL`_s<W *Sd4X{CoENM&P`F(/Z3t[\7NwD=?{}0WfK+hH@ <65KR@
3Ipq60@{gVpZU]MSg$%%\u}XIgMZ{-KZ#)c%KHwww2A@SU?~kZiN/*YE/mRRXK9.`htN`dkY&fxD$`nVFkIDEqvHG/V`Sw^4Kf I, DtoG{ pfWL(LHd{mpC]"0vqAucGXP\|Y;"-`|Qy~*a?xPKp&;$# FI!Fkkrk7.!@2I @!13	H0s*Ayf>1#H21@H2ui~ywp fikf @	#61=C#?	M1tY5M=oJq[\=	& `Ah"o^9&L*`?D(H>W*5O\=;s`A HU;{}CqEEod`DOsZMXQ)iKbd"TB(b`8aMUi.GV3c-L+(Jqj. 	Lkvs0J0!H w&*s,	v  0FdDT5I	 Kf7o%UymtMfAMA:f)H2&@$3
">$u1R8X1s\..{)Ns3].+4	(0* @XBg$Y!	bk=^`i_x  b0*3F BIL br^g/KCS3sM,$ Q&	 H H*L@I8$+2 3pIP`  @E$ @aT 	"$ 	7$H@  b  ?6:-"^6g , Hf"c	@  @*Es*21Q@' LHRp
	$1,"` 	`D  "@ AA
(!  DH"$	d`$1$ o{acfd6  ID$qEUc:1i/ljH $cTal ,#$$Fu1 aox(xE b	YE-(I[{#z;k:xTf#EX,R"Dp0PnU0d$~6U-#N.R !` GO5K}kYw6?|rWI8@D!%+ 	-1F1 Pm9maX_hL:UH 0FI	EU+)# ,YcKm}#=af7%i\_YYLili_1\"i %L `bw]Wco<=Y^][_uxE(I6	B0tG! !
]<r~u_vIv}7v?x|&P   umvMh~{@21 "f%  F1v=~NETU`!uR{/" $F	&%jR\MLH$0	
$ A$d "fa@lC HHMP$A3~nei%Y>4=-ZLO9-%.a0  0@` &0@{C0irYcY$b AH D0z )D066n99ly `f"zA]	#;=k\ue!A` [3+{,H`$#Ho4S60L,OT?13)  03R7k6lj5bz"eeyZ2*mU@H;k{~^X[l%@@k_`w]{z@jQu*'/{q+30L 	$	|}'^R;LPtR,eCva9ww}':n,Mm5F1RRUo\=cFea#IO I$ I@`O, cOow8Y-0LJuaUv	j*42;r,E@L` $Q$	 "a@d?@So EU}a*b:!kx~g+TO* $Cb"$Cf|D23Af"0 1@81x{(}ZqF7V%0)NkeIsR $ `0d  A@e"HJF/nVejJBi8kBqZ1   A ?13lc3,lqto/LRB0
c!" U`JJvT  "7g Hm
xC03 f$s
F
8Sn{1zM=>Mr3rl{`f_9	4i3: 39AM 2s?2olFm@O 3@.Q@`c0|&RZI$1I H  bo]O_X=vM::0,fd&  LZ [ek/r92R wN(YvWfN)" IDDL K"uKUQ]]a]BBF@e'dl?pZ`6AD@s x;BgDiNOi8K"f0~fMj1Y 	R	,X
!lj`}$fW/K	 "SUbb|iJh:CaHv&P8AeN$3%a $$Q,	@_uid   %tEXtdate:create 2014-02-09T01:48:07+05:00   %tEXtdate:modify 2014-02-09T01:48:07+05:00rX   tEXtjpeg:colorspace 2,uU    tEXtjpeg:sampling-factor 1x1,1x1,1x1p    IENDB`<?php
session_start();
require_once '../common/common.php';

echo '<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid gray;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;
}

.section_header
{
	background-color:gray;
}
</style>

';



//echo "<pre>";
//print_r($_POST);
//echo "</pre>";

//connect staff and verify login
$link=connect();

//////////////////Code for salary//////////

$sal_link=mysqli_connect('127.0.0.1',$GLOBALS['main_user'],$GLOBALS['main_pass']);

mysqli_select_db($sal_link,'c34');

if(isset($_POST['action']))
{
	if($_POST['action']=='View')
	{
		echo '<table align=center><tr><td>';
		display_staff($sal_link,$_POST['staff_id']);
		echo '</td><td>';
		display_bill($sal_link,$_POST['bill_group']);
		echo '</td></tr></table>';
		print_one_nonsalary_slip($sal_link,$_POST['staff_id'],$_POST['bill_group']);
		print_one_salary_slip($sal_link,$_POST['staff_id'],$_POST['bill_group']);
	}
	exit(0);
}

menu();

echo '<div align=center style="background-color:#FFD4D4;">';
list_all_salary($sal_link,$_SESSION['login']);
echo '</div>';


function display_staff($link,$staff_id)
{
	$sql='select * from staff where staff_id=\''.$staff_id.'\'';

	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	echo '<table align=center class=border style="background-color:#F5D300">
	<tr><th>ID</th><th>Name</th></tr>
	<tr>';
	while($ar=mysqli_fetch_assoc($result))
	{
		echo '<td>'.$ar['staff_id'].'</td>'.
		'<td>'.$ar['fullname'].'</td>';
	}
	echo '</tr></table>';
}

function display_bill($link,$bill_group,$header='yes')
{
	$sql='select * from bill_group where bill_group=\''.$bill_group.'\'';

	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	echo '<table align=center class=border style="background-color:#ADD8E6">';
	if($header=='yes')
	{
		echo '<tr><th>Bill Group</th><th>Prepared on</th> <th>From</th> <th>To</th> <th>Head</th> 
		<th>Type</th><th>Remark</th></tr>
		<tr>';
	}
	while($ar=mysqli_fetch_assoc($result))
	{
		echo '<td>'.$ar['bill_group'].'</td>'.
		'<td>'.$ar['date_of_preparation'].'</td>'.
		'<td>'.$ar['from_date'].'</td>'.
		'<td>'.$ar['to_date'].'</td>'.
		'<td>'.$ar['head'].'</td>'.
		'<td>'.$ar['bill_type'].'</td>'.
		'<td>'.$ar['remark'].'</td>';
	}
	echo '</tr></table>';
}

function list_all_salary($link,$staff_id)
{

			echo '<table ><tr><td><h2>All Salary Slips of</h2></td><td>';
			display_staff($link,$staff_id);
			echo '</td></tr></table>';
			
	$sql='select distinct bill_group from salary where staff_id=\''.$staff_id.'\' order by bill_group desc';
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link); return FALSE;}	
	$header='yes';
	echo '<table align=center class=border style="background-color:#ADD8E6">';
	while($bg=mysqli_fetch_assoc($result))
	{
		$ar=get_raw($link,'select * from bill_group where bill_group=\''.$bg['bill_group'].'\'');
		if($header=='yes')
		{
			echo '<tr><th>Action</th><th>Bill Group</th><th>Prepared on</th> <th>From</th> <th>To</th> <th>Head</th> 
			<th>Type</th><th>Remark</th></tr>
			<tr>';
			$header='no';
		}
			echo '<tr><td>';
			echo '<form  style="margin-bottom:0;" method=post>';
			echo '<input type=hidden name=staff_id value=\''.$staff_id.'\'>';
			echo '<input type=hidden name=bill_group value=\''.$ar['bill_group'].'\'>';
			echo '<input type=submit formtarget=_blank name=action value=View>';
			echo '</form></td>'.
			'<td>'.$ar['bill_group'].'</td>'.
			'<td>'.$ar['date_of_preparation'].'</td>'.
			'<td>'.$ar['from_date'].'</td>'.
			'<td>'.$ar['to_date'].'</td>'.
			'<td>'.$ar['head'].'</td>'.
			'<td>'.$ar['bill_type'].'</td>'.
			'<td>'.$ar['remark'].'</td></tr>';
			
	}
	echo '</table>';

}

function print_one_nonsalary_slip($link,$staff_id,$bill_group,$format_table='')
{
	if(strlen($format_table)==0){$format_table='nonsalary_type';}
	$sql='select * from `'.$format_table.'`';

	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	$ptbl='';
	$count=0;
	while($ar=mysqli_fetch_assoc($result))
	{
		$dt=get_raw($link,'select * from nonsalary where 
								staff_id=\''.$staff_id.'\' and 
								bill_group=\''.$bill_group.'\' and 
								nonsalary_type_id=\''.$ar['nonsalary_type_id'].'\'');
		$title=$ar['nonsalary_type_id'];							 
		if($count%3==0){$t='<tr>';}else{$t='';}
		if($count%3==2){$tt='</tr>';}else{$tt='';}
		
		$ptbl=$ptbl.$t.'<td>'.$ar['name'].'</td>
										<td>'.$dt['data'].'</td>'.$tt;
		$count=$count+1;
	}
	

	$tbl='<table  width="100%" align=center id=nonsal class=border style="background-color:lightgray;display=block;">'.$ptbl.'</table>';
			
	echo $tbl;
}

function print_one_salary_slip($link,$staff_id,$bill_group,$format_table='')
{
	if(strlen($format_table)==0){$format_table='salary_type';}
	$sql='select * from `'.$format_table.'`';

	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	$ptbl='';
	$mtbl='';
	while($ar=mysqli_fetch_assoc($result))
	{
		$dt=get_raw($link,'select * from salary where 
								staff_id=\''.$staff_id.'\' and 
								bill_group=\''.$bill_group.'\' and 
								salary_type_id=\''.$ar['salary_type_id'].'\'');
								
		if($ar['type']=='+'){$ptbl=$ptbl.'<tr>
										<td width="65%">'.$ar['name'].'</td>
										<td width="15%">'.$dt['amount'].'</td>
										<td width="20%">'.$dt['remark'].'</td></tr>';}
										
		elseif($ar['type']=='-'){$mtbl=$mtbl.'<tr>
										<td width="65%">'.$ar['name'].'</td>
										<td width="15%">'.$dt['amount'].'</td>
										<td width="20%">'.$dt['remark'].'</td></tr>';}	
	}
	
	$tbl='<table width="100%" align=center id=sal class=border style="display=block;background-color:#A0CA94">	
				<tr><th>Payment</th><th>Deductions</th></tr>
				<tr><td valign=top><table class=border width="100%">'.$ptbl.'</table>
				</td><td valign=top><table class=border width="100%">'.$mtbl.'</table></td></tr>

		</table>';
			
	echo $tbl;
	$pmn=find_sums($link,$staff_id,$bill_group);

	echo '<table align=center><tr><td align=center><div align=center id="response">';
	
	echo '<table width="100%" class=border align="center" style="display:block;background:lightpink;"><tr>';
	echo '<th>Gross</th><th>Deductions</th><th>Net</th></tr><tr>';
	echo '<th>'.$pmn[0].'</th><th>'.$pmn[1].'</th><th>'.$pmn[2].'</th>';
	echo '</tr></table>';
	
	echo '</div></td></tr></table>';
}


function find_sums($link,$staff_id,$bill_group)
{
	$sql='select * from salary where 
								staff_id=\''.$staff_id.'\' and 
								bill_group=\''.$bill_group.'\'';
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	$p=0;
	$m=0;
	while($ar=mysqli_fetch_assoc($result))
	{	
		$dt=get_raw($link,'select * from salary_type where salary_type_id=\''.$ar['salary_type_id'].'\'');
		if($dt['type']=='+')
		{
			$p=$p+$ar['amount'];
		}
		elseif($dt['type']=='-')
		{
			$m=$m+$ar['amount'];
		}
	}	
	$n=$p-$m;	
	return array($p,$m,$n);				
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Date Picker Example</title> 

<link rel="stylesheet" type="text/css" href="datepicker.css" /> 
<script type="text/javascript" src="datepicker.js"></script> 
<script type="text/javascript" src="timepicker.js"></script> 

<style>
  input {
    font-family:monospace;
  }
</style>
</head> 
<body> 

  <h1>Date Picker Example</h1> 
  
  <p>Start Date / Time:<br /> 
    <input id="start_dt" class='datepicker' size='11' title='D-MMM-YYYY' /> 
    <input id="start_tm" class='timepicker' size='5'  title='HH:MM' /> 
  </p> 
  
  <p>End Date:<br /> 
    <input id="end_dt" class='datepicker' size='11' title='D-MMM-YYYY' /> 
    <input id="end_tm" class='timepicker' size='5'  title='HH:MM' /> 
  </p> 
 
  <h2>How to use these pickers in your app:</h2>
  
  <p>Put the following 2 or 3 lines in your page's &lt;head&gt; section:</p>
  <pre>&lt;link rel="stylesheet" type="text/css" href="datepicker.css" /&gt; 
&lt;script type="text/javascript" src="datepicker.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="timepicker.js"&gt;&lt;/script&gt;</pre>
  
  <p>On any &lt;input&gt; that you want to have a date picker for, set/add the 'datepicker' class:</p>
  <pre>&lt;input id='start_dt' class='datepicker'&gt;
&lt;input id='another_dt' class='myclass datepicker'&gt;</pre>

  <p>On any &lt;input&gt; that you want to have a time picker for, set/add the 'timepicker' class:</p>
  <pre>&lt;input id='start_dt' class='timepicker'&gt;
&lt;input id='another_dt' class='myclass timepicker'&gt;</pre>

  <p>I hope you enjoy these pickers as much as I enjoyed getting it working cross-browser :)</p>
  
</body> 
</html> .datepickerdropdown {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD6CAIAAADvIroEAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAIhJREFUOE99w4cRgDAQBLHtvzKyyWByhjKo4E8z4vs+3vc1P8+Det836nVdqOd5oh7HgXXfd9Rt21DXdUVdlgV1nmes0zShjuOIOgwDqvcete97rF3XobZti9o0DWpd16hVVaGWZYm1KArUPM9RnXOoWZahpmmKNUkS1DiOUaMoQg3DEDUIAow/RjJ3qB92TU4AAAAASUVORK5CYII=);
  border:1px solid #888;
  padding:1px;
  position:absolute;
  text-align:center;
}
.datepickerdropdown table {
  border-collapse:collapse;
  margin:auto;
}
.datepickerdropdown input {
  font-family:monospace;
  border:1px solid #888;
  margin:1px;
  padding:2px 5px;
  text-align:center;
}
.datepickerdropdown table input[type=button] {
  width:2em;
}
.datepickerdropdown input[type=button] {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAElJREFUGFeNwwEGACEQQNF//6MlSRSRSMMkY86wdk+wj4e78zaz772Xcw6qioiw92atxZyTMQa9d1pr1FoppZBzJqVEjJEQwt8PXeRLuM/peRgAAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=button]:hover {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFpJREFUGFdjePfuAgMIv3lzCoxfvTrK8OLFAYbnz/cyPHmyleHx480MDx+uY7h3bxnDnTsLGW7enMVw7dpkhqtXJzJcutTFcOFCG8O5c00MZ87UMZw6VUksBgDwaURPl4Jv2AAAAABJRU5ErkJggg==);
}
.datepickerdropdown input[type=button]:active {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFhJREFUGFdjOHWqkuHMmTqGc+eaGC5caGO4dKmL4erViQzXrk1muHlzFsOdOwsZ7t1bxvDw4TqGx483Mzx5spXh+fO9DC9eHGB49eoow5s3p8D43bsLpGAAr0NKhZpZNgcAAAAASUVORK5CYII=);
  padding:2px 4px 2px 6px;
}      
.datepickerdropdown input.selected {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAEBJREFUGFdj+P//P8P//5+A+CkQXwfiU0C8B4jXA/EiIJ4CxO1AXAnEOUAcB8SBQOwCxGZArAnE0kDMB8QMxGIAwnRFxCnPkL8AAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=text] {
  background:#fff;
  color:#000;
}
.datepickerdropdown input.today {
  border:1px solid red;
}
.datepickerdropdown input.othermonth {
  color:#aaa;
  border:1px solid #bbb;
}
.datepickershow img {
  border:1;
}
// Returns true if a string is an integer
function isInteger(s) {
  for (i = 0; i < s.length; i++) {
    var c = s.charAt(i);
    if (c<"0" || c>"9") return false;
  }
  return true;
}

// Make the time into a nice format as they type eg HHMM goes to HH:MM
function timePickerKeyup(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
  if (!e) var e = window.event;
  if (e.target) targ = e.target;
  else if (e.srcElement) targ = e.srcElement;
  if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  if (targ.value.length==4 && isInteger(targ.value)) {
    targ.value = targ.value.substr(0,2) + ':' + targ.value.substr(2,2);
  }
}

// Gets called if they tab out of a time picker, to neaten it up
function timePickerBlur(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
  if (!e) var e = window.event;
  if (e.target) targ = e.target;
  else if (e.srcElement) targ = e.srcElement;
  if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug
  
  if (targ.value.length==1 && isInteger(targ.value)) {
    targ.value = '0' + targ.value + ':00';
  }
  if (targ.value.length==2 && isInteger(targ.value)) {
    targ.value = targ.value + ':00';
  }
  if (targ.value.length==3 && isInteger(targ.value)) {
    targ.value = '0' + targ.value.substr(0,1) + ':' + targ.value.substr(1,2);
  }
  if (targ.value.length==4 && isInteger(targ.value)) {
    targ.value = targ.value.substr(0,2) + ':' + targ.value.substr(2,2);
  }
}

// This is called when the page loads, it searches for inputs where the class is 'timepicker'
function timePickerInit() {
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='timepicker' || className.indexOf('timepicker ') != -1 || className.indexOf(' timepicker') != -1) {
      allElements[i].onkeyup = timePickerKeyup;
      allElements[i].onblur = timePickerBlur;
    }
  }
}

// Hook myself into the page load event
if (window.addEventListener) { // W3C standard
  window.addEventListener('load', timePickerInit, false);
} else if (window.attachEvent) { // Microsoft
  window.attachEvent('onload', timePickerInit);
}
.datepickerdropdown {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD6CAIAAADvIroEAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAIhJREFUOE99w4cRgDAQBLHtvzKyyWByhjKo4E8z4vs+3vc1P8+Det836nVdqOd5oh7HgXXfd9Rt21DXdUVdlgV1nmes0zShjuOIOgwDqvcete97rF3XobZti9o0DWpd16hVVaGWZYm1KArUPM9RnXOoWZahpmmKNUkS1DiOUaMoQg3DEDUIAow/RjJ3qB92TU4AAAAASUVORK5CYII=);
  border:1px solid #888;
  border-radius:5px;
  padding:10px;
  position:absolute;
  text-align:center;
}
.datepickerdropdown table {
  border-collapse:collapse;
  margin:auto;
}
.datepickerdropdown input {
  font-family:monospace;
  border:1px solid #888;
  border-radius:3px;
  margin:1px;
  padding:2px 5px;
  text-align:center;
}
.datepickerdropdown table input[type=button] {
  width:2em;
}
.datepickerdropdown input[type=button] {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAElJREFUGFeNwwEGACEQQNF//6MlSRSRSMMkY86wdk+wj4e78zaz772Xcw6qioiw92atxZyTMQa9d1pr1FoppZBzJqVEjJEQwt8PXeRLuM/peRgAAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=button]:hover {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFpJREFUGFdjePfuAgMIv3lzCoxfvTrK8OLFAYbnz/cyPHmyleHx480MDx+uY7h3bxnDnTsLGW7enMVw7dpkhqtXJzJcutTFcOFCG8O5c00MZ87UMZw6VUksBgDwaURPl4Jv2AAAAABJRU5ErkJggg==);
}
.datepickerdropdown input[type=button]:active {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAFhJREFUGFdjOHWqkuHMmTqGc+eaGC5caGO4dKmL4erViQzXrk1muHlzFsOdOwsZ7t1bxvDw4TqGx483Mzx5spXh+fO9DC9eHGB49eoow5s3p8D43bsLpGAAr0NKhZpZNgcAAAAASUVORK5CYII=);
  padding:2px 4px 2px 6px;
}      
.datepickerdropdown input.selected {
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAEBJREFUGFdj+P//P8P//5+A+CkQXwfiU0C8B4jXA/EiIJ4CxO1AXAnEOUAcB8SBQOwCxGZArAnE0kDMB8QMxGIAwnRFxCnPkL8AAAAASUVORK5CYII=);
}
.datepickerdropdown input[type=text] {
  background:#fff;
  color:#000;
}
.datepickerdropdown input.today {
  border:1px solid red;
}
.datepickerdropdown input.othermonth {
  color:#aaa;
  border:1px solid #bbb;
}
.datepickershow img {
  border:1;
}
// Converts a date into '12-Oct-1984' format
//function getDateString(dt) {
//  return dt.getDate() + '-' + 
//    ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()] + 
//    '-' + dt.getFullYear();
//}

//function getDateString(dt) {
//  return dt.getFullYear() + '-' + 
//    ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] + 
//    '-' + ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1];
//}

function getDateString(dt) {
  return	['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1]
+ '-' + 	['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()]
+ '-' +		[dt.getFullYear()]
}

// Converts a date into 'July 2010' format
function getMonthYearString(dt) {
  return ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] +
         ' ' + dt.getFullYear();
}

// This is the function called when the user clicks any button
function chooseDate(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
	if (!e) var e = window.event;
	if (e.target) targ = e.target;
	else if (e.srcElement) targ = e.srcElement;
	if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  var div = targ.parentNode.parentNode.parentNode.parentNode.parentNode; // Find the div
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  if (targ.value=='<' || targ.value=='>'|| targ.value=='<<' || targ.value=='>>' || targ.value=='>>>' || targ.value=='<<<') {// Do they want the change the month?
    createCalendar(div, new Date(targ.getAttribute('date')));
    return;
  }
  textbox.value = targ.getAttribute('date'); // Set the selected date
  div.parentNode.removeChild(div); // Remove the dropdown box now
}

// Parse a date in d-MMM-yyyy format, but altered by SMP for dd-mm-yyyy
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  
  if (a.length!=3) return new Date(d); // Missing 2 dashes

  return new Date(a[2],a[1]-1,a[0],0,0,0,0);
}

/*
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  if (a.length!=3) return new Date(d); // Missing 2 dashes
  var m = -1; // Now find the month
  if (a[1]=='Jan') m=0;
  if (a[1]=='Feb') m=1;
  if (a[1]=='Mar') m=2;
  if (a[1]=='Apr') m=3;
  if (a[1]=='May') m=4;
  if (a[1]=='Jun') m=5;
  if (a[1]=='Jul') m=6;
  if (a[1]=='Aug') m=7;
  if (a[1]=='Sep') m=8;
  if (a[1]=='Oct') m=9;
  if (a[1]=='Nov') m=10;
  if (a[1]=='Dec') m=11;
  if (m<0) return new Date(d); // Couldn't find the month
  return new Date(a[2],m,a[0],0,0,0,0);
  //return new Date(a[2],m,a[0],0,0,0,0);
}
*/

// This creates the calendar for a given month
function createCalendar(div, month) {
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  var tbl = document.createElement('table');
  
  var topRow = tbl.insertRow(-1);
  
  var td = topRow.insertCell(-1);
  var lastTYearBn = document.createElement('input');
  lastTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastTYearBn);
  lastTYearBn.value='<<<';
  lastTYearBn.onclick=chooseDate;
  lastTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-120,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastYearBn = document.createElement('input');
  lastYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastYearBn);
  lastYearBn.value='<<';
  lastYearBn.onclick=chooseDate;
  lastYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-12,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastMonthBn = document.createElement('input');
  lastMonthBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastMonthBn);
  lastMonthBn.value='<';
  lastMonthBn.onclick=chooseDate;
  lastMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-1,1,0,0,0,0).toString());
   
  var td = topRow.insertCell(-1);
  td.colSpan=4;
  var mon = document.createElement('input');
  mon.type='text';
  td.appendChild(mon);
  mon.value = getMonthYearString(month);
  mon.size=7;
  mon.disabled='disabled';
  
  //var td = topRow.insertCell(-1);
  var nextMonthBn = document.createElement('input');
  nextMonthBn.type='button';
  td.appendChild(nextMonthBn);
  nextMonthBn.value = '>';
  nextMonthBn.onclick=chooseDate;
  nextMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+1,1,0,0,0,0).toString());
 
 
  //var td = topRow.insertCell(-1);
  var nextYearBn = document.createElement('input');
  nextYearBn.type='button';
  td.appendChild(nextYearBn);
  nextYearBn.value = '>>';
  nextYearBn.onclick=chooseDate;
  nextYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+12,1,0,0,0,0).toString());
  
 
  var td = topRow.insertCell(-1);
  var nextTYearBn = document.createElement('input');
  nextTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(nextTYearBn);
  nextTYearBn.value='>>>';
  nextTYearBn.onclick=chooseDate;
  nextTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+120,1,0,0,0,0).toString());
   
  var daysRow = tbl.insertRow(-1);
  daysRow.insertCell(-1).innerHTML="Mon";
  daysRow.insertCell(-1).innerHTML="Tue";
  daysRow.insertCell(-1).innerHTML="Wed";
  daysRow.insertCell(-1).innerHTML="Thu";
  daysRow.insertCell(-1).innerHTML="Fri";
  daysRow.insertCell(-1).innerHTML="Sat";
  daysRow.insertCell(-1).innerHTML="Sun";
  
  // Make the calendar
  var selected = parseMyDate(textbox.value); // Try parsing the date
  var today = new Date();
  date = new Date(month.getFullYear(),month.getMonth(),1,0,0,0,0); // Starting at the 1st of the month
  var extras = (date.getDay() + 6) % 7; // How many days of the last month do we need to include?
  date.setDate(date.getDate()-extras); // Skip back to the previous monday
  while (1) { // Loop for each week
    var tr = tbl.insertRow(-1);
    for (i=0;i<7;i++) { // Loop each day of this week
      var td = tr.insertCell(-1);
      var inp = document.createElement('input');
      inp.type = 'button';
      td.appendChild(inp);
      inp.value = date.getDate();
      inp.onclick = chooseDate;
      inp.setAttribute('date',getDateString(date));
      if (date.getMonth() != month.getMonth()) {
        if (inp.className) inp.className += ' ';
        inp.className+='othermonth';
      }
      if (date.getDate()==today.getDate() && date.getMonth()==today.getMonth() && date.getFullYear()==today.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='today';
      }
      if (!isNaN(selected) && date.getDate()==selected.getDate() && date.getMonth()==selected.getMonth() && date.getFullYear()==selected.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='selected';
      }
      date.setDate(date.getDate()+1); // Increment a day
    }
    // We are done if we've moved on to the next month
    if (date.getMonth() != month.getMonth()) {
      break;
    }
  }
  
  // At the end, we do a quick insert of the newly made table, hopefully to remove any chance of screen flicker
  if (div.hasChildNodes()) { // For flicking between months
    div.replaceChild(tbl, div.childNodes[0]);
  } else { // For creating the calendar when they first click the icon
    div.appendChild(tbl);
  }
}

// This is called when they click the icon next to the date inputbox
function showDatePicker(idOfTextbox) {
  var textbox = document.getElementById(idOfTextbox);
  
  // See if the date picker is already there, if so, remove it
  x = textbox.parentNode.getElementsByTagName('div');
  for (i=0;i<x.length;i++) {
    if (x[i].getAttribute('class')=='datepickerdropdown') {
      textbox.parentNode.removeChild(x[i]);
      return false;
    }
  }

  // Grab the date, or use the current date if not valid
  var date = parseMyDate(textbox.value);
  if (isNaN(date)) date = new Date();

  // Create the box
  var div = document.createElement('div');
  div.className='datepickerdropdown';
  div.setAttribute('datepickertextbox', idOfTextbox); // Remember the textbox id in the div
  createCalendar(div, date); // Create the calendar
  insertAfter(div, textbox); // Add the box to screen just after the textbox
  return false;
}

// Adds an item after an existing one
function insertAfter(newItem, existingItem) {
  if (existingItem.nextSibling) { // Find the next sibling, and add newItem before it
    existingItem.parentNode.insertBefore(newItem, existingItem.nextSibling); 
  } else { // In case the existingItem has no sibling after itself, append it
    existingItem.parentNode.appendChild(newItem);
  }
}

/*
 * onDOMReady
 * Copyright (c) 2009 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
function onDOMReady(fn,ctx){var ready,timer;var onStateChange=function(e){if(e&&e.type=="DOMContentLoaded"){fireDOMReady()}else if(e&&e.type=="load"){fireDOMReady()}else if(document.readyState){if((/loaded|complete/).test(document.readyState)){fireDOMReady()}else if(!!document.documentElement.doScroll){try{ready||document.documentElement.doScroll('left')}catch(e){return}fireDOMReady()}}};var fireDOMReady=function(){if(!ready){ready=true;fn.call(ctx||window);if(document.removeEventListener)document.removeEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=null;window.onload=null;clearInterval(timer);timer=null}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=onStateChange;timer=setInterval(onStateChange,5);window.onload=onStateChange};

// This is called when the page loads, it searches for inputs where the class is 'datepicker'
onDOMReady(function(){
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      // Found one! Now lets add a datepicker next to it  
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + allElements[i].id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, allElements[i]);
    }
  }
});
// Converts a date into '12-Oct-1984' format
//function getDateString(dt) {
//  return dt.getDate() + '-' + 
//    ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()] + 
//    '-' + dt.getFullYear();
//}

//function getDateString(dt) {
//  return dt.getFullYear() + '-' + 
//    ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] + 
//    '-' + ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1];
//}

function getDateString(dt) {
  return	['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'][dt.getDate()-1]
+ '-' + 	['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()]
+ '-' +		[dt.getFullYear()]
}

// Converts a date into 'July 2010' format
function getMonthYearString(dt) {
  return ['01','02','03','04','05','06','07','08','09','10','11','12'][dt.getMonth()] +
         ' ' + dt.getFullYear();
}

// This is the function called when the user clicks any button
function chooseDate(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
	if (!e) var e = window.event;
	if (e.target) targ = e.target;
	else if (e.srcElement) targ = e.srcElement;
	if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  var div = targ.parentNode.parentNode.parentNode.parentNode.parentNode; // Find the div
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  if (targ.value=='<' || targ.value=='>'|| targ.value=='<<' || targ.value=='>>' || targ.value=='>>>' || targ.value=='<<<') {// Do they want the change the month?
    createCalendar(div, new Date(targ.getAttribute('date')));
    return;
  }
  textbox.value = targ.getAttribute('date'); // Set the selected date
  div.parentNode.removeChild(div); // Remove the dropdown box now
}

// Parse a date in d-MMM-yyyy format, but altered by SMP for dd-mm-yyyy
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  
  if (a.length!=3) return new Date(d); // Missing 2 dashes

  return new Date(a[2],a[1]-1,a[0],0,0,0,0);
}

/*
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  if (a.length!=3) return new Date(d); // Missing 2 dashes
  var m = -1; // Now find the month
  if (a[1]=='Jan') m=0;
  if (a[1]=='Feb') m=1;
  if (a[1]=='Mar') m=2;
  if (a[1]=='Apr') m=3;
  if (a[1]=='May') m=4;
  if (a[1]=='Jun') m=5;
  if (a[1]=='Jul') m=6;
  if (a[1]=='Aug') m=7;
  if (a[1]=='Sep') m=8;
  if (a[1]=='Oct') m=9;
  if (a[1]=='Nov') m=10;
  if (a[1]=='Dec') m=11;
  if (m<0) return new Date(d); // Couldn't find the month
  return new Date(a[2],m,a[0],0,0,0,0);
  //return new Date(a[2],m,a[0],0,0,0,0);
}
*/

// This creates the calendar for a given month
function createCalendar(div, month) {
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  var tbl = document.createElement('table');
  
  var topRow = tbl.insertRow(-1);
  
  var td = topRow.insertCell(-1);
  var lastTYearBn = document.createElement('input');
  lastTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastTYearBn);
  lastTYearBn.value='<<<';
  lastTYearBn.onclick=chooseDate;
  lastTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-120,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastYearBn = document.createElement('input');
  lastYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastYearBn);
  lastYearBn.value='<<';
  lastYearBn.onclick=chooseDate;
  lastYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-12,1,0,0,0,0).toString());

  var td = topRow.insertCell(-1);
  var lastMonthBn = document.createElement('input');
  lastMonthBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastMonthBn);
  lastMonthBn.value='<';
  lastMonthBn.onclick=chooseDate;
  lastMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-1,1,0,0,0,0).toString());
   
  var td = topRow.insertCell(-1);
  td.colSpan=4;
  var mon = document.createElement('input');
  mon.type='text';
  td.appendChild(mon);
  mon.value = getMonthYearString(month);
  mon.size=7;
  mon.disabled='disabled';
  
  //var td = topRow.insertCell(-1);
  var nextMonthBn = document.createElement('input');
  nextMonthBn.type='button';
  td.appendChild(nextMonthBn);
  nextMonthBn.value = '>';
  nextMonthBn.onclick=chooseDate;
  nextMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+1,1,0,0,0,0).toString());
 
 
  //var td = topRow.insertCell(-1);
  var nextYearBn = document.createElement('input');
  nextYearBn.type='button';
  td.appendChild(nextYearBn);
  nextYearBn.value = '>>';
  nextYearBn.onclick=chooseDate;
  nextYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+12,1,0,0,0,0).toString());
  
 
  var td = topRow.insertCell(-1);
  var nextTYearBn = document.createElement('input');
  nextTYearBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(nextTYearBn);
  nextTYearBn.value='>>>';
  nextTYearBn.onclick=chooseDate;
  nextTYearBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+120,1,0,0,0,0).toString());
   
  var daysRow = tbl.insertRow(-1);
  daysRow.insertCell(-1).innerHTML="Mon";
  daysRow.insertCell(-1).innerHTML="Tue";
  daysRow.insertCell(-1).innerHTML="Wed";
  daysRow.insertCell(-1).innerHTML="Thu";
  daysRow.insertCell(-1).innerHTML="Fri";
  daysRow.insertCell(-1).innerHTML="Sat";
  daysRow.insertCell(-1).innerHTML="Sun";
  
  // Make the calendar
  var selected = parseMyDate(textbox.value); // Try parsing the date
  var today = new Date();
  date = new Date(month.getFullYear(),month.getMonth(),1,0,0,0,0); // Starting at the 1st of the month
  var extras = (date.getDay() + 6) % 7; // How many days of the last month do we need to include?
  date.setDate(date.getDate()-extras); // Skip back to the previous monday
  while (1) { // Loop for each week
    var tr = tbl.insertRow(-1);
    for (i=0;i<7;i++) { // Loop each day of this week
      var td = tr.insertCell(-1);
      var inp = document.createElement('input');
      inp.type = 'button';
      td.appendChild(inp);
      inp.value = date.getDate();
      inp.onclick = chooseDate;
      inp.setAttribute('date',getDateString(date));
      if (date.getMonth() != month.getMonth()) {
        if (inp.className) inp.className += ' ';
        inp.className+='othermonth';
      }
      if (date.getDate()==today.getDate() && date.getMonth()==today.getMonth() && date.getFullYear()==today.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='today';
      }
      if (!isNaN(selected) && date.getDate()==selected.getDate() && date.getMonth()==selected.getMonth() && date.getFullYear()==selected.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='selected';
      }
      date.setDate(date.getDate()+1); // Increment a day
    }
    // We are done if we've moved on to the next month
    if (date.getMonth() != month.getMonth()) {
      break;
    }
  }
  
  // At the end, we do a quick insert of the newly made table, hopefully to remove any chance of screen flicker
  if (div.hasChildNodes()) { // For flicking between months
    div.replaceChild(tbl, div.childNodes[0]);
  } else { // For creating the calendar when they first click the icon
    div.appendChild(tbl);
  }
}

// This is called when they click the icon next to the date inputbox
function showDatePicker(idOfTextbox) {
  var textbox = document.getElementById(idOfTextbox);
  
  // See if the date picker is already there, if so, remove it
  x = textbox.parentNode.getElementsByTagName('div');
  for (i=0;i<x.length;i++) {
    if (x[i].getAttribute('class')=='datepickerdropdown') {
      textbox.parentNode.removeChild(x[i]);
      return false;
    }
  }

  // Grab the date, or use the current date if not valid
  var date = parseMyDate(textbox.value);
  if (isNaN(date)) date = new Date();

  // Create the box
  var div = document.createElement('div');
  div.className='datepickerdropdown';
  div.setAttribute('datepickertextbox', idOfTextbox); // Remember the textbox id in the div
  createCalendar(div, date); // Create the calendar
  insertAfter(div, textbox); // Add the box to screen just after the textbox
  return false;
}

// Adds an item after an existing one
function insertAfter(newItem, existingItem) {
  if (existingItem.nextSibling) { // Find the next sibling, and add newItem before it
    existingItem.parentNode.insertBefore(newItem, existingItem.nextSibling); 
  } else { // In case the existingItem has no sibling after itself, append it
    existingItem.parentNode.appendChild(newItem);
  }
}



/*
 * onDOMReady
 * Copyright (c) 2009 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
function onDOMReady(fn,ctx){var ready,timer;var onStateChange=function(e){if(e&&e.type=="DOMContentLoaded"){fireDOMReady()}else if(e&&e.type=="load"){fireDOMReady()}else if(document.readyState){if((/loaded|complete/).test(document.readyState)){fireDOMReady()}else if(!!document.documentElement.doScroll){try{ready||document.documentElement.doScroll('left')}catch(e){return}fireDOMReady()}}};var fireDOMReady=function(){if(!ready){ready=true;fn.call(ctx||window);if(document.removeEventListener)document.removeEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=null;window.onload=null;clearInterval(timer);timer=null}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=onStateChange;timer=setInterval(onStateChange,5);window.onload=onStateChange};

// This is called when the page loads, it searches for inputs where the class is 'datepicker'
onDOMReady(function(){
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      // Found one! Now lets add a datepicker next to it  
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";      
      a.setAttribute('onclick','return showDatePicker("' + allElements[i].id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, allElements[i]);
    }
  }
});




 
  
// Converts a date into '12-Oct-1984' format
function getDateString(dt) {
  return dt.getDate() + '-' + 
    ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()] + 
    '-' + dt.getFullYear();
}

// Converts a date into 'July 2010' format
function getMonthYearString(dt) {
  return ['January','February','March','April','May','June','July',
          'August','September','October','November','December'][dt.getMonth()] +
         ' ' + dt.getFullYear();
}

// This is the function called when the user clicks any button
function chooseDate(e) {
  var targ; // Crossbrowser way to find the target (http://www.quirksmode.org/js/events_properties.html)
	if (!e) var e = window.event;
	if (e.target) targ = e.target;
	else if (e.srcElement) targ = e.srcElement;
	if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug

  var div = targ.parentNode.parentNode.parentNode.parentNode.parentNode; // Find the div
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  if (targ.value=='<' || targ.value=='>') { // Do they want the change the month?
    createCalendar(div, new Date(targ.getAttribute('date')));
    return;
  }
  textbox.value = targ.getAttribute('date'); // Set the selected date
  div.parentNode.removeChild(div); // Remove the dropdown box now
}

// Parse a date in d-MMM-yyyy format
function parseMyDate(d) {
  if (d=="") return new Date('NotADate'); // For Safari
  var a = d.split('-');
  if (a.length!=3) return new Date(d); // Missing 2 dashes
  var m = -1; // Now find the month
  if (a[1]=='Jan') m=0;
  if (a[1]=='Feb') m=1;
  if (a[1]=='Mar') m=2;
  if (a[1]=='Apr') m=3;
  if (a[1]=='May') m=4;
  if (a[1]=='Jun') m=5;
  if (a[1]=='Jul') m=6;
  if (a[1]=='Aug') m=7;
  if (a[1]=='Sep') m=8;
  if (a[1]=='Oct') m=9;
  if (a[1]=='Nov') m=10;
  if (a[1]=='Dec') m=11;
  if (m<0) return new Date(d); // Couldn't find the month
  return new Date(a[2],m,a[0],0,0,0,0);
}

// This creates the calendar for a given month
function createCalendar(div, month) {
  var idOfTextbox = div.getAttribute('datepickertextbox'); // Get the textbox id which was saved in the div
  var textbox = document.getElementById(idOfTextbox); // Find the textbox now
  var tbl = document.createElement('table');
  var topRow = tbl.insertRow(-1);
  var td = topRow.insertCell(-1);
  var lastMonthBn = document.createElement('input');
  lastMonthBn.type='button'; // Have to immediately set the type due to IE
  td.appendChild(lastMonthBn);
  lastMonthBn.value='<';
  lastMonthBn.onclick=chooseDate;
  lastMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()-1,1,0,0,0,0).toString());
  var td = topRow.insertCell(-1);
  td.colSpan=5;
  var mon = document.createElement('input');
  mon.type='text';
  td.appendChild(mon);
  mon.value = getMonthYearString(month);
  mon.size=15;
  mon.disabled='disabled';
  var td = topRow.insertCell(-1);
  var nextMonthBn = document.createElement('input');
  nextMonthBn.type='button';
  td.appendChild(nextMonthBn);
  nextMonthBn.value = '>';
  nextMonthBn.onclick=chooseDate;
  nextMonthBn.setAttribute('date',new Date(month.getFullYear(),month.getMonth()+1,1,0,0,0,0).toString());
  var daysRow = tbl.insertRow(-1);
  daysRow.insertCell(-1).innerHTML="Mon";
  daysRow.insertCell(-1).innerHTML="Tue";
  daysRow.insertCell(-1).innerHTML="Wed";
  daysRow.insertCell(-1).innerHTML="Thu";
  daysRow.insertCell(-1).innerHTML="Fri";
  daysRow.insertCell(-1).innerHTML="Sat";
  daysRow.insertCell(-1).innerHTML="Sun";
  
  // Make the calendar
  var selected = parseMyDate(textbox.value); // Try parsing the date
  var today = new Date();
  date = new Date(month.getFullYear(),month.getMonth(),1,0,0,0,0); // Starting at the 1st of the month
  var extras = (date.getDay() + 6) % 7; // How many days of the last month do we need to include?
  date.setDate(date.getDate()-extras); // Skip back to the previous monday
  while (1) { // Loop for each week
    var tr = tbl.insertRow(-1);
    for (i=0;i<7;i++) { // Loop each day of this week
      var td = tr.insertCell(-1);
      var inp = document.createElement('input');
      inp.type = 'button';
      td.appendChild(inp);
      inp.value = date.getDate();
      inp.onclick = chooseDate;
      inp.setAttribute('date',getDateString(date));
      if (date.getMonth() != month.getMonth()) {
        if (inp.className) inp.className += ' ';
        inp.className+='othermonth';
      }
      if (date.getDate()==today.getDate() && date.getMonth()==today.getMonth() && date.getFullYear()==today.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='today';
      }
      if (!isNaN(selected) && date.getDate()==selected.getDate() && date.getMonth()==selected.getMonth() && date.getFullYear()==selected.getFullYear()) {
        if (inp.className) inp.className += ' ';
        inp.className+='selected';
      }
      date.setDate(date.getDate()+1); // Increment a day
    }
    // We are done if we've moved on to the next month
    if (date.getMonth() != month.getMonth()) {
      break;
    }
  }
  
  // At the end, we do a quick insert of the newly made table, hopefully to remove any chance of screen flicker
  if (div.hasChildNodes()) { // For flicking between months
    div.replaceChild(tbl, div.childNodes[0]);
  } else { // For creating the calendar when they first click the icon
    div.appendChild(tbl);
  }
}

// This is called when they click the icon next to the date inputbox
function showDatePicker(idOfTextbox) {
  var textbox = document.getElementById(idOfTextbox);
  
  // See if the date picker is already there, if so, remove it
  x = textbox.parentNode.getElementsByTagName('div');
  for (i=0;i<x.length;i++) {
    if (x[i].getAttribute('class')=='datepickerdropdown') {
      textbox.parentNode.removeChild(x[i]);
      return false;
    }
  }

  // Grab the date, or use the current date if not valid
  var date = parseMyDate(textbox.value);
  if (isNaN(date)) date = new Date();

  // Create the box
  var div = document.createElement('div');
  div.className='datepickerdropdown';
  div.setAttribute('datepickertextbox', idOfTextbox); // Remember the textbox id in the div
  createCalendar(div, date); // Create the calendar
  insertAfter(div, textbox); // Add the box to screen just after the textbox
  return false;
}

// Adds an item after an existing one
function insertAfter(newItem, existingItem) {
  if (existingItem.nextSibling) { // Find the next sibling, and add newItem before it
    existingItem.parentNode.insertBefore(newItem, existingItem.nextSibling); 
  } else { // In case the existingItem has no sibling after itself, append it
    existingItem.parentNode.appendChild(newItem);
  }
}

/*
 * onDOMReady
 * Copyright (c) 2009 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
function onDOMReady(fn,ctx){var ready,timer;var onStateChange=function(e){if(e&&e.type=="DOMContentLoaded"){fireDOMReady()}else if(e&&e.type=="load"){fireDOMReady()}else if(document.readyState){if((/loaded|complete/).test(document.readyState)){fireDOMReady()}else if(!!document.documentElement.doScroll){try{ready||document.documentElement.doScroll('left')}catch(e){return}fireDOMReady()}}};var fireDOMReady=function(){if(!ready){ready=true;fn.call(ctx||window);if(document.removeEventListener)document.removeEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=null;window.onload=null;clearInterval(timer);timer=null}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",onStateChange,false);document.onreadystatechange=onStateChange;timer=setInterval(onStateChange,5);window.onload=onStateChange};

// This is called when the page loads, it searches for inputs where the class is 'datepicker'
onDOMReady(function(){
  // Search for elements by class
  var allElements = document.getElementsByTagName("*");
  for (i=0; i<allElements.length; i++) {
    var className = allElements[i].className;
    if (className=='datepicker' || className.indexOf('datepicker ') != -1 || className.indexOf(' datepicker') != -1) {
      // Found one! Now lets add a datepicker next to it  
      var a = document.createElement('a');
      a.href='#';
      a.className="datepickershow";
      a.setAttribute('onclick','return showDatePicker("' + allElements[i].id + '")');
      var img = document.createElement('img');
      img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABGdBTUEAAK/INwWK6QAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjM2qefiJQAAAdtJREFUOE+Vj+9PUnEUxvPvar3xja96Q1hGEKG0ubZqbfHCNqIVA4eYLAwFp0LYD4iIJEdeRGGZwDAEcUOn9oNIvPcGgjBQfHE69/YFihe1zs59du7d83nOuR0AcOq/CgEqWbaHDqaD+clF1rLAmija6MsZ5vb0s9nB1xm168s9x67y6Y7q2TaXjo8tVKjUTv7Zt61pAkwt/UA3zFwFuxysV2BKAuYeMAnBcBaGukDdCaozaLg5sUGAiQDLA3IIDIBfAfO34N118PaDRwYvRfBcCMrTaLg2liTAOEW3NjzpBZsMpqUwKQaLCMYvwGMhjArQIDfGCTDqy3EAX47lfVTnCo3qCnOzJ8IpW6pJR2IEGHn7/bBaR5MLO8y8CtPuKO2J0nMfGdKr+5uZ4kVdhAD6N99K1bo7ynB5vHpj3AZ0NxWBbs0KAbTur8VKfTbGeFcbkc1sfnBHuA1CzTIB7js/H5SPffFW3q9sau2PDdLhxkl3X+wiQCVYf4Jt3h1Itmb8iBvEusZJd2a2CuXjxXUWU5dSnAZ5/b0QkOobgMKWzh8eMcXaXr6aYSqfcuXtbAkdbS3RfSD/MGDfvGFO9ZuSfY/ilx/GLumi57Vhgfp9W597ECJA2/a/v/4ENLpYKsDo3kgAAAAASUVORK5CYII=';
      img.title='Show calendar';
      a.appendChild(img);
      insertAfter(a, allElements[i]);
    }
  }
});
 JFIF       * ICC_PROFILE   lcms  mntrRGB XYZ     ) 9acspAPPL                               -lcms                                               
desc      ^cprt  \   wtpt  h   bkpt  |   rXYZ     gXYZ     bXYZ     rTRC     @gTRC     @bTRC     @desc       c2                                                                                  text    FB  XYZ            -XYZ         3  XYZ       o  8  XYZ       b    XYZ       $    curv          ck?Q4!)2;FQw]kpz|i}0 C 


		
%# , #&')*)-0-(0%()( C



(((((((((((((((((((((((((((((((((((((((((((((((((((  } "                                                 g&Y'3(Qq!J}z8JaQLL|[1Xeb+}Jh2h,o0p#'\fhxr9[ j:pvr-VV:$VnzlmO2e^{,8*X0+`W^{WUqGy,I
pd9g8:(ep%v)VQ\"
k|Z'*2:eAUThT_.5XEZ.GV}Zulr;\OvuI*,h,3.xx^ V]ppS}sq_pfJ:Q@T9it\mup<GoLcv(j=p>\]f.;~[9vANuS(*='ta#kwBZ/O=_
:zDm^+t(+@6!0lhY6c)S9^mC^/90fMB!	,B%9P2#6Hy8EMm.:ZU<*	B2%ciQ]VREJcB*HVw_
CeVP
e14 c	&_YR.y5n,|)N(U mJ&Imdr++Le707Ul6l0c3Tb
TWhzNY'j}6SGmJ,]V-':(b&kT(m5n9Qobb7D+70^/pI2/SyKZ-ckyiJPMN^	j0VSr6oVPz7sjVtQAOr+ef-qe#Qh%T/qRo2Lr26w9jZMa=?Y0</^"4tyRj<g~d!5U!E	I)Ek9`;2v
S^op92o.?d#Z:=^5V'U"el,FyVb]aa,P2*Qo)@AqY:UM4R8^^z+z/WDg&q[
CWZ]	 *tn$Neldhj&}uptA*pu{8JVBLzQ6tQ962F0z)kP YG$ri**r1cD>[5PNtm`I)s$
 
j5rKZKO U8xqgdw(\F@sYCLI[}'c><&jS3E&AJCEbpmJ51_ ,      !"#12 $%A34   rF3Lq1pKq%<Su4},e+Aq,,<|jAl:3:3:3:3:3:23.P"y)%	xWqS:3\F@!&gFtgFt`
:3:3:3:3:3:3:3:2Sj8OYq,WF'6 c2"2uE&jl-ctvZDm)Y6m-4,Q05&"\Wo6hm$;ylr6Bt6nj+4N}:\5UspV}jU  fqRTIo^6pE B&sK:::::::$1UG !O>T)dtH#9"]adpD22aT";^p9~liLoQ*!vTtRzskZSW;Js+JemAUkt\CNeZHvVE9v6Sz[MQ)$F
];RI->3B-ip\oezisq96l69&1#'xV
l1M>9a6c+ k{;4Mc6_LD
;c`Oq8)ZbC_smr3fl8g6l6l6l6l6l6 AX %AF<yC>hu@!XG`pi5d~ q9
;eB_fy=u\YV3S,pm76'6e]ijK%la$376l6l6l6bWTaR5LW3WoC'd, 	{IW$Pf%I@U1ZB!qK+F+!\&HO]Wc+RoiL4N1bTGHuxF$kLJqQ6l~#6588:{#E~/FfFTb[?g;p
H`]\"w r%vUEt&5.pIDM9iZ
<Y;JT1$ #CD`Z2)?jI~VZ	jFT+-9:DB;KU<Wq=+'jfm9.vw&1Q2P0z!T8h|%'\w0D$ex%	6ek7@X|*GXo=?k&bi. BA:Pj)z%n;7ymXY>aYMV|?*lXX)E6yl[^]
1W-]d>D W<Fvn/|7}*Zc,dv1P0;6f|juDh@#:XWhWX.rs%Fr2=7 ",d^`c-wNr3<}#vQmNYis\9!hv	jt5TX>U6},Z7YZ-M

LebG)n2M.]Z*FE"&Z=n8	V9(cpl-4K1gr\JRKrv{o3m5Zm88"8kC^[D`]}7]?R `Tf+&Dcd^KR!GT WD a@~0/W|<b*O.|M++QP**9'VBUNNf:2O2E6>uo,klT2Vwui+N5bKlff#HP8f:z%7`
SIBP{r f[V<5Mi|X]6"15p2F5W6fmkj4| $VHT&f*Ze2?v2p2esa21N	-cKr3@%Z8ey4992! Foi{;OGIC30YJL_+pTdXL`Av/aq8,9BWBF)SB{6C-/ m96d
7-z7 7*0:-'}DxSZVNJI':|GY",m\b/\m 8?]J
_ ypf'EC|/aE#b}<G NG3s	-GB6&"%eEThv]Jw9nv1obPewE
cj[q1%n%7-)viboY6iZ-|Kd*%z2*pjIr%MZ	v5* ZUoOY& #JT3t' - Z`2 ,Y`x4<Y>6~:,0^RHGkE5E>m)-Rtmu,
 m\0 |`-xWkW';4Kt:6c}xLDkh[B-Au{iPR[IhzBQu_PYZfY\bcI6qq|!~3`&{~9.["+	yq/<2oU5&Jc 9y?EqPE[&*M|\aTXT	S9Dq,_9UO*M`j,Qzp-PG>Vmgy7ZmqkHSBQU)!y4%+d,ESqkKZT[Lds|+l ffHNt g':+&sVMA38HgPowwwwwwwwwwKal,,}\C';g;g;;;;;;;;;P7satV0s\ai $        !1A Qa"2q ?2[22#LLz}~F/Y	YRcgpw;&?|ni}<L}^fecoE.Crf&&&&&&&YEq#TEXb\F6.MtvGi}Gj"QFQFEz\Q{DEGQ0bd<E(Xt8$k(+b1d
,(:mh HhR2?_^$ E|(B9hrQ]Y"i!i"<L2NYc|'gEQUH_#3=
bPqoGDQ\Q\gq00Fs1G\eRCF$$Iu%5R(Q\W (       !1A "Qa#2Bq ?=	d)&97f(z:-Eh[B4/jhmp'u$+~>J_QM,TZeFH)	$ddddddY'4Yi(Deq ?rr}So3/5e}3&9HrfmI^(Y'}'hB)G,rPZCfCff9f.e9ddddY'N;Dz1/dGKr)tzU
FTddsrY	;rgFnUg77w(kM	E~D$RVr9m!$)G}8=kC~&1%!ZL(r5i\EG<ImZ#oLU#K^vf"xXGCF6PQY(#6JEtbaf?)2S,f5?Jd 37##&f{Oj=FE31}d2R#7{fFfug} D    !1"2AQaq#3B 4br0R$@CDs   ?tep=(JD#TI>I*W<;uB"k{$kx6}<5vgTe&	*5No{#Bc5]`M{FpAeLP2% z+hs _6Y1 [|u\:qBc#6YTopa
$XM+L >WVJyB47>u0TmXZ*6gYj5W{n1
5t1ueld 5Ws.q2N,kRCm
lU!Lvn!K9mVS&Z[mU9[lBX*9rPI*)<:$ W&"L>%lG37cwmk.&$gihU>[3[Dnu;`Wm`([=S.}|f<9PU[SVyt~/[!aod/0sGO opqcL$wu^]3BlhA7(kZD}wG&thUawC,>	hn'5o*[OM:	2PU6p7f'jgm6{Bn=nKH2z_U7rVVc<1?cXZ;A_2)+776Tknbbx[imVUMI*IQQ{jeShmMGjqwV-TUvegG<v{KdWmp6`vt[<< &-{rPT5k4ZnzmuUa+{jrr=Ev\Tk%qMKNOi.-\KS[QzQ^
^Vv)Tx7jzVYisnT=Dd"HeM=:`uO#Qd)GUxt6c+ym)6Ks)r`c JnIgIT\L	O!`W 'mF0aq'<rB|3~k53~k|]>_xWo+at,IwNs*l|p`BuZYV?ukH!!#)9u#Um3w`zy*-#k1*D}7o1: eATg'cVFnzL4*-8.K3B=XW9+nty7yea_N%{JQI^7I^|-HsDV(@u~%\hc?{GsaF
%WNGaKA}&TjGukwZ\@*=4\Wu>tRpe#/cng\ZAn	,kTv<]-	6e[H)l 6'YEBr:KnE'qi^Nse`T4UmVTn Rc8^':/mA	st:L f[[7e?jt1{xa[[26\k\Y~Z \ B?jxf:m-?pkA>UT3W"0b>(p7\UY{*;z9N:H:K_u! 'Np	\)`*0(-C{Hgr8CUwx|h48;L@{&(^%Nw75V;9Tt6&V}$'Z)wu<*Zt4oiu9Y5])nuSc6V3f%z2G(lk)ZR	jUhl#hS;3	t{Hu?-CxI)9}1!AkuM,5i6upllr"4^L,P}@TxC1U61`T.(qb%8=}+{C>H0)Lz0<4vA05]5+m<]0j3wL{[x?^
#VLyu\g l4jSaG)Y\|z7-}g 6hs2[9O/_\ uP?.jk I;B? *{Km\? f8[GYkcSvU ]Q?"{.#\UPtTpIkcjYvHI*|x r7Mep'y=#  [e&t(HS(RaX\-t''q%!F^AqSkJmhK?$mn>zoD@D$}JxQ0CS-vNc^cTmv;.|j{'9q)rc&pJFi^9"UTRKASkRwBvU2*^e',n:?T.s@V6&~/]0,=~I\wj#6<Wc}W-[:	 t*]KSi
W/#t)y%F$%apdN^fS!`q @t
zB-V'+]0: Z@o~;J-z,tL83m&Y8$iwg#]9r(e_VKA;6 )Mf1*g0[kjk|*)nm N}F{'GCHyw%Fi:AYtt Qh]*UNj'-k_[tL}:Z%M9K^)sfo_i4RwnobPl1On gTZ
kAhgFn< }4P<"W!s8 ){Y~ dg&9u "nNV5
9S;XE5(Jv	V,.!R}%;-!*rS#aa:aJ=A4	,5<_4~ {mJuP~!
mfI0]NU{ FW9=G0C\ NQ?h~JrO[.g~?!&r?8d R@ kie=$84-8fsg7aO`ysz&au|:Pc::KV78m#T{+Uc V'H v@=#in>1E).4[%47p@u>ii 
|i0.\A,f:,	G!<g6|SEA(m"D,ksTCe]*Z"`>h,ot=^i h?mKYg>^1VoVY20#	 k&S|<y?9zVCp ^{F~ ^?%0bnBh25W fl-LSOvn-]N7lO@eCh2;)[?e&P}z`JMp<'imH@SiOnnK.L"33 _[j4F780 vN 9l\
$TN/?uU$#gSQepXk#^aLdy	;U$HF.!G3|5~Y$AQ-RYphDc({CdnlS:*<# [%0}sTveg^?p>7&5[9lhhuJT<Ti3jG;/b:VB-f/&HBv?zFm^8G n7T3O,u{I
i?SE&=,i$2s2xQeS4-itNk`CLP5q^A{Eqx'p:7	ODh@p?Ixn lQ5e<>icj/4;Jo(iWyxp`<@B YOPiC8LmF(8Ex.7cTK.E",?i8}>(&|~tG!3R E8L	P+4w	e63*OFKvfnw1vR C;* 7m,>mdt2O9D:&2	1-S$Dtd[kTAF4wQ#6&{~AAoG'R!1>9.[e&>5o4hZc9o dg c-8Z@"U?tjekjV7o|QdIe8\0DISgk	-p:e#A1ck=g6U
^-Vbsag;smdcm74n4kdJ^"iC8 ]QV
.>+6Uh6[wI#kI>+PiPU`NZi,<J zxN"zQX7zFHZz"vUw	Qc*ve<Xr~k[:{5mwA| tBW2|<Vlwy
VR)&\ER5k\}4_9A&~HA:LtjFaN08xb<*4ve86e.vZpU5%s
ad J5
yi3[ u}s;$7>,o@Q8hk-EfU4j)6 +6KB|:R: tT.OzV^(7CGe0; z=d#ZK\,Z?5I%^E\jW_B?Z=4
Z|qJp-3ZtRywyi8F5O )     !1AQaq 0@   ?!Y
e[obz)Xnss>36n`o=Djg0j\-g #0U }J
Zf4C+)Fd;_"q='G,o=gzY=goRsZfzD
=gH.Br,([qL{zOI0+^zOI=&\ZzOI='zOI='<] l(FGQ3X(y%l(,WtxF,4WOE.t8EU,xep;
a(%b~z2NOcUs"2|~ 6lgGD@a_QH?hTLqo@<fwBsaWP\lKj@OD*\gO$P)	8^	6({</`bh_\(~g.jl}Z?7wz2P'b(%F-s|F
LGpKgzOO=?=?S8fX&X@ED)<U50J(rOkn1?UuUAq,2u	HXhoaG'``.0H9-(y'}c|hqYDF\fnJK~RMa*<g"=gYgu[,s5ktla@dV\R;o?RWsx^&b,8|AZ9U,/b~+bigEnD_*{;K]`sgX	Jqkh6U}SA0T|L P}bd{>!N7*#7[,sfEUt\M 1CXeFkN`?{/SXWaK5C\g2yd+_AadN;a,%-;y[+chl=f5KS8Hd/CpW0:T~U'qV j5  jlN$f,; =Ru00q!Ya>w HL ?Eg)m+d G  B[;
u*	4f_D
KTk^#1g ^ P -=Eqva\4NPiNbeZC+JOo0=Y5~/'<MY|Qe7ZKH*e|U7;=Boo.gpVVT;Kg4T]fVAsBxJ2gE_P_n9LJrp0NrTIc# `VA?sDjvh'@6  NwTg *	?rve*9TU%5}K	[IXv^ik+YAtAbvJyCe7@t0`We=qnB}1mK3[!<@uTsenQj$
Jd|	Es-\{L 1!PVW< *s+T\ %t1mY@X /b>&l
	y&\THR'4gR RZ)Juo!"`_<U6x Vs::~
'O~y~.9O8Dm6Ox>n1:aA05la=5U ]XNa)n!fAqqX5-kx;-G1LMv4Z<m`
A.\{v'u 0y)jcA$a[ 3f/g.V_2ifE
\Cf-tJf=A2K. nUfU[\)rK][9=)ymMk`BA~wRbK+),Yf- ~\@t_yQF6P++'\+:vFM3_l4J5_V B#O`Q_~_}u9Zbj*^<MMzCq5uQvsqB=3(5smKhAiNP]1~?)7(aW(l+5_/	qn^j^j*9zy2T| 1G/k+)Wvpsj00Whe2 SzRL#IqBnMz:>'YpJ8V|CJ8U9<+_07x_+r(t Kug*N\v@?.]/Kk& 1lp!`J@[cp,4\1NKb8J~+<_o)1RC_TbY-W5Q|{\Dub8rpS #nZ)7[F(uf{	ABFx[7%3/Ffa6;<Cfc/Rs--F}3/a,zq_ZNL#w~L8FW'Vhb"XK1MWjq#oKtKTuA)o5laAWSs]w
?u;U**P4=yjIa"_	@(@p!#H#  5  Q p^mpk-IUH?[CmPqc%hSJqC5Q0r\T7uTm6Jh8\Y=L*wk3h1mK2LxeC"NAYXSa"'3%Eb@=fV,Pxf-Q3dPr?B[a3alfPHdN+,G&p d3U6aUkF] iTF?0DGnn<,r
<\	e	 Bz:2^ UAx`uD@Q|y?WP5R$h.? c>|=; ,WrA
p~!o%0>\Fsy-ox P-W)c8X.Zu	#W8B
_qq*Wt+4&nCnj>`7--,Q*mQW:icWy@a>%7"T%X8P*7Yi.X4n~dVNeG`~KEPcX}EZF}e-K42tu-MIAQk( Js;[
 3fh. mq@vxI D%b.g?f U6\]&`XQ$RXUfIC%? (}TOMIvg:j ywR9caOF*)B%2DhPP26uzUt@s0wKop6zR4)0rdD|* b]UTA	<_T `7KYs!FgM@ T^P?Is?A?+niU2!av +APldj]%~u>X tg \)	fF9;Kyoat:)s&W4_u GhB"KrC?):\P c2)V~EuKdx4djy+;2u"W[14neUi VWp"pvqyQea@V^J+{N\ <"()piPi+/R gMNg(0fW+Ue+rI__?)pmsX9MV C@P3/mQ	|q_D[`Jg+-xuek],l}bNqE-
A-qaL.2]%..e\C
./M6|~_B#Jq.'!/-_T\=![[g:bq*,W+0	.a#Y$QKGXZ-<pkW\n,,:?6]'wY]T}E%az
Kl
(VUE&j^APNytlx-Q%n}'&P4hMt
![C((s! OZ*.@b-}H~e\ s&jo\SJf~m,Fr&'Uen7cc!"VOj,){Eymy J0)VWk
/Z4$tc,8`U.5j:zMtSRJCT$puH9pTh(tbbA-
\SnE @B)xALEHC+x[.]:AOiglJV%<>nsq,<Z&Fwr*PcDLp.	jt* \{jqwY|VeaGYD Jx!pV$,/*%YeU\`SH._ WsUt#@@:~L@"<vh
gf[> 6>42n*JL/F|~5A/]_AzS-RDK-B0-W:'E=(a09!95r0w"?U9Gl-
yUGbjp
z0A@2Y@ ,E07F^q&Rpt 5xWcT`<FVKj*uj|J1qYJCPd>#&VNKPuM7Yo:Kjb;0[{}12Q2KV6K[Se3)#QAfG0`ExYX<RKZ	u_X\TlG@8jw>}b9	6?O! 9a7KUy @  ,C^"dRz?MOdy<Qil<Ep,OcQy_;EWP>qY:>9jt
`.*     "P)_UT3f`o]. #4S8Rra:bqDlf)>gS}4ERdm!z^d$>DF
+Ivsl2`XA12\fnMUo?1fYV(4Lo'	{$s(<M<r;JBLLm&WRA
X4)o8 ?7;{Tf_l]g|YiwsS^ #       !1AQa q ?_V,N_RK\dTSowKQzf/A{o		Owgxs~~~_xt<bZjs\y`a5~/6$9j?vog<X/0e8_w_=P
4K$O[>jVB</j0u,S<6[Y:Vv]cdhA8  &:0w
]6,	Sz]sza<iUx\Wqr6F6P/n|_o@|yw;w%]_`NOV-"}^<X|Hu	EG	k|d9c=`kY'r<^z%m?	l{cuvX'^	z-gnfI8A+@s<[~X<G_K7t< vw.@ZakXc,<`,2e6:m'n=I{63 /`: -umZkpRRE2(bRe &      !1AQaq ?un3W=:`X9)b]rOgf]|(_.3HY,%x 7?7!IY 8lf}Oen6fDL xZwf6Vcca>/y'z~ Kdx {BwI	g,z~_k`cu0ClI4D?_7~\Ei}h rqs2k<?g[N=#	,,	.n;n(. O>/nr.2',On{a?s=gennA}!jx^{#+40<$N4d|A@=2F 3f e87d
G]F|k{`MqR#C%,LnK_iq3,]Ahlvo!oO$yoM?Cc+.}8moeP*Hc;+>4`z~X\%$!C=,{?^=k!],uea%b!{|gf`O).2Krt/_P@Bc@yj '     !1AQaq    ? "k^i-ZRpQ !q|2C+2I<f	 60|3b\*N|,svO089feu	'#mL S 9h'sij~Y_+a"~0^3*IBa\b+j7T O;9_F&+Tp=3"M*(^|HP:1hIM 3#  s2.##+o"PG23 8db?AG20!:b={X7w/IAT%~+P p(;?=)|z"M80MN
oBP&nKx!PPJG-+_zhjo!4an}XQ  b> !l2pHsxzS%/86OG``h }_y
T8yUE^B#u (-`py&=_*8L8of,['WFp<]Oww4e#@j	Nn&%=_SG"GMCNXqq8DN	7@uCK%yHy-G,H!\9G}jt5whb+(<t %:xpPNngc 
z:|5i,q~6G=`*` Ow/Q%80qi[`g4SqAT4q9#x##F#uZ1\4p?k T1,$Q
7.hyuBwN|BdAo`T%n@5-4>86}
zlxLv9B(bFW@GwW[b01dd[EI)&UHMnm|'OyDDp1;'1'NqC8kNw?Q9'8B%p# qyvV,AOqE!,L*xXqD\E 9}Zhtwy\+'6|\D6p'>_$-xw}?1=(i@'x:xcpmWu@nt##meSRJ t+iE6v Q+]$ 	A<L;5Nn'WIE6oXEnu,CLuZL6 ld%O^3lfpTB$qD+jw(`
TB{1[g;R`1Ga1 54i(
YI6X\<^h&@ |1:eJ:|s|s SVars 1GFO<c7j	D~U =8'US~u<W8E 5&|kMS-"we`Z1{v90QF
?0tBZ<pQ\BE;T
i=Maa<-\8^c'M5`rVQgZuraq6<i_\>r <tX@sY>8w%:X&%7&CFB2bX~=0MqKc0#?nyF -<dU<x>8&V<   @<>? ~97SX0|p`lcq1r2Zk.Mhg8c/ULpAy]SysRR|sW=DZSd@'?'$Wvhh	(Et;fDihgqcUXoQe3gM6>!eoreh&xQ<$|`6%	A|\8Lm >:M >^xtYJj#:{Gi8,PLT Vg0~M=\h_ S>61QUqw^It))2
"~<g> |7pSu>kPHVRbmM2\Br^w9%V1=ootu|`@.  z`
 
'5WK+[\fL?C|O QspBr" Tq4`Vjs\o:0IeV BPA i\':cUJ01;:w3R^!+X#0sXMmh9z,G q)DJj
7&Z-quv<;w'jXvT[#*1[l&hw7Iv<h"mu_l^ >N"l;@c7/"eG\BVMo&3n GkCb7O^g;LE\^s)2<9:<H" $NDNe0 @kwP,BTCi40F}Mbb&c8K 9Q7kL0Kw50Vj5DM($EkW.~t9)vULA n	ka*Us{N:7Q_Bl<o>|'b"-G	,Ru5'L)ES?f8-	 4v{()"oW"-BbEY?.h?7%@;{w bSE-2lWALU;5 NXdA,w2 P<k7cO1htk0e\5avQ;^w`-2Z^$94A^xH" N7XhK6P&{n-9Ci'Ju$,aLAy$spnsB7m{o6(l{` %f=(;JX_)X,;	T	&a$9r`.9Vndg8l>MF9Ub `~s[ nA[z |\wux8C ~X};B[[f"k"4}2 )^52Yd%"dh]k)Iz8#D9Z1Q(?4yCR7/,^gxYm/JbcPI H*4.  b
}av?. BqlOFF9TWOBZyp yYzSw_;fi!3(hy(DWHJ6?f[@[t)PO#lXR(oA'?=Ax\:4h	ITZW Yp@blK`>x/T|T
D9^^){3EU]80qy0y9v[RD,9FLYNypt#,GY(CZswqr#a^7JM*8kF)oXC}g>.(Q?!PC8g0hlw54,GBMTO6 Cg0e GgyCo6K\$(pJhBE-u8a}<,#o XZ0$Rbb@xV	8ZB(Nj8"xhq'r[MXe4^0`P)(O"^nnPk8NT 5T*s3lxtq#!.lxK8_z9Fqi|;"&pwC+\' /,S0B
>Puq mvo,NRs\~p7F:3O8~0xi}69yP)D8 (.H%77[xq; *T'Yq $& ~l(@C78`wBc3O,v
E!?x,*EK[Fa
A_u9t$5Uf^&|sD
+Y <+k$h,%pLz	KmX{[3ux"iT"q=L(l:|a.G/JA1M9f7D6*q)Z0?=w~|$	>SZI9mk_aS"3rl@ptpmd>,D$TO1/]Bq"vhs>rc?`g"7\UBwGrHNat^COHh `,w+4X(+dT8r3lW}|d3NO.s/3(BIn= Dnx?Dr'}0HF81}80o5Zu.x^	NL14EY W{R,!=$(6m6:8~r<B!yZ@E0`i.oc !*KR1@yZ\ L2"<'`<7Fa;8>8".G -
a=`Pp)1VIF7x4T	4!TF@}   mKj81%H@N6	ernY(PgXs>XDPx>N~^c%%9
?\eE__	]bGE+<@0LX}`cXK(qDQo<D<?`-|52$4)p<|'X+~qQE\dYG BUSbY*./#M|ck>.B7gNxpmNIHczgtL7"kvxg_Gy4<z&Xq lA+T'	Zi<yM)UMC&F aWkzu!+Xz,^0PaN'wX'Mr'CM]0|b O`+`(H Q3E'h&ip3Jqu]>nuIeM-[# O~ry&]qaGo`=v#m	_'+.ty:oXLUkb6H%TTXk}r
ie
nvv?	zay]~d(nWBX5.;tNJ6h8%QYNr@H
pUFoYb|\ Ueoz:l^
6u!mQB n M80 ,z&k8O?, xP KHGyAna--!8"PBaoA{h-rI5Js$5./B%H%Ph>r$B KBL)^
_h(E|2:k e'Eu|`tDA 8FIkv/$@z 0cp]9WXk#vP@><wy1kRVmur+TpV7{cM] @9nC
`3B:iHZpds<*60gz" i <"<W 8I+Sun?
ld`p=&.) @ ?. yJ sO77qlQW'AB`Ba9&m>24t8$P'L)~pk-?}WY89gJ|8	[:W ,2@t
(>8EXN#Ilz]  %`D|1,/<X5mnsKVZvGBGo_:pQ ,3/r@G]SV1y7: 7cAjf]"/J,h,66<8@Z
9*+TZ-h>9,p??:":11ky@D7Tn0hbdS99*Bt~NpWPe[ N4G%+{Z7nPUh4I>a
KX9#Hv5hT69(.AZP $o9H,0X0rjx?Waap
T*.! `GxU\Z8qk)yB*WS0Qi/f<x W`gYd*XPV 8 fAM5wJpnX#(9\YdO##*$P2}^r<IV#XLD:F9 Xgs*9\ CU,Y$QIUKRIy4DuPPRcu1cqcq $EL/n%F!Ss1[" c&x[-B d{vFLIm8EN,
S"8&xLi..] ^0DPj{7Pw>*ikA?vZ~n6-4p7A2f~bK QN@Hol dJg41\i.t.~p4KM5S/yz	B{[z=[Pe?hx6^ 8+;b<`jN_!xY897\|,a39"y	5RrsD:Ay0~ NW]|*r@@xo ?o#|;9&L. >zOhj~#tWP	G'C4t?N4W4-<DObrg`T2N))SM ]TvM&O(i? J5[#V0!VgLP@Z)gx lBbL8"b~Cz#rfhqv` d`tPnk[du@$(88wM_(oa	}/e5oJx;;wr+_%$rt'q IEo_YF"_	Sri<`A`Y(U9zwNq) T&Ri(l4(^.40: AKu8
`A9jpT^|yqW^6NxKn.8fym$$mxGc4To5 2$/|aZe4&/WT(m)AA9Tx!,EBMoP\9kWnyct	svex(;HcBk47'W  8P!5%WyR M<_sza8JdUS:%fAKYkb4FyNS|LBC#yK !=e-csv`f kXZLP{U3H^Q21txN*@8G Xw<d+kmtdC6[evWY` 2_Wj ~ AACCW^_/LP,p(o	7/n*
{Y~TXp@	Uypi	n"xxn;w9 .4x=ArbRf S|5wv!GtZ61@NG][th-qgh_*n>q, 9;:T)N\,/.9|3*SCos)T8^wb,TNBtJ&Tm^$`~&	83L1.bTV<aMU@|58S+rg/fwyEgPX<pr
	?.k8TeYU
MDd>|aAY.VSr$dyCFm&`;(H w=2/nr(a#dm|cyq/ #gp?|hC
  ; q:qry{_s^?4?9
h;Gj)`hr S5Etv,w5d\Q
's\ W?s\ W?sw_X4 /Zs.yhxiTfK ~s.=rlcd%@)x1iT@5_MV%fMqypMm4Z`!Qc+ M&h} JFIF  ` `   ;CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 70
 C 



#%$""!&+7/&)4)!"0A149;>>>%.DIC<H7=>; C
;("(;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   "            	
    } !1AQa"q2#BR$3br	
%&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz        	
   w !1AQaq"2B	#3Rbr
$4%&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz   ? Z(
(
({]4#(l71[BzI\(_N,MSDns\kV>$ uKK[{{Rp*ao5-Bx59&el#[Z#\[Zm*@!9u4ZpRm0@' ucOoiZ^cMTeH r>\7RLx<QP+]N2:gC.3S_A4kmu0HD3+"*qB2+^H j7\h%)Llru4yDo<M~69b(P .}P^ujZZ,Lo.	Sdp Gi:[jVZzc1 ( ( ( ( +[Ykp66Bdu0FA x~=<Hmf7#Uq=xX\^0tF^J[#6*-ijv:m;"<266n?uW4inL~e{	&DC1v.^{6S>n^O=x(8K\,s6b_NWH9A=k{'Rj%{`p31Lx.
O@;A>g-7^rd:b7/"\$
QcGiXD k-$wK*T9`/IvGN,Hf	I)0rGE#9$;ebjzqYw`|emQ*	(].4Z_bQ# <$)nk/!-g	.(/!Oeedc51FU )( ( ( ( ( /\+s,dpJp!q5kn[h
1c,)#cx]52;W%f*x@)<3qy'+$Wc%r@'lH&^'K{xX)68A82!HD?16zgXn`Ie-0=yql|#
rP/\&	OM5'.V y	b,z.FpK^Q{X["`AvQ/o Q-nJ]v\Um=E7Ny&2$|w3*&G f^mSUH^(RM;~SNP ]01lv+$( ( ( ( ( ( ^{t'YOe,1E{WW,6/|K>jDXDX}q_Ek:VIt8!cDS t}YD$yh>F^|sjzG#j@.BJ$ZlI3u,v|oRCqJd9%n
Cm6kW]9#9\.0L{l[%Wm%}}m
 hb
(
(
(
(
(
(kWPit+d|} S+Q6?.w<v1JK NI=9 1BAOCgvS5	i..Vh`!Tqi3h5K@<P eOk?Vbo-1g udWWt-Rjcb!`I?x Oqlvic@\mRG ` 
+]"04x7)4hg>z,1O5wG !pGsX.pT	86;O=9_1^'HV<79o<M5\AxT3pI ^zO\_xS_J6$GB}x q_E
(Q@Q@Q@Q@2xFP?#> 
j3ZiRi3	
NNKcg=+zdWVQhi +om q|o,WH81JR;z^_oGb&I!f1aHC7t6fF%yDocU @pdm|;+, pop+U]@6Nv>g\`=A#UiW!]lcwdJn4KT4bE!c'5WN,.XmBu	"TE<l X/LSNxJXH"	)oNJ;]oV[+%*$w4yzm^cmn1	}<t}
s_>,xeFB~QE( ( ( ( (YvS{ehb/9' }hf<:+EkeExd~t+kk8lgn-&
3unHzQpt^w'wn=)#Nm&EIuclH95xzC\Ca0!iVau|b[NxfYD.	a ,) xNXHEJ-';HP9((BeH0Ud{oO6p|,s4w|7QRu_s$;:Z(
(
(DEf`}y5+SU,Yn'PUX`c ;V/kl"+AEog<N `v&;Z+vDvi[UhFN;
v}rcQD\lsgPrD2tnW;gk+teK]6hCoInqjah-ZK#8 =q/<dKf-%yfDdE;X[KDu1Af,Bj}ti4&I#2p:Z h!yXe HB77XHfF8 <Ggkq'm$:gkx6IfHC|z 5=*Y{-Bg$`9Vrxw@-oHK;9cpc(D7(uv%K\p295jZGQmo3*l=h1Y1X.mW  SLk[c~b&t[U`-HI?)
n4oil\:"	( tIWtn#*r285h>0uI<2'5`PN7N3D61jS";* N94Q\-5pHm3*U_2k8f8p$aHQ\G[D|,U7AP<<|g9e>:1]2BC(>t kInc+Gqiw_jI( gPAsqsQsE\4S4mb,}3Q@x{Gcmzt!-4ueUU  }Po}Vf0zZh.l'b07-]@*8t>Uc-:nHG'%Z(wVmws G"SH.>k>ipyJ(
ohlm{iZG=2V#'j xcN.G}2"G%NXPxwF8#M2R}{i=mq+HPr(iXAt( JFIF       ;CREATOR: gd-jpeg v1.0 (using IJG JPEG v80), quality = 70
 C 



#%$""!&+7/&)4)!"0A149;>>>%.DIC<H7=>; C
;("(;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   "            	
    } !1AQa"q2#BR$3br	
%&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz        	
   w !1AQaq"2B	#3Rbr
$4%&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz   ? Z(
(
$5[w2sUReh*=[++&]m7
:}kHE[[Nt:rHuwZe>#_]J-.I7
k 02Xc3Xd|Ro0dr-6=G\tc=O<Hr KDB9J]\W#q#3
EOXW$RwVi# Z/}JM(?'jweo}{Ak=H=Xt*[4E%)FH],_$k}W$4|^H!YtRFrU>\-Is <toq=hMOGpe-T/60zr*dSIE!E% QE QEAy{o58O`sF6Q =n"R=@`OnHq[Q5kahFkh7#n $ZO]`	9=(3<+4mcInX?U[-bLMwJB.6 J|C	3,O?c#")8<?5^e%d_+,9:{TjfCfHL `	Ub?k	l<(lO'OSh )WbOU%#H/[h#9<gMN[/?)#q&<IkhBsXioZ%Gp =4I|M\MwT!e1\ x#&3 wE:s\.p)#2 Ig~jz$h>Q[s	< <tA^eg*
K.#P0;q/x^YV.QYk{QEbl-Q@	EPs<81 :y/x-nv\t?SZu7K(4	nnqZl0Fs]!s/Eet'eAyDj-5y-2_cW+m5xwj}kO
d?:}") `N*~!RnIU"PFT&gI4Cy {;.E0nnJh@C5ll66$[r9kx\xNKYfd3F*H
Mbs9T_FKZr[@S kKk{}31T_T>\Q}w|c,z:,Z~mj= A'Eb)o y
<, g!WA4 wzGN+Zynzzv8S)At]='fY_s\t2s@wKta	&-Co<l4r1z^!V {%JJW CB!!un+1]WqYSqhJ(<n>81'Y#![G&p3`~5!rA m;+'~Nmt-*8tY,>;yXj640\ZijM$M.u^*,D2G Jz MylM-Z}:m"#H
Q?3]A 7?#^}]x5FfLc?
/Nli:i9VlUckniEI<i4q%hP}[ftK3Qj;'ea\ Zw^JAR8SUu/y5mFa{!x"gGuK2G~=j~pS`z wo	\=0[
9=0{iJVos_B[' M]FJEK.3 OhDSn ikum\oQJMTr:ws[Q,f/6jk}=)b_<:'jm5]RN9Is]>Gm?h'z*(M8;LeGl-Ghh"RS~i4OOdQ _?6U'U2uN^YY[%it;>.u*0Zv_+i.)KMv D8'"HM]M+JSn^pA,:[.Ul1<8t^Q$0F S=/!A5
4n,RFl=NFIciz'-2F;inq$,` :j;w,?n{VhdlmlyXLMnXcg5/5_B/G
3k}*[XwDc{y8mOOI#&>wF(vqiiYU
s0.{VWR#;~i%Ww{|\J_Aghh\WB|p?]Q4QTnzV\GHWFA-*g+Q@\7<[w>L$9]*Zqh6 ijdRPqOc!R].oj9IOLWw\4CS 0p?mNI	l 3it-[xWK3"yHwD	a6m&iK2$ }}*Q	uDDA8}z_--t/,a$P0'i=N 5Km@_PmB'_ErluGMz;+!`^NNI$E%6O==WN2(uOm4B$_[Wb?R;W4D13,n;*KG\qYy^ym8zE;>	5~[A+y^]c={lb[y711n++IlerG<~w-B(0Q,I*JwuK:/6Q-V7zW
}MRMAujq20c
1 N..xMC$9QCB4wmaMw'9'{]-|+oq:a}+{)mQb[1>x;5B^k8kNl{O^pP|hQEs:IYQHbR@%-O=)9*85o.A`OJGkY4v#Md2n[:7{h}kKv5+pj`QK1?
<wOK/
IF-I)+3XJ[Up?Ows&o2I$Ht
F9^y&vJWjN1WSZp\L\Yfc+XAv{B: 9cSavU-<Ay6
qY$VtxP SXF#yX oo>Dg I<\t>q5JRw #75WgEdQEAaEPRPE QK@	kV)2[y2CZqbqRVg .mUtr*H-#8}yK]{L!r=t$)EE()m\I,sXZg-Au\}py!'M	]o#>EoTqZ
qiIEomB+x(h(((
( [#w^Ek+jwyc!B.N;{i*VK8#1[RkmLjsm2Y;( 8+4m cSRjnXpqVl(( ( ( <?php


require_once 'menu.php';
require_once '/var/gmcs_config/staff.conf';

function login_varify()
{
	return mysqli_connect('127.0.0.1',$GLOBALS['main_user'],$GLOBALS['main_pass']);
}



/////////////////////////////////
function select_database($link)
{
	return mysqli_select_db($link,'staff');
}


function check_user($link,$u,$p)
{
	$sql='select * from staff where id=\''.$u.'\'';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	$result_array=mysqli_fetch_assoc($result);
	if(md5($p)==$result_array['password'])
	{
		return true;
	}
	else
	{
		return false;
	}
}

function check_office_user($link,$u,$p)
{
	$sql='select * from office_staff where id=\''.$u.'\'';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	$result_array=mysqli_fetch_assoc($result);
	//print_r($result_array);
	//echo md5($p);
	if(md5($p)==$result_array['password'])
	{
	//echo 'ok';
	return true;
	}
	else
	{
	//echo ' not ok';
	return false;
	}
}

function connect_office()
{
if(!$link=login_varify())
{
	echo 'database login could not be verified<br>';
	logout("message=database login could not be verified");
	exit();
	}
	if(!select_database($link))
	{
	echo 'database could not be selected<br>';
	logout("message=database could not be selected");
	exit();
	}
	if(!check_office_user($link,$_SESSION['login'],$_SESSION['password']))
	{
	echo 'application user could not be varified<br>';
	logout("message=Wrong Password");
	exit();
	}
	return $link;
}
function logout($message='')
{
	session_start(); //Start the current session
	//$GLOBALS['rootpath']."/index.php";
	session_destroy(); //Destroy it! So we are logged out now	
	header("location:".$GLOBALS['rootpath']."/index.php?".$message); //configure absolute path of this file for access from anywhere
}
///////////////////////////////////
function connect()
{
	if(!$link=login_varify())
	{
		echo 'database login could not be verified<br>';
		logout("message=database not connected");	
		exit();
	}


	if(!select_database($link))
	{
		echo 'database could not be selected<br>';
		logout("message=database not connected");	
		exit();
	}
	
	if(!check_user($link,$_SESSION['login'],$_SESSION['password']))
	{
		echo 'application user could not be varified<br>';
		logout("message=Wrong Password");		
		exit();
	}
	
return $link;
}

function mk_select_from_table($link,$field,$disabled,$default)
{
	$sql='select `'.$field.'` from '.$field;
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
		echo '<select  '.$disabled.' name='.$field.'>';
		while($result_array=mysqli_fetch_assoc($result))
		{
		if($result_array[$field]==$default)
		{
			echo '<option selected  > '.$result_array[$field].' </option>';
		}
		else
			{
				echo '<option  > '.$result_array[$field].' </option>';
			}
		}
		echo '</select>';	
		return TRUE;
}


function mk_select_from_sql($link,$sql,$field_name,$form_name,$disabled,$default)
{

	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
		echo '<select  '.$disabled.' name='.$form_name.' id='.$form_name.'>';
		while($result_array=mysqli_fetch_assoc($result))
		{
		if($result_array[$field_name]==$default)
		{
			echo '<option selected  > '.$result_array[$field_name].' </option>';
		}
		else
			{
				echo '<option  > '.$result_array[$field_name].' </option>';
			}
		}
		echo '</select>';	
		return TRUE;
}

function mk_select_from_array($ar,$form_name,$disabled,$default)
{

		echo '<select  '.$disabled.' name='.$form_name.' id='.$form_name.'>';
		foreach($ar as $value)
		{
			if($value==$default)
		{
			echo '<option selected  > '.$value.' </option>';
		}
		else
			{
				echo '<option  > '.$value.' </option>';
			}
		}
		echo '</select>';	
		return TRUE;
}

function mk_select_from_sql_with_separate_id($link,$sql,$field_name,$form_name,$id_name,$disabled,$default)
{

	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
		echo '<select  '.$disabled.' name='.$form_name.' id='.$id_name.'>';
		while($result_array=mysqli_fetch_assoc($result))
		{
		if($result_array[$field_name]==$default)
		{
			echo '<option selected  > '.$result_array[$field_name].' </option>';
		}
		else
			{
				echo '<option  > '.$result_array[$field_name].' </option>';
			}
		}
		echo '</select>';	
		return TRUE;
}

function mk_combo($link,$sql,$field_name,$form_name,$id_name,$disabled,$default)
{
	$selected='no';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
		echo '<table class=border><tr><td>';
		echo '<select  '.$disabled.' name='.$form_name.' id='.$id_name.'>';
		while($result_array=mysqli_fetch_assoc($result))
		{
			if($result_array[$field_name]==$default)
			{
				echo '<option selected  > '.$result_array[$field_name].' </option>';
				$selected='yes';
			}
			else
			{
				echo '<option  > '.$result_array[$field_name].' </option>';
			}
		}
		echo '</select></td><td>';
		
		if($selected=='no'){
								echo 'tick if not in List:<input type=checkbox checked
								id=\''.$id_name.'_text_check\' name=\''.$form_name.'_text_check\' >';
								echo '</td><td><input type=text name=\''.$form_name.'_text\'  value=\''.$default.'\' >';
								
							}
		else
			{
				echo 'Tick if not in List:<input type=checkbox 
								id=\''.$id_name.'_text_check\' name=\''.$form_name.'_text_check\' >';
				echo '</td><td><input type=text      		 name=\''.$form_name.'_text\' >';
			}
		echo '</td></tr></table>';
		return TRUE;
}


function mk_combo_new($link,$sql,$field_name,$form_name,$id_name,$disabled,$default)
{
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
		echo '<table class=border><tr><td>';
		echo '<select  '.$disabled.' name='.$form_name.' id='.$id_name.'>';
		while($result_array=mysqli_fetch_assoc($result))
		{
				echo '<option  > '.$result_array[$field_name].' </option>';
		}
		echo '</select></td><td>';
		
		echo 'tick if not in List:<input type=checkbox
								id=\''.$id_name.'_text_check\' name=\''.$form_name.'_text_check\' >';	
		
		echo '</td><td><input type=text name=\''.$form_name.'_text\' placeholder="write here if not in list">';
		echo '</td></tr></table>';
		return TRUE;
}

function combo_entry($link,$sql,$name,$disabled,$default)
{
	echo '<table><tr><td>';
	mk_select_from_sql($link,$sql,$name,$disabled,$default);
	echo '</td><td>';
	echo '<input type=text name=\'i_'.$name.'\'>';
	echo '<input type=checkbox name=\'ck_'.$name.'\'>';
	echo '</td></tr></table>';
	
}


function get_raw($link,$sql)
{
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	if(mysqli_num_rows($result)!=1){echo mysqli_error($link);return false;}
	else
	{
		return mysqli_fetch_assoc($result);
	}
}


function update_field_by_id($link,$table,$id_field,$id_value,$field,$value)
{
	$sql='update `'.$table.'` set `'.$field.'`=\''.$value.'\' where `'.$id_field.'`=\''.$id_value.'\'';
	//echo $sql;
	
	
	if(!$result=mysqli_query($link,$sql)){mysqli_error($link);return FALSE;}
	else
	{
		return mysqli_affected_rows($link);
	}
}

function delete_raw_by_id($link,$table,$id_field,$id_value)
{
	$sql='delete from `'.$table.'` where `'.$id_field.'`=\''.$id_value.'\'';
	//echo $sql;
	
	
	if(!$result=mysqli_query($link,$sql)){mysql_error();return FALSE;}
	else
	{
		return mysqli_affected_rows($link);
	}
}

function update_or_insert_field_by_id($link,$table,$id_field,$id_value,$field,$value)
{
	if(get_raw($link,'select `'.$id_field.'` from `'.$table.'` where `'.$id_field.'`=\''.$id_value.'\'')===FALSE)
	{
		//Try to insert
		$sqli='insert into `'.$table.'` (`'.$id_field.'`,`'.$field.'`) values (\''.$id_value.'\', \''.$value.'\')';
		//echo $sqli;
		if(!$resulti=mysqli_query($link,$sqli)){echo mysqli_error($link);return FALSE;}
		else
		{
			return mysqli_affected_rows($link);
		}
	}
	else
	{
		//Else update
		$sql='update `'.$table.'` set `'.$field.'`=\''.$value.'\' where `'.$id_field.'`=\''.$id_value.'\'';
		//echo $sql;
		if(!$result=mysqli_query($link,$sql))
		{
			echo mysqli_error($link);
			return FALSE;
		}
	}
}

function insert_field_by_id($link,$table,$id_field,$id_value,$field,$value)
{
		//Try to insert
		$sqli='insert into `'.$table.'` (`'.$id_field.'`,`'.$field.'`) values (\''.$id_value.'\', \''.$value.'\')';
		//echo $sqli;
		if(!$resulti=mysqli_query($link,$sqli)){echo mysqli_error($link);return FALSE;}
		else
		{
			return mysqli_insert_id($link);
		}
}

function update_or_insert_filename_field_by_id($link,$table,$id_field,$id_value,$field,$value)
{
	if(strlen($value)>0)
	{
		if(get_raw($link,'select `'.$id_field.'` from `'.$table.'` where `'.$id_field.'`=\''.$id_value.'\'')===FALSE)
		{
			//Try to insert
			$sqli='insert into `'.$table.'` (`'.$id_field.'`,`'.$field.'`) values (\''.$id_value.'\', \''.$value.'\')';
			echo $sqli;
			if(!$resulti=mysqli_query($link,$sqli)){echo mysqli_error($link);return FALSE;}
			else
			{
				return mysqli_affected_rows($link);
			}
		}
		else
		{
			//Else update
			$sql='update `'.$table.'` set `'.$field.'`=\''.$value.'\' where `'.$id_field.'`=\''.$id_value.'\'';
			//echo $sql;
			if(!$result=mysqli_query($link,$sql))
			{
				echo mysqli_error($link);
				return FALSE;
			}
		}
	}
}



function india_to_mysql_date($ddmmyyyy)
{
	$ex=explode('-',$ddmmyyyy);
	if(count($ex)==3)
	{
		return $ex[2].'-'.$ex[1].'-'.$ex[0];
	}
	else
	{
		return false;
	}
}

function mysql_to_india_date($yyyymmdd)
{
	$ex=explode('-',$yyyymmdd);
	if(count($ex)==3)
	{
		return $ex[2].'-'.$ex[1].'-'.$ex[0];
	}
	else
	{
		return false;
	}
}

function date_diff_to_year_month_days($from,$to)
{
	//dates as yyyy-mm-dd format only
	//To    2016-03-04
	//From  2015-05-20
	//      0000-09-(N) 
	
	$exf=explode('-',$from);
	$ext=explode('-',$to);
	if(count($exf)!=3||count($ext)!=3)
	{
		return false;
	}
	
	if(in_array('00',$exf)===TRUE || in_array('0000',$exf)===TRUE)
	{
		//print_r($exf);
		return false;
	}
	
	$days_of_from_month=cal_days_in_month(CAL_GREGORIAN,$exf[1],$exf[0]);
	if($days_of_from_month===FALSE)
	{
		return FALSE;
	}
	$days=$ext[2]+($days_of_from_month-$exf[2]);
	
	
	$months=$ext[1]+12-$exf[1]-1;
	
	$years=$ext[0]-$exf[0]-1;
	
	if($days>cal_days_in_month(CAL_GREGORIAN,$exf[1],$exf[0])){$days=abs($ext[2]-$exf[2]);$months=$months+1;}
	if($months>11){$years=$years+1;$months=$months-12;}
	
	//echo "<h1>".$to." and ".$from."</h1>";
	//echo "<h1>".$years.",".$months.",".$days."</h1>";
	
	return $years." yr, ".$months." mo, ".$days." d";
/*
	$y=$ext[0]-$exf[0];

	$m=$ext[1]-$exf[1];
	if($m<0){$y=$y-1;$m=12+$m;}
	
	$d=$ext[1]-$exf[1];
	if($d<0){$m=$m-1;$d=cal_days_in_month(CAL_GREGORIAN,$exf[1],$exf[0])-$d;}
	
	if($m<0){$y=$y-1;$m=12+$m;}
	
	echo "<h1>".$to." and ".$from."</h1>";
	echo "<h1>".$y.",".$m.",".$d."</h1>";
*/
}

//functions for file upload management//////////////

function file_to_str($link,$file)
{
	$fd=fopen($file['tmp_name'],'r');
	$size=$file['size'];
	$str=fread($fd,$size);
	return mysqli_real_escape_string($link,$str);
}

function insert_attachment($link,$table,$id_field,$id_value,$files_field,$files_value)
{
	$str=file_to_str($link,$files_value);

	$sql='insert into `'.$table.'` 
			(`'.$id_field.'`,`'.$files_field.'`) values(\''.$id_value.'\',"'.$str.'")';

		
	if(!$result=mysqli_query($link,$sql))
	{		
		//echo 'Error()';
		echo mysqli_error($link);
	}
	else
	{
		//echo 'insert success';
		return mysqli_insert_id($link);
	}
}	

function read_year($name,$y,$yy)
{
	echo '<select name=\''.$name.'\'>';
	for($i=$y;$i<=$yy;$i++)
	{
			echo '<option>'.$i.'</option>';
	}
	echo '</select>';
	
}

function update_or_insert_attachment($link,$table,$id_field,$id_value,$files_field,$files_value)
{	
	//echo '<pre>'; print_r( $files_value);echo '</pre>';
	if($files_value['size']>0)
	{
		if(get_raw($link,'select `'.$id_field.'` from `'.$table.'` where `'.$id_field.'`=\''.$id_value.'\'')===FALSE)
		{
		//insert

			$str=file_to_str($link,$files_value);

			$sql='insert into `'.$table.'` 
					(`'.$id_field.'`,`'.$files_field.'`) values(\''.$id_value.'\',"'.$str.'")';

				
			if(!$result=mysqli_query($link,$sql))
			{		
				//echo 'Error()';
				echo mysqli_error($link);
			}
			else
			{
				//echo 'insert success';
				return mysqli_insert_id($link);
			}
		}
		//update
		else
		{
			$str=file_to_str($link,$files_value);
			$sql='update `'.$table.'` set 
					`'.$files_field.'` ="'.$str.'"
					where
					`'.$id_field.'` =\''.$id_value.'\'';
			//echo $sql;
			if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);}
			else
			{
				//echo 'update success';
				return $id_value;
			}			
		}
	}
}



function find_primary_key_array($link,$table)
{
	//This function is useful when primary key is madeup of multiple fields
	$sql_p='SHOW KEYS FROM  `'.$table.'` WHERE Key_name = \'PRIMARY\'';
	if(!$result_p=mysqli_query($link,$sql_p)){echo mysqli_error($link);return FALSE;}
	$pk=array();
	while($array_p=mysqli_fetch_assoc($result_p))
	{
		$pk[]=$array_p['Column_name'];
	}
	return $pk;
}

function read_primary_key($parray,$array)
{
	$ret_array=array();
	foreach($parray as $key=>$value)
	{
		$ret_array[$value]=$array[$value];
	}
	return $ret_array;
}

function prepare_where($ar)
{		
		if(count($ar)>0)
		{
			$where=' where ';
			foreach($ar as $k=>$v)
			{
				$where=$where.'`'.$k.'`='.'\''.$v.'\' and ';
			}
			$where=substr($where,0,-4);
		}
		else
		{
			$where='';
		}
		//echo '<h3>'.$where.'</h3>';
		return $where;
}


function display_photo($link,$photo)
{
		//if($ar['lng']>0)
		//{
			echo '<img style="width:3cm;height:4cm;" src="data:image/jpeg;base64,'.base64_encode($photo).'"/>';
		//}
		//else
		//{
		//	echo 'RECENT PHOTOGRAPH TO BE COUNTER SIGNED BY  THE DEAN/ PRINCIPAL';
		//}
}


function if_in_interval($dt,$from_dt,$to_dt)
{


	//f d t
	if(strtotime($dt)-strtotime($from_dt)>=0 && strtotime($dt)-strtotime($to_dt)<=0)
	{
		return 0;
	}
	
	//d f t
	elseif(strtotime($dt)-strtotime($from_dt)<0 && strtotime($dt)-strtotime($to_dt)<0)
	{
		return -1;
	}

	//f t d
	elseif(strtotime($dt)-strtotime($from_dt)>0 && strtotime($dt)-strtotime($to_dt)>0)
	{
		return 1;
	}
	
	//t f is illogical
	else
	{
		return FALSE;
	}
		
	/*

	$dtt=date_create($dt);
	$from_dtt=date_create($from_dt);
	$to_dtt=date_create($to_dt);
	
	$diff_from=date_diff($dtt,$from_dtt);
	print_r($diff_from);
	
	$diff_to=date_diff($dtt,$to_dtt);
	print_r($diff_to);	
	*/
	
}

function date_diff_grand($from_dt,$to_dt)
{
	$from_dtt=date_create($from_dt);
	$to_dtt=date_create($to_dt);
	
	$diff=date_diff($from_dtt,$to_dtt);
	
	//echo '<pre>';
	//print_r($diff);
	//echo '</pre>';
	
	return $diff;

}

function get_date_diff_as_ymd($from_dt,$to_dt)
{
	$diff=date_diff_grand($from_dt,$to_dt);
	return date_interval_format($diff,'%r%Y y,%r%M m,%r%D d');
}


function get_experience_good($link,$id)
{

	$sql='select * from staff_movement where staff_id=\''.$id.'\' order by `from_date`';
	echo '<table border=1>';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{
		$raw_data[]=$ra;
	}

	foreach($raw_data as $key=>$value)
	{
		$first_summary[]=array('department'=>$value['department'],'post'=>$value['post'],'from_date'=>$value['from_date'],'to_date'=>$value['to_date']);
	}
	
	$num=count($first_summary);

	$mrg=array();
	$final_count=0;
	for($i=0;$i<$num;$i++)
	{
		if(count($mrg)==0)
		{
				$mrg[$final_count]=array('department'=>$first_summary[$i]['department'],'post'=>$first_summary[$i]['post'],
								'from_date'=>$first_summary[$i]['from_date'], 
								'to_date'=>$first_summary[$i]['to_date']);					
		}
		else
		{
			if($first_summary[$i]['department']==$mrg[$final_count]['department'] 
			&& $first_summary[$i]['post']==$mrg[$final_count]['post'])
			{
				$mrg[$final_count]['to_date']=$first_summary[$i]['to_date'];
			}
			else
			{
				$final_count++;
				$mrg[$final_count]=array('department'=>$first_summary[$i]['department'],'post'=>$first_summary[$i]['post'],
								'from_date'=>$first_summary[$i]['from_date'],
								'to_date'=>$first_summary[$i]['to_date']);				
			}
		}
		
	}
	return $mrg;
	//print_r($mrg);
}


function get_experience_mci($link,$id)
{

	$sql='select * from staff_movement where staff_id=\''.$id.'\' order by `from_date`';
	echo '<table border=1>';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{
		$raw_data[]=$ra;
	}

	foreach($raw_data as $key=>$value)
	{
		$first_summary[]=array('institute'=>$value['institute'],'department'=>$value['department'],'post'=>$value['post'],'from_date'=>$value['from_date'],'to_date'=>$value['to_date']);
	}
	
	//echo '<pre>';
	//print_r($first_summary);
	$num=count($first_summary);

	$mrg=array();
	$final_count=0;
	for($i=0;$i<$num;$i++)
	{
		if(count($mrg)==0)
		{
				$mrg[$final_count]=array(
							'institute'=>$first_summary[$i]['institute'],
							'department'=>$first_summary[$i]['department'],
							'post'=>$first_summary[$i]['post'],
							'from_date'=>$first_summary[$i]['from_date'], 
							'to_date'=>$first_summary[$i]['to_date']);					
		}
		else
		{
			if($first_summary[$i]['department']==$mrg[$final_count]['department'] 
			&& $first_summary[$i]['post']==$mrg[$final_count]['post']
			&& $first_summary[$i]['institute']==$mrg[$final_count]['institute'])
			{
				$mrg[$final_count]['to_date']=$first_summary[$i]['to_date'];
			}
			else
			{
				$final_count++;
				$mrg[$final_count]=array(
								'institute'=>$first_summary[$i]['institute'],
								'department'=>$first_summary[$i]['department'],
								'post'=>$first_summary[$i]['post'],
								'from_date'=>$first_summary[$i]['from_date'],
								'to_date'=>$first_summary[$i]['to_date']);				
			}
		}
		
	}
	return $mrg;
	//print_r($mrg);
}

function view_table_experience($link)
{
	//Designation 	Type 	Department 	Name of Institution 	From - To - Total

	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' order by `from_date`';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	while($ra=mysqli_fetch_assoc($result))
	{		
	if(strlen($ra['to_date'])==0)
	{
		$to_date='<span style="background-color:lightpink;">till_date</span>';
		$diff=get_date_diff_as_ymd($ra['from_date'],date('Y-m-d'));
	}
	else
	{
		$to_date=mysql_to_india_date($ra['to_date']);
		$diff=get_date_diff_as_ymd($ra['from_date'],$ra['to_date']);
	}
	/*$raw_html='<tr style="background-color:lightgray;">
			<td><button type=submit name=delete_experience value=\''.$ra['movement_id'].'\'>X</button></td><td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>From:'.$ra['from_date'].','.$ra['from_time'].'<br>To:'.$to_date.','.$ra['to_time'].'<br>
			Total:'.$diff.'</td>
			';
			* */
			
	$raw_html='<tr style="background-color:lightgray;">
			<td>
			'.$ra['post'].'
			</td>
			<td  >'.$ra['type'].'</td>
			<td  >'.$ra['department'].'</td>
			<td  >'.$ra['institute'].'</td>
			<td>'.mysql_to_india_date($ra['from_date']).','.$ra['from_time'].'>>'.$to_date.','.$ra['to_time'].' ('.$diff.')</td>
			';
			echo $raw_html;
		}
}


?>
<?php
session_start();

require_once 'common.php';
unset($_SESSION['login']);
unset($_SESSION['password']);

echo '<html lang="en" >
<head>

  <title>Login Form</title>
      <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <body>
  <form method=post action='.$GLOBALS['rootpath'].'/common/start_office.php>
	  <div >
		 <img src="../image/college_logo.png"  width="15%" height="130">
	     <img src="../image/hostel.png" width="65%" height="130">
	     <img src="../image/gujarat.png"  width="15%" height="130">
	  </div>
	  <div>
	  <br>
	  <center><h1 style="color:white;">Login For Administrative Staff</h1></div></center>
	<div class="login">
		<div class="login-screen">
			<div class="app-title">
				<h1>Login</h1>
			</div>

			<div class="login-form">
				<div class="control-group">
				<input type="text" class="login-field" name="login" value="" placeholder="Username" id="login-name">
				<label class="login-field-icon fui-user" for="login-name"></label>
				</div>

				<div class="control-group">
				<input type="password" class="login-field" name="password" value="" placeholder="Password" id="login-pass">
				<label class="login-field-icon fui-lock" for="login-pass"></label>
				</div>
				<input type="submit" class="btn btn-primary btn-large btn-block" name="action" value="Login">
				
				
			</div>
		</div>
	</div>
	</form>
</body>';


echo '</body></html>';

?>




<!DOCTYPE html>
<html lang="en" class="">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    

    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-cfd028037d00b8a80c5a3b91967e29dcc41309e44d4ccece88663a52963ca765.css" media="all" rel="stylesheet" />
    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-dc8832cbc25013ebcdcca24529e402cfcea50e4b2bd136b8284fdf8864873636.css" media="all" rel="stylesheet" />
    
    
    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-9e0f35305336555b58884b07a160747fc1f6dbd79e13e18820a598a9abcb2662.css" media="all" rel="stylesheet" />
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=device-width">
    
    <title>staff/menu.php at master  nishishailesh/staff  GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="https://avatars1.githubusercontent.com/u/15524845?v=3&amp;s=400" name="twitter:image:src" /><meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="nishishailesh/staff" name="twitter:title" /><meta content="staff - Staff Database Management" name="twitter:description" />
      <meta content="https://avatars1.githubusercontent.com/u/15524845?v=3&amp;s=400" property="og:image" /><meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="nishishailesh/staff" property="og:title" /><meta content="https://github.com/nishishailesh/staff" property="og:url" /><meta content="staff - Staff Database Management" property="og:description" />
      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">
    <link rel="assets" href="https://assets-cdn.github.com/">
    
    <meta name="pjax-timeout" content="1000">
    
    <meta name="request-id" content="75C6BFC2:1A1C:807EA3B:58564BFA" data-pjax-transient>

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_source" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
<meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="75C6BFC2:1A1C:807EA3B:58564BFA" name="octolytics-dimension-request_id" />
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location" />



  <meta class="js-ga-set" name="dimension1" content="Logged Out">



        <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

        <meta name="expected-hostname" content="github.com">
      <meta name="js-proxy-site-detection-payload" content="ODAxN2MwOTc4OWVlZmExNjM0MTJlZTg5OGM5Mzk5N2JkNmEzMTg2Mjk4MmM4NDNlYjE0N2MyZWFjMjlhZTcwN3x7InJlbW90ZV9hZGRyZXNzIjoiMTE3LjE5OC4xOTEuMTk0IiwicmVxdWVzdF9pZCI6Ijc1QzZCRkMyOjFBMUM6ODA3RUEzQjo1ODU2NEJGQSIsInRpbWVzdGFtcCI6MTQ4MjA1MDU1NSwiaG9zdCI6ImdpdGh1Yi5jb20ifQ==">


      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

    <meta name="html-safe-nonce" content="fcf9a921f7a589612887eab017a22d0f0abf624b">
    <meta content="aab44d92c367f14fd4a1076c337b6a433c301790" name="form-nonce" />

    <meta http-equiv="x-pjax-version" content="8cdbb8cffd6956425aaad8ad14e0496b">
    

      
  <meta name="description" content="staff - Staff Database Management">
  <meta name="go-import" content="github.com/nishishailesh/staff git https://github.com/nishishailesh/staff.git">

  <meta content="15524845" name="octolytics-dimension-user_id" /><meta content="nishishailesh" name="octolytics-dimension-user_login" /><meta content="73776579" name="octolytics-dimension-repository_id" /><meta content="nishishailesh/staff" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="73776579" name="octolytics-dimension-repository_network_root_id" /><meta content="nishishailesh/staff" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/nishishailesh/staff/commits/master.atom" rel="alternate" title="Recent Commits to staff:master" type="application/atom+xml">


      <link rel="canonical" href="https://github.com/nishishailesh/staff/blob/master/common/menu.php" data-pjax-transient>
  </head>


  <body class="logged-out  env-production linux vis-public page-blob">
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>

    
    
    



          <header class="site-header js-details-container" role="banner">
  <div class="container-responsive">
    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
    </a>

    <button class="btn-link float-right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation">
      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewBox="0 0 12 16" width="18"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"/></svg>
    </button>

    <div class="site-header-menu">
      <nav class="site-header-nav site-header-nav-main">
        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal">
          Personal
</a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source">
          Open source
</a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/partners /business/features /business/customers /business">
          Business
</a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /showcases /explore">
          Explore
</a>      </nav>

      <div class="site-header-actions">
            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
          <a class="btn site-header-actions-btn mr-1" href="/login?return_to=%2Fnishishailesh%2Fstaff%2Fblob%2Fmaster%2Fcommon%2Fmenu.php" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
      </div>

        <nav class="site-header-nav site-header-nav-secondary mr-md-3">
          <a class="nav-item" href="/pricing">Pricing</a>
          <a class="nav-item" href="/blog">Blog</a>
          <a class="nav-item" href="https://help.github.com">Support</a>
          <a class="nav-item header-search-link" href="https://github.com/search">Search GitHub</a>
              <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/nishishailesh/staff/search" class="js-site-search-form" data-scoped-search-url="/nishishailesh/staff/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
    <label class="form-control header-search-wrapper js-chromeless-input-container">
      <div class="header-search-scope">This repository</div>
      <input type="text"
        class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable"
        data-hotkey="s"
        name="q"
        placeholder="Search"
        aria-label="Search this repository"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off">
    </label>
</form></div>

        </nav>
    </div>
  </div>
</header>



    <div id="start-of-content" class="accessibility-aid"></div>

      <div id="js-flash-container">
</div>


    <div role="main">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode">
    <div id="js-repo-pjax-container" data-pjax-container>
      
<div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav">
  <div class="container repohead-details-container">

    

<ul class="pagehead-actions">

  <li>
      <a href="/login?return_to=%2Fnishishailesh%2Fstaff"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
  </a>
  <a class="social-count" href="/nishishailesh/staff/watchers"
     aria-label="1 user is watching this repository">
    1
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fnishishailesh%2Fstaff"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
    Star
  </a>

    <a class="social-count js-social-count" href="/nishishailesh/staff/stargazers"
      aria-label="0 users starred this repository">
      0
    </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fnishishailesh%2Fstaff"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
      </a>

    <a href="/nishishailesh/staff/network" class="social-count"
       aria-label="0 users forked this repository">
      0
    </a>
  </li>
</ul>

    <h1 class="public ">
  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a href="/nishishailesh" class="url fn" rel="author">nishishailesh</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/nishishailesh/staff" data-pjax="#js-repo-pjax-container">staff</a></strong>

</h1>

  </div>
  <div class="container">
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/nishishailesh/staff" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /nishishailesh/staff" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a href="/nishishailesh/staff/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /nishishailesh/staff/issues" itemprop="url">
        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="counter">0</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/nishishailesh/staff/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /nishishailesh/staff/pulls" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>

  <a href="/nishishailesh/staff/projects" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /nishishailesh/staff/projects">
    <svg aria-hidden="true" class="octicon octicon-project" height="16" version="1.1" viewBox="0 0 15 16" width="15"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
    Projects
    <span class="counter">0</span>
</a>


  <a href="/nishishailesh/staff/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /nishishailesh/staff/pulse">
    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0v2h3.6l.9-1.8.9 5.4L9 8.5l1.6 1.5H14V8z"/></svg>
    Pulse
</a>
  <a href="/nishishailesh/staff/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /nishishailesh/staff/graphs">
    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Graphs
</a>

</nav>

  </div>
</div>

<div class="container new-discussion-timeline experiment-repo-nav">
  <div class="repository-content">

    

<a href="/nishishailesh/staff/blob/bf029084589645ecf0e28346687faa304b06789e/common/menu.php" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a>

<!-- blob contrib key: blob_contributors:v21:3494bbbbe7c450ad5da692222ad26544 -->

<div class="file-navigation js-zeroclipboard-container">
  
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w"
    
    type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <i>Branch:</i>
    <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open selected"
               href="/nishishailesh/staff/blob/master/common/menu.php"
               data-name="master"
               data-skip-pjax="true"
               rel="nofollow">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

  <div class="BtnGroup float-right">
    <a href="/nishishailesh/staff/find/master"
          class="js-pjax-capture-input btn btn-sm BtnGroup-item"
          data-pjax
          data-hotkey="t">
      Find file
    </a>
    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm BtnGroup-item tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button>
  </div>
  <div class="breadcrumb js-zeroclipboard-target">
    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/nishishailesh/staff"><span>staff</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/nishishailesh/staff/tree/master/common"><span>common</span></a></span><span class="separator">/</span><strong class="final-path">menu.php</strong>
  </div>
</div>

<include-fragment class="commit-tease" src="/nishishailesh/staff/contributors/master/common/menu.php">
  <div>
    Fetching contributors&hellip;
  </div>

  <div class="commit-tease-contributors">
    <img alt="" class="loader-loading float-left" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16" />
    <span class="loader-error">Cannot retrieve contributors at this time</span>
  </div>
</include-fragment>

<div class="file">
  <div class="file-header">
  <div class="file-actions">

    <div class="BtnGroup">
      <a href="/nishishailesh/staff/raw/master/common/menu.php" class="btn btn-sm BtnGroup-item" id="raw-url">Raw</a>
        <a href="/nishishailesh/staff/blame/master/common/menu.php" class="btn btn-sm js-update-url-with-hash BtnGroup-item">Blame</a>
      <a href="/nishishailesh/staff/commits/master/common/menu.php" class="btn btn-sm BtnGroup-item" rel="nofollow">History</a>
    </div>


        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw"
          aria-label="You must be signed in to make or propose changes">
          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
        </button>
        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw"
          aria-label="You must be signed in to make or propose changes">
          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
        </button>
  </div>

  <div class="file-info">
      117 lines (91 sloc)
      <span class="file-info-divider"></span>
    3.21 KB
  </div>
</div>

  

  <div itemprop="text" class="blob-wrapper data type-php">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">&#39;</span></span></span></td>
      </tr>
      <tr>
        <td id="L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s"></span></span></td>
      </tr>
      <tr>
        <td id="L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;style&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">	.menu {border:0px;border-spacing: 0;border-collapse: collapse;background-color:lightgreen;}</span></span></td>
      </tr>
      <tr>
        <td id="L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/style&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s"></span></span></td>
      </tr>
      <tr>
        <td id="L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;script type=&quot;text/javascript&quot; &gt;</span></span></td>
      </tr>
      <tr>
        <td id="L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		function showhidemenu(one) </span></span></td>
      </tr>
      <tr>
        <td id="L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		{		</span></span></td>
      </tr>
      <tr>
        <td id="L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			xx=document.getElementsByClassName(<span class="pl-cce">\&#39;</span>menu<span class="pl-cce">\&#39;</span>);			</span></span></td>
      </tr>
      <tr>
        <td id="L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			for(var i = 0; i &lt; xx.length; i++)</span></span></td>
      </tr>
      <tr>
        <td id="L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			{</span></span></td>
      </tr>
      <tr>
        <td id="L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				if(xx[i]!=document.getElementById(one))</span></span></td>
      </tr>
      <tr>
        <td id="L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				{</span></span></td>
      </tr>
      <tr>
        <td id="L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					xx[i].style.display = &quot;none&quot;;		</span></span></td>
      </tr>
      <tr>
        <td id="L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				}</span></span></td>
      </tr>
      <tr>
        <td id="L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="LC19" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				</span></span></td>
      </tr>
      <tr>
        <td id="L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="LC20" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				else if(xx[i]==document.getElementById(one))</span></span></td>
      </tr>
      <tr>
        <td id="L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				{</span></span></td>
      </tr>
      <tr>
        <td id="L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="LC22" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					if(xx[i].style.display == &quot;block&quot;)</span></span></td>
      </tr>
      <tr>
        <td id="L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="LC23" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					{</span></span></td>
      </tr>
      <tr>
        <td id="L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">						xx[i].style.display = &quot;none&quot;;</span></span></td>
      </tr>
      <tr>
        <td id="L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					}</span></span></td>
      </tr>
      <tr>
        <td id="L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="LC26" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					else</span></span></td>
      </tr>
      <tr>
        <td id="L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="LC27" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					{</span></span></td>
      </tr>
      <tr>
        <td id="L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="LC28" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">						xx[i].style.display = &quot;block&quot;;</span></span></td>
      </tr>
      <tr>
        <td id="L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="LC29" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">					}		</span></span></td>
      </tr>
      <tr>
        <td id="L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="LC30" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				}</span></span></td>
      </tr>
      <tr>
        <td id="L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="LC31" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			}	</span></span></td>
      </tr>
      <tr>
        <td id="L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="LC32" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		}</span></span></td>
      </tr>
      <tr>
        <td id="L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="LC33" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="LC34" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		function hidemenu() {</span></span></td>
      </tr>
      <tr>
        <td id="L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="LC35" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="LC36" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			xx=document.getElementsByClassName(<span class="pl-cce">\&#39;</span>menu<span class="pl-cce">\&#39;</span>);</span></span></td>
      </tr>
      <tr>
        <td id="L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="LC37" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			for(var i = 0; i &lt; xx.length; i++)</span></span></td>
      </tr>
      <tr>
        <td id="L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="LC38" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			{</span></span></td>
      </tr>
      <tr>
        <td id="L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="LC39" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				xx[i].style.display = &quot;none&quot;;		</span></span></td>
      </tr>
      <tr>
        <td id="L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="LC40" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			}</span></span></td>
      </tr>
      <tr>
        <td id="L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="LC41" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		}</span></span></td>
      </tr>
      <tr>
        <td id="L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="LC42" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="LC43" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		//document.onclick=function(){hidemenu();};</span></span></td>
      </tr>
      <tr>
        <td id="L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="LC44" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;/script&gt;<span class="pl-pds">&#39;</span></span>;</span></td>
      </tr>
      <tr>
        <td id="L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="LC45" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="LC46" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-k">function</span> <span class="pl-en">menu</span>()</span></td>
      </tr>
      <tr>
        <td id="L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="LC47" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">{	</span></td>
      </tr>
      <tr>
        <td id="L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="LC48" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">		</span></td>
      </tr>
      <tr>
        <td id="L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="LC49" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">&#39;</span></span></span></td>
      </tr>
      <tr>
        <td id="L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="LC50" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;form method=post&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="LC51" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;table class=\&quot;menu\&quot;&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="LC52" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="LC53" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;button type=button onclick=&quot;showhidemenu(<span class="pl-cce">\&#39;</span>button1<span class="pl-cce">\&#39;</span>)&quot;&gt;Declaration&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="LC54" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;table  id=&quot;button1&quot; class=&quot;menu&quot; style=&quot;position:absolute; display:none;&quot;&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="LC55" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/declaration/new.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Prepare&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="LC56" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;/table&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L57" class="blob-num js-line-number" data-line-number="57"></td>
        <td id="LC57" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L58" class="blob-num js-line-number" data-line-number="58"></td>
        <td id="LC58" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/td&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L59" class="blob-num js-line-number" data-line-number="59"></td>
        <td id="LC59" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;button type=button onclick=&quot;showhidemenu(<span class="pl-cce">\&#39;</span>button3<span class="pl-cce">\&#39;</span>)&quot;&gt;Leave&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L60" class="blob-num js-line-number" data-line-number="60"></td>
        <td id="LC60" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;table  id=&quot;button3&quot; class=&quot;menu&quot; style=&quot;position:absolute; display:none;&quot;&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L61" class="blob-num js-line-number" data-line-number="61"></td>
        <td id="LC61" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/leave/new_leave.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Apply&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L62" class="blob-num js-line-number" data-line-number="62"></td>
        <td id="LC62" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;/table&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L63" class="blob-num js-line-number" data-line-number="63"></td>
        <td id="LC63" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L64" class="blob-num js-line-number" data-line-number="64"></td>
        <td id="LC64" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/td&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L65" class="blob-num js-line-number" data-line-number="65"></td>
        <td id="LC65" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;button  type=button onclick=&quot;showhidemenu(<span class="pl-cce">\&#39;</span>button2<span class="pl-cce">\&#39;</span>)&quot;&gt;Manage My Account(<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$_SESSION</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>login<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>)&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L66" class="blob-num js-line-number" data-line-number="66"></td>
        <td id="LC66" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;table  id=&quot;button2&quot; class=&quot;menu&quot; style=&quot;position: absolute;display:none;&quot;&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L67" class="blob-num js-line-number" data-line-number="67"></td>
        <td id="LC67" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L68" class="blob-num js-line-number" data-line-number="68"></td>
        <td id="LC68" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/common/logout.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Logout&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L69" class="blob-num js-line-number" data-line-number="69"></td>
        <td id="LC69" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			</span></span></td>
      </tr>
      <tr>
        <td id="L70" class="blob-num js-line-number" data-line-number="70"></td>
        <td id="LC70" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/common/change_pass.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Change Password&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L71" class="blob-num js-line-number" data-line-number="71"></td>
        <td id="LC71" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			</span></span></td>
      </tr>
      <tr>
        <td id="L72" class="blob-num js-line-number" data-line-number="72"></td>
        <td id="LC72" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;/table&gt;	</span></span></td>
      </tr>
      <tr>
        <td id="L73" class="blob-num js-line-number" data-line-number="73"></td>
        <td id="LC73" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/td&gt;&lt;/tr&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L74" class="blob-num js-line-number" data-line-number="74"></td>
        <td id="LC74" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/table&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L75" class="blob-num js-line-number" data-line-number="75"></td>
        <td id="LC75" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/form&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L76" class="blob-num js-line-number" data-line-number="76"></td>
        <td id="LC76" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s"><span class="pl-pds">&#39;</span></span>;</span></td>
      </tr>
      <tr>
        <td id="L77" class="blob-num js-line-number" data-line-number="77"></td>
        <td id="LC77" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L78" class="blob-num js-line-number" data-line-number="78"></td>
        <td id="LC78" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">}</span></td>
      </tr>
      <tr>
        <td id="L79" class="blob-num js-line-number" data-line-number="79"></td>
        <td id="LC79" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L80" class="blob-num js-line-number" data-line-number="80"></td>
        <td id="LC80" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L81" class="blob-num js-line-number" data-line-number="81"></td>
        <td id="LC81" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-k">function</span> <span class="pl-en">menu_office</span>()</span></td>
      </tr>
      <tr>
        <td id="L82" class="blob-num js-line-number" data-line-number="82"></td>
        <td id="LC82" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">{	</span></td>
      </tr>
      <tr>
        <td id="L83" class="blob-num js-line-number" data-line-number="83"></td>
        <td id="LC83" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">		</span></td>
      </tr>
      <tr>
        <td id="L84" class="blob-num js-line-number" data-line-number="84"></td>
        <td id="LC84" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">&#39;</span></span></span></td>
      </tr>
      <tr>
        <td id="L85" class="blob-num js-line-number" data-line-number="85"></td>
        <td id="LC85" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;form method=post&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L86" class="blob-num js-line-number" data-line-number="86"></td>
        <td id="LC86" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;table class=\&quot;menu\&quot;&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L87" class="blob-num js-line-number" data-line-number="87"></td>
        <td id="LC87" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L88" class="blob-num js-line-number" data-line-number="88"></td>
        <td id="LC88" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;button type=button onclick=&quot;showhidemenu(<span class="pl-cce">\&#39;</span>button1<span class="pl-cce">\&#39;</span>)&quot;&gt;Service Records&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L89" class="blob-num js-line-number" data-line-number="89"></td>
        <td id="LC89" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;table  id=&quot;button1&quot; class=&quot;menu&quot; style=&quot;position:absolute; display:none;&quot;&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L90" class="blob-num js-line-number" data-line-number="90"></td>
        <td id="LC90" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L91" class="blob-num js-line-number" data-line-number="91"></td>
        <td id="LC91" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/sr/staff-wise.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Manage staff-wise&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L92" class="blob-num js-line-number" data-line-number="92"></td>
        <td id="LC92" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;/td&gt;&lt;/tr&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L93" class="blob-num js-line-number" data-line-number="93"></td>
        <td id="LC93" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L94" class="blob-num js-line-number" data-line-number="94"></td>
        <td id="LC94" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">				&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/sr/detail-wise.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Manage detail-wise&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L95" class="blob-num js-line-number" data-line-number="95"></td>
        <td id="LC95" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;/td&gt;&lt;/tr&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L96" class="blob-num js-line-number" data-line-number="96"></td>
        <td id="LC96" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;/table&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L97" class="blob-num js-line-number" data-line-number="97"></td>
        <td id="LC97" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">	</span></span></td>
      </tr>
      <tr>
        <td id="L98" class="blob-num js-line-number" data-line-number="98"></td>
        <td id="LC98" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/td&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L99" class="blob-num js-line-number" data-line-number="99"></td>
        <td id="LC99" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;button  type=button onclick=&quot;showhidemenu(<span class="pl-cce">\&#39;</span>button2<span class="pl-cce">\&#39;</span>)&quot;&gt;Manage My Account(<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$_SESSION</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>login<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>)&lt;/button&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L100" class="blob-num js-line-number" data-line-number="100"></td>
        <td id="LC100" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;table  id=&quot;button2&quot; class=&quot;menu&quot; style=&quot;position: absolute;display:none;&quot;&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L101" class="blob-num js-line-number" data-line-number="101"></td>
        <td id="LC101" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		</span></span></td>
      </tr>
      <tr>
        <td id="L102" class="blob-num js-line-number" data-line-number="102"></td>
        <td id="LC102" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/common/logout.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Logout&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L103" class="blob-num js-line-number" data-line-number="103"></td>
        <td id="LC103" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			</span></span></td>
      </tr>
      <tr>
        <td id="L104" class="blob-num js-line-number" data-line-number="104"></td>
        <td id="LC104" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			&lt;button formaction=<span class="pl-pds">&#39;</span></span><span class="pl-k">.</span><span class="pl-smi">$GLOBALS</span>[<span class="pl-s"><span class="pl-pds">&#39;</span>rootpath<span class="pl-pds">&#39;</span></span>]<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">&#39;</span>/common/change_pass_office.php type=submit onclick=&quot;hidemenu()&quot; name=new&gt;Change Password&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L105" class="blob-num js-line-number" data-line-number="105"></td>
        <td id="LC105" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">			</span></span></td>
      </tr>
      <tr>
        <td id="L106" class="blob-num js-line-number" data-line-number="106"></td>
        <td id="LC106" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">		&lt;/table&gt;	</span></span></td>
      </tr>
      <tr>
        <td id="L107" class="blob-num js-line-number" data-line-number="107"></td>
        <td id="LC107" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/td&gt;&lt;/tr&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L108" class="blob-num js-line-number" data-line-number="108"></td>
        <td id="LC108" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/table&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L109" class="blob-num js-line-number" data-line-number="109"></td>
        <td id="LC109" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s">&lt;/form&gt;</span></span></td>
      </tr>
      <tr>
        <td id="L110" class="blob-num js-line-number" data-line-number="110"></td>
        <td id="LC110" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-s"><span class="pl-pds">&#39;</span></span>;</span></td>
      </tr>
      <tr>
        <td id="L111" class="blob-num js-line-number" data-line-number="111"></td>
        <td id="LC111" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L112" class="blob-num js-line-number" data-line-number="112"></td>
        <td id="LC112" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">}</span></td>
      </tr>
      <tr>
        <td id="L113" class="blob-num js-line-number" data-line-number="113"></td>
        <td id="LC113" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L114" class="blob-num js-line-number" data-line-number="114"></td>
        <td id="LC114" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"><span class="pl-c">//menu();</span></span></td>
      </tr>
      <tr>
        <td id="L115" class="blob-num js-line-number" data-line-number="115"></td>
        <td id="LC115" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="L116" class="blob-num js-line-number" data-line-number="116"></td>
        <td id="LC116" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span><span class="pl-pse"><span class="pl-s1">?</span>&gt;</span></td>
      </tr>
</table>

  </div>

</div>

<button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="d-none">Jump to Line</button>
<div id="jump-to-line" style="display:none">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
    <button type="submit" class="btn">Go</button>
</form></div>

  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>


    </div>
  </div>

    </div>

        <div class="container site-footer-container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links float-right">
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li>
      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>

    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" title="GitHub">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
    <ul class="site-footer-links">
      <li>&copy; 2016 <span title="0.10190s from github-fe123-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>
  </div>
</div>



    

    <div id="ajax-error-message" class="ajax-error-message flash flash-error">
      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
      </button>
      You can't perform that action at this time.
    </div>


      
      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-05c8a25698c5f34cfcd4d6d32b90bea58249cb4011dfbd7aa7d8942aa8948ba0.js"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-ba2f1ce9bf0ac7ac724cbd7a665e01962357b733322d682c710a802226e445a1.js"></script>
      
      
      
      
    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
    </div>
    <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
  </div>
</div>

  </body>
</html>

<?php
session_start(); //Start the current session
require_once 'common.php';
//echo $GLOBALS['rootpath']."/index.php";

session_destroy(); //Destroy it! So we are logged out now
header("location:".$GLOBALS['rootpath']."/index.php"); 
?>




<?php
session_start();

require_once 'common.php';

echo '<html><head><script type="text/javascript" >
		function showhide(one) {
			if(document.getElementById(one).style.display == "block")
			{
				document.getElementById(one).style.display = "none";
			}
			else
			{
				document.getElementById(one).style.display = "block";
			}	
		}
		</script></head>';
			
echo '<body>';

/////////////////////////////////




if(!isset($_SESSION['login']))
{
	$_SESSION['login']=$_POST['login'];
}


if(!isset($_SESSION['password']))
{
	$_SESSION['password']=$_POST['password'];
}

$link=connect_office();

menu_office();


//echo '<pre>';print_r($_POST);echo '</pre>';


echo '</body></html>';


?>
<?php
session_start();

require_once 'common.php';

echo '<html><head><script type="text/javascript" >
		function showhide(one) {
			if(document.getElementById(one).style.display == "block")
			{
				document.getElementById(one).style.display = "none";
			}
			else
			{
				document.getElementById(one).style.display = "block";
			}	
		}
		</script></head>';
			
echo '<body>';

/////////////////////////////////




if(!isset($_SESSION['login']))
{
	$_SESSION['login']=$_POST['login'];
}


if(!isset($_SESSION['password']))
{
	$_SESSION['password']=$_POST['password'];
}

$link=connect();

menu();


//echo '<pre>';print_r($_POST);echo '</pre>';


echo '</body></html>';


?>
<?php
session_start();

require_once 'common.php';
unset($_SESSION['login']);
unset($_SESSION['password']);
echo '<html lang="en" >
<head>

  <title>Login Form</title>
      <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <body>
  <form method=post action='.$GLOBALS['rootpath'].'/common/start.php>
	  <div >
		 <img src="../image/college_logo.png"  width="15%" height="130">
	     <img src="../image/hostel.png" width="65%" height="130">
	     <img src="../image/gujarat.png"  width="15%" height="130">
	  </div>
	  <div>
	  <br>
	  <center><h1 style="color:white;">Login For Teaching Staff</h1></div></center>
	
	<div class="login">
		<div class="login-screen">
			<div class="app-title">
				<h1>Login</h1>
			</div>
			<div class="login-form">
				<div class="control-group">
				<input type="text" class="login-field" name="login" value="" placeholder="Username" id="login-name">
				<label class="login-field-icon fui-user" for="login-name"></label>
				</div>

				<div class="control-group">
				<input type="password" class="login-field" name="password" value="" placeholder="Password" id="login-pass">
				<label class="login-field-icon fui-lock" for="login-pass"></label>
				</div>
				<input type="submit" class="btn btn-primary btn-large btn-block" name="action" value="Login">
			</div>
		</div>
	</div>
	</form>
</body>';



echo '</html>';

?>
<?php

/**echo '

<style>
	.menu {border:0px;border-spacing: 0;border-collapse: collapse;background-color:lightgreen;}
</style>**/
/**echo '<html lang="en" >
<head>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <body>
	  <div >
		 <img src="../image/college_logo.png"  width="15%" height="130">
	     <img src="../image/hostel.png" width="65%" height="130">
	     <img src="../image/gujarat.png"  width="15%" height="130">
	  </div>
	</form>
</body>';*/
echo '
<script type="text/javascript" >
		function showhidemenu(one) 
		{		
			xx=document.getElementsByClassName(\'menu\');			
			for(var i = 0; i < xx.length; i++)
			{
				if(xx[i]!=document.getElementById(one))
				{
					xx[i].style.display = "none";		
				}
				
				else if(xx[i]==document.getElementById(one))
				{
					if(xx[i].style.display == "block")
					{
						xx[i].style.display = "none";
					}
					else
					{
						xx[i].style.display = "block";
					}		
				}
			}	
		}
		
		function hidemenu() {
		
			xx=document.getElementsByClassName(\'menu\');
			for(var i = 0; i < xx.length; i++)
			{
				xx[i].style.display = "none";		
			}
		}
		
		//document.onclick=function(){hidemenu();};
		</script>';

function menu()
{	
	echo'<head>

   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="../css/style.css">
   <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
   <script src="script.js"></script>
   <title>CSS MenuMaker</title>
</head>
<body>

<div id="cssmenu">
<ul>
     <li class="active has-sub"><a href=""><span>Declaration</span></a>
      <ul>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/declaration/new.php "><span>Prepare</span></a></li>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/declaration/check.php "><span>Check</span></a></li>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/declaration/view.php "><span>Print</span></a></li>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/declaration/download_attachment.php "><span>Download Attachment</span></a></li>
      </ul>
   </li>
   
   <li class="active has-sub"><a href=""><span>Leave</span></a>
      <ul>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/leave/new_leave.php "><span>Apply</span></a></li>
      </ul>
   </li>
    <li class="active has-sub"><a href=""><span>Manage My Account</span></a>
      <ul>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/common/logout.php "><span>Logout</span></a></li>
         <li class="has-sub"><a href='.$GLOBALS['rootpath'].'/common/change_pass.php "><span>Change Password</span></a></li>
      </ul>
   </li>
</div>

</body>
<html>';
	
}


function menu_office()
{	
		
echo '
<form method=post>
<table class=\"menu\">
<tr><td>
		<button type=button onclick="showhidemenu(\'button1\')">Change Service Records</button>
		<table  id="button1" class="menu" style="position:absolute; display:none;">
			<tr><td>
				<button formaction='.$GLOBALS['rootpath'].'/sr/staff-wise.php type=submit onclick="hidemenu()" name=new>Manage staff-wise</button>
			</td></tr>
			<tr><td>
				<button formaction='.$GLOBALS['rootpath'].'/sr/detail-wise.php type=submit onclick="hidemenu()" name=new>Manage detail-wise</button>
			</td></tr>
		</table>
</td><td>
		<button type=button onclick="showhidemenu(\'button3\')">View Service Records</button>
		<table  id="button3" class="menu" style="position:absolute; display:none;">
			<tr><td>
				<button formaction='.$GLOBALS['rootpath'].'/sr/view_data.php type=submit onclick="hidemenu()" name=new>View data</button>
			</td></tr>

                        <tr><td>
				<button formaction='.$GLOBALS['rootpath'].'/sr/experience.php 
						type=submit onclick="hidemenu()" 
						name=new>View Experience</button>
                        </td></tr>

		</table>	
</td><td>
		<button  type=button onclick="showhidemenu(\'button2\')">Manage My Account('.$_SESSION['login'].')</button>
		<table  id="button2" class="menu" style="position: absolute;display:none;"><tr><td>

			<button formaction='.$GLOBALS['rootpath'].'/common/logout.php type=submit onclick="hidemenu()" name=new>Logout</button></td></tr><tr><td>

			<button formaction='.$GLOBALS['rootpath'].'/common/change_pass_office.php type=submit onclick="hidemenu()" name=new>Change Password</button></td></tr>

		</table>	
</td></tr>
</table>
</form>
';

}

//menu();

?>
<?php
session_start();
require_once 'common.php';
echo '<html>';
echo '<head>';

echo '

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid black;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;diabled:true
}

</style>


';
echo '</head>';
echo '<body>';
function read_password()
{
	echo '<table border=1 class="style2"><form method=post>';
	echo '<tr><th colspan=2 class="head">Change Password for access to Staff Database</th></tr>';
	echo '<tr><td>Login ID</td>	<td><input readonly=yes type=text name=id value=\''.$_SESSION['login'].'\'></td></tr>'; 
	echo '<tr><td>Old Password</td>	<td><input type=password name=old_password></td></tr>';
	echo '<tr><td>New Password</td>	<td><input type=password name=password_1></td></tr>';
	echo '<tr><td>Repeat New Password</td>	<td><input type=password name=password_2></td></tr>';
	echo '<tr><td colspan=2 align=center><button type=submit name=action value=change_password>Change Password</button></td></tr>';
	echo '</form></table>';
}

function check_old_password($link,$user,$password)
{
	$sql='select * from  office_staff where id=\''.$user.'\' ';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql))
	{
		//echo mysql_error();
		return FALSE;
	}
	if(mysqli_num_rows($result)<=0)
	{
		//echo 'No such user';
		echo '<h3>wrong username/password</h3>';
		return false;
	}
	$array=mysqli_fetch_assoc($result);
	if(MD5($password)==$array['password'])
	{
	  	//echo 'You have supplied correct username and password';
		return true;
	}
	else
	{
		//echo 'You have suppled wrong password for correct user';
                echo '<h3>wrong username/password</h3>';
		return false;
	}
}


function update_password($link,$user,$new_password)
{
        $sql='update office_staff set password=MD5(\''.$new_password.'\') where id=\''.$user.'\' ';
        //echo $sql;
        if(!$result=mysqli_query($link,$sql))
        {
                echo mysqli_error($link);
                return FALSE;
        }

        if(mysqli_affected_rows($link)==1)
        {
                echo '<h3>Update successful. Close browser and restart it again</h3>';
		return true;
        }
		elseif(mysqli_affected_rows($link)==0)
		{
					echo '<h3>Old and new Passwords same. Nothing is changed.</h3>';
					return true;
		}
}


/////////////Start  of Script///////////////

$link=connect_office();
menu_office();

if(isset($_POST['action']))
{
	if($_POST['action']=='change_password')
	{
		if($_POST['password_1']==$_POST['password_2'])
		{
			//echo 'OK.  New passwords matches';
			if(check_old_password($link,$_POST['id'],$_POST['old_password']))
			{
				update_password($link,$_POST['id'],$_POST['password_1']);
			}
		}
		else
		{
			echo '<h3>New passwords supplied do not match</h3>';
		}
	}
}
else
{
	read_password();	
}

echo
'<table   class="help" >
		<tr><th class="head">Help</th></tr>
		<tr><td><li>Write old and new password carefully.</td></tr>
		<tr><td><li>close browser and start again after changing password</td></tr>
		<tr><td><li>Change password frequently</td></tr>
		<tr><td><li>Donot reveal your password to anybody.</td></tr>
		<tr><td><li>If your colleague needs access, ask them to visit gmcsurat.edu.in</td></tr>
		<tr><td><li>If you can not access your account, meet IT section of the college</td></tr>
 </table>';

/*
echo '<pre>';
print_r($_POST);
echo '</pre>';
*/
?>
<?php

echo '

<style>

	table {border-collapse: collapse;}
	td, p {    padding: 0;}
	
	.menu {border:0px;border-spacing: 0;border-collapse: collapse;background-color:lightgreen;}
	
	button {    
    border: none;
	background-color: lightgray;
    color: white;
    padding: 4px 4px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;}

 
	.dropdownbutton {    
		width:100%;
		background-color: lightgray;	
		border: 2px solid lightgray;
		color: black;
		} 
		
	.dropdownbutton:hover
	{
		background-color: gray;	
		color: white;
		border: 2px solid gray;
	}
    
	.mainmenubutton {  
	    color: white;
		background-color: black;	  
		border: 2px solid black;
	}
	
	.mainmenubutton:hover
	{
		background-color:black;
		border-color:black;	
		border-bottom: 2px solid red;
    }
    
	.submit
	{
		background-color:red;
		border-color:red;	
		border-bottom: 2px solid red;
	    color: white;
    }
 
	.submit:hover
	{
		background-color:red;
		border-color:red;	
		border-bottom: 2px solid black;
	    color: white;
    }
 
p {
    font-size : 30px;
    padding : 0;
    margin : 0;
    line-height : 20px;
}

	.tabbutton {  
	    color: white;
		background-color: black;	  
		border: 2px solid black;
		border-top-right-radius: 1em;
		border-top-left-radius: 1em;
	}
	
	.tabbutton:hover
	{
		background-color:black;
		border-color:black;	
		border-bottom: 2px solid red;
    }
     


           
</style>';
echo '
<script type="text/javascript" >
		function showhidemenu(one) 
		{		
			xx=document.getElementsByClassName(\'menu\');			
			for(var i = 0; i < xx.length; i++)
			{
				if(xx[i]!=document.getElementById(one))
				{
					xx[i].style.display = "none";		
				}
				
				else if(xx[i]==document.getElementById(one))
				{
					if(xx[i].style.display == "block")
					{
						xx[i].style.display = "none";
					}
					else
					{
						xx[i].style.display = "block";
					}		
				}
			}	
		}
		
		function hidemenu() {
		
			xx=document.getElementsByClassName(\'menu\');
			for(var i = 0; i < xx.length; i++)
			{
				xx[i].style.display = "none";		
			}
		}
		
		//document.onclick=function(){hidemenu();};
		</script>';

function menu()
{	
		
echo '
<form method=post>
  <link rel="stylesheet" href="../css/style.css">
<table class=\"menu\">
<tr><td>
		<button class=mainmenubutton type=button onclick="showhidemenu(\'button1\')">Declaration</button>
		<table  id="button1" class="menu" style="position:absolute; display:none;">
			<tr><td>
				<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/declaration/new.php type=submit onclick="hidemenu()" name=new>Prepare</button>
			</td></tr>			
			<tr><td>
				<button class=dropdownbutton formtarget=_blank formaction='.$GLOBALS['rootpath'].'/declaration/check.php type=submit onclick="hidemenu()" name=new>Check</button>
			</td></tr>
			<tr><td>
					<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/declaration/view.php type=submit onclick="hidemenu()" formtarget="_blank" name=view>Print</button>
			</td></tr>
			<tr><td>
					<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/declaration/download_attachment.php type=submit onclick="hidemenu()" formtarget="_blank" name=download_attachment>Download Attachment</button>
			</td></tr>
		</table>
		
</td><td>
		<button class=mainmenubutton type=button onclick="showhidemenu(\'button3\')">Salary</button>
		<table  id="button3" class="menu" style="position:absolute; display:none;">
		<tr><td>
			<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/salary/view_salary.php type=submit onclick="hidemenu()" name=new>View</button>
		</td></tr>
		</table>
		
</td><td>
		<button  class=mainmenubutton type=button onclick="showhidemenu(\'button2\')">Manage My Account('.$_SESSION['login'].')</button>
		<table  id="button2" class="menu" style="position: absolute;display:none;">
		<tr><td>
			<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/common/logout.php type=submit onclick="hidemenu()" name=new>Logout</button>
		</td></tr>
		<tr><td>
			<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/common/change_pass.php type=submit onclick="hidemenu()" name=new>Change Password</button>
		</td></tr>
		</table>	
</td></tr>
</table>
</form>
';

}


function menu_office()
{	
		
echo '
<form method=post>
<table class=\"menu\">
<tr><td>
		<button type=button onclick="showhidemenu(\'button1\')">Change Service Records</button>
		<table  id="button1" class="menu" style="position:absolute; display:none;">
			<tr><td>
				<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/sr/staff-wise.php type=submit onclick="hidemenu()" name=new>Manage staff-wise</button>
			</td></tr>
			<tr><td>
				<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/sr/detail-wise.php type=submit onclick="hidemenu()" name=new>Manage detail-wise</button>
			</td></tr>
		</table>
</td><td>
		<button type=button onclick="showhidemenu(\'button3\')">View Service Records</button>
		<table  id="button3" class="menu" style="position:absolute; display:none;">
			<tr><td>
				<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/sr/view_data.php type=submit onclick="hidemenu()" name=new>View data</button>
			</td></tr>

                        <tr><td>
				<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/sr/experience.php 
						type=submit onclick="hidemenu()" 
						name=new>View Experience</button>
                        </td></tr>

		</table>	
</td><td>
		<button  type=button onclick="showhidemenu(\'button2\')">Manage My Account('.$_SESSION['login'].')</button>
		<table  id="button2" class="menu" style="position: absolute;display:none;"><tr><td>

			<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/common/logout.php type=submit onclick="hidemenu()" name=new>Logout</button></td></tr><tr><td>

			<button class=dropdownbutton formaction='.$GLOBALS['rootpath'].'/common/change_pass_office.php type=submit onclick="hidemenu()" name=new>Change Password</button></td></tr>

		</table>	
</td></tr>
</table>
</form>
';

}

//menu();

?>
<?php
session_start();
require_once 'common.php';
echo '<html>';
echo '<head>';

echo '

<style>
	
table{
   border-collapse: collapse;
}

.border td , .border th{
    border: 1px solid black;
}

.upload{
	background-color:lightpink;	
}

.noborder{
 border: none;
}


.hidedisable
{
	display:none;diabled:true
}

</style>


';
echo '</head>';
echo '<body>';
function read_password()
{
	echo '<table border=1 class="style2"><form method=post>';
	echo '<tr><th colspan=2 class="head">Change Password for access to Staff Database</th></tr>';
	echo '<tr><td>Login ID</td>	<td><input readonly=yes type=text name=id value=\''.$_SESSION['login'].'\'></td></tr>'; 
	echo '<tr><td>Old Password</td>	<td><input type=password name=old_password></td></tr>';
	echo '<tr><td>New Password</td>	<td><input type=password name=password_1></td></tr>';
	echo '<tr><td>Repeat New Password</td>	<td><input type=password name=password_2></td></tr>';
	echo '<tr><td colspan=2 align=center><button type=submit name=action value=change_password>Change Password</button></td></tr>';
	echo '</form></table>';
}

function check_old_password($link,$user,$password)
{
	$sql='select * from  staff where id=\''.$user.'\' ';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql))
	{
		//echo mysql_error();
		return FALSE;
	}
	if(mysqli_num_rows($result)<=0)
	{
		//echo 'No such user';
		echo '<h3>wrong username/password</h3>';
		return false;
	}
	$array=mysqli_fetch_assoc($result);
	if(MD5($password)==$array['password'])
	{
	  	//echo 'You have supplied correct username and password';
		return true;
	}
	else
	{
		//echo 'You have suppled wrong password for correct user';
                echo '<h3>wrong username/password</h3>';
		return false;
	}
}


function update_password($link,$user,$new_password)
{
        $sql='update staff set password=MD5(\''.$new_password.'\') where id=\''.$user.'\' ';
        //echo $sql;
        if(!$result=mysqli_query($link,$sql))
        {
                echo mysqli_error($link);
                return FALSE;
        }

        if(mysqli_affected_rows($link)==1)
        {
                echo '<h3>Update successful. Close browser and restart it again</h3>';
		return true;
        }
		elseif(mysqli_affected_rows($link)==0)
		{
					echo '<h3>Old and new Passwords same. Nothing is changed.</h3>';
					return true;
		}
}


/////////////Start  of Script///////////////

$link=connect();
menu();

if(isset($_POST['action']))
{
	if($_POST['action']=='change_password')
	{
		if($_POST['password_1']==$_POST['password_2'])
		{
			//echo 'OK.  New passwords matches';
			if(check_old_password($link,$_POST['id'],$_POST['old_password']))
			{
				update_password($link,$_POST['id'],$_POST['password_1']);
			}
		}
		else
		{
			echo '<h3>New passwords supplied do not match</h3>';
		}
	}
}
else
{
	read_password();	
}

echo
'<table   class="help" >
		<tr><th class="head">Help</th></tr>
		<tr><td><li>Write old and new password carefully.</td></tr>
		<tr><td><li>close browser and start again after changing password</td></tr>
		<tr><td><li>Change password frequently</td></tr>
		<tr><td><li>Donot reveal your password to anybody.</td></tr>
		<tr><td><li>If your colleague needs access, ask them to visit gmcsurat.edu.in</td></tr>
		<tr><td><li>If you can not access your account, meet IT section of the college</td></tr>
 </table>';

/*
echo '<pre>';
print_r($_POST);
echo '</pre>';
*/
?>
<?php

/* 
 * Copy this file as staff.conf in some folder outside webroot 
 * This file store some variables and password for genral access to database
 *  keep this file outside webroot
 *  suppose this file is /var/gmcs_config/staff.conf
 *  Then permission is as follows
 *  d--x------  2 www-data www-data  4096 Nov 13 16:59 gmcs_config
 *  -r--------  1 www-data www-data 188 Nov 13 16:59 staff.conf
 *  the chown, chgrp, chmod commands will be required
 *  This will make the password secure
 *  Keep password/username less file in document tree for project management
 *  create a non-root user in mysql for staff database only. Give this user all four rights
 *
 * the stat command will show octat permission
 * This number can also be used for chmod command 
 * root@debian:/var# stat  -c "%a %n" gmcs_config/
 * 100 gmcs_config/
 * root@debian:/var# stat  -c "%a %n" gmcs_config/*
 * 400 gmcs_config/staff.conf
 * Alter "require_once" line in common/common.php to reflect folder where this file is stored outside webroot 
 * */
 
 
$GLOBALS['rootpath']='/staff'; // slash in begining is required, otherwise path relative to this file will be used
$GLOBALS['main_user']='staffroot';
$GLOBALS['main_pass']='something';
$GLOBALS['homepage']='gmcsurat.edu.in';
?>
-- MySQL dump 10.13  Distrib 5.5.44, for debian-linux-gnu (i686)
--
-- Host: localhost    Database: staff
-- ------------------------------------------------------
-- Server version	5.5.44-0+deb7u1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `appointment_type`
--

DROP TABLE IF EXISTS `appointment_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `appointment_type` (
  `appointment_type` varchar(100) NOT NULL,
  PRIMARY KEY (`appointment_type`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `department`
--

DROP TABLE IF EXISTS `department`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `department` (
  `department` varchar(200) NOT NULL,
  `code` varchar(30) NOT NULL,
  PRIMARY KEY (`department`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `departmental_exam`
--

DROP TABLE IF EXISTS `departmental_exam`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `departmental_exam` (
  `staff_id` bigint(20) NOT NULL,
  `cccplus` varchar(10) NOT NULL,
  `gujarati` varchar(10) NOT NULL,
  `hindi` varchar(10) NOT NULL,
  PRIMARY KEY (`staff_id`),
  CONSTRAINT `sid_ex` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `designation_type`
--

DROP TABLE IF EXISTS `designation_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `designation_type` (
  `designation_type` varchar(50) NOT NULL,
  PRIMARY KEY (`designation_type`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `institute`
--

DROP TABLE IF EXISTS `institute`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `institute` (
  `institute` varchar(200) NOT NULL,
  PRIMARY KEY (`institute`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `leavee`
--

DROP TABLE IF EXISTS `leavee`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `leavee` (
  `application_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `staff_id` bigint(20) NOT NULL,
  `nature` varchar(200) NOT NULL,
  `from_date` date NOT NULL,
  `to_date` date NOT NULL,
  `prefix` varchar(200) NOT NULL,
  `postfix` varchar(200) NOT NULL,
  `reason` varchar(400) NOT NULL,
  `application_date` date NOT NULL,
  PRIMARY KEY (`application_id`),
  UNIQUE KEY `sid_leave` (`staff_id`),
  CONSTRAINT `leavee_ibfk_1` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `mci`
--

DROP TABLE IF EXISTS `mci`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `mci` (
  `staff_id` bigint(20) NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`staff_id`,`date`),
  CONSTRAINT `mci_ibfk_1` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `met`
--

DROP TABLE IF EXISTS `met`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `met` (
  `id` bigint(20) NOT NULL,
  `center` varchar(100) NOT NULL,
  `place` varchar(100) NOT NULL,
  `observer` varchar(100) NOT NULL,
  `date` date DEFAULT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `met_ibfk_1` FOREIGN KEY (`id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `office_staff`
--

DROP TABLE IF EXISTS `office_staff`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `office_staff` (
  `id` bigint(20) NOT NULL,
  `fullname` varchar(300) NOT NULL,
  `office` varchar(200) NOT NULL,
  `catagory` varchar(100) NOT NULL,
  `password` varchar(300) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `pan`
--

DROP TABLE IF EXISTS `pan`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `pan` (
  `staff_id` bigint(20) NOT NULL,
  `pan` varchar(20) NOT NULL,
  `attachment` mediumblob NOT NULL,
  `attachment_filename` varchar(300) NOT NULL,
  PRIMARY KEY (`staff_id`),
  CONSTRAINT `pan_ibfk_1` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `photo`
--

DROP TABLE IF EXISTS `photo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `photo` (
  `id` bigint(20) NOT NULL,
  `proof_type` varchar(30) NOT NULL,
  `proof_number` varchar(30) NOT NULL,
  `proof_issued_by` varchar(100) NOT NULL,
  `photo_id` mediumblob NOT NULL,
  `photo_id_filename` varchar(300) NOT NULL,
  `photo` mediumblob NOT NULL,
  `photo_filename` varchar(300) NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `photo_ibfk_1` FOREIGN KEY (`id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `photo_id_proof_type`
--

DROP TABLE IF EXISTS `photo_id_proof_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `photo_id_proof_type` (
  `photo_id_proof_type` varchar(30) NOT NULL,
  PRIMARY KEY (`photo_id_proof_type`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `publication`
--

DROP TABLE IF EXISTS `publication`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `publication` (
  `staff_id` bigint(20) NOT NULL,
  `international` int(11) NOT NULL,
  `national` int(11) NOT NULL,
  `state` int(11) NOT NULL,
  PRIMARY KEY (`staff_id`),
  CONSTRAINT `publication_ibfk_1` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `qualification`
--

DROP TABLE IF EXISTS `qualification`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `qualification` (
  `qualification_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `staff_id` bigint(20) NOT NULL,
  `qualification` varchar(50) NOT NULL,
  `subject` varchar(200) NOT NULL,
  `college` varchar(200) NOT NULL,
  `university` varchar(200) NOT NULL,
  `year` int(11) NOT NULL,
  `registration_number` varchar(100) NOT NULL,
  `registration_date` date DEFAULT NULL,
  `medical_council` varchar(100) NOT NULL,
  PRIMARY KEY (`qualification_id`),
  KEY `sidq` (`staff_id`),
  CONSTRAINT `qualification_ibfk_1` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=763 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `qualification_attachment`
--

DROP TABLE IF EXISTS `qualification_attachment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `qualification_attachment` (
  `attachment_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `qualification_id` bigint(20) NOT NULL,
  `type` varchar(100) NOT NULL,
  `attachment` mediumblob NOT NULL,
  `attachment_filename` varchar(300) NOT NULL,
  PRIMARY KEY (`attachment_id`),
  KEY `qid_qa` (`qualification_id`),
  CONSTRAINT `qualification_attachment_ibfk_1` FOREIGN KEY (`qualification_id`) REFERENCES `qualification` (`qualification_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=843 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `qualification_degree`
--

DROP TABLE IF EXISTS `qualification_degree`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `qualification_degree` (
  `qualification_degree` varchar(200) NOT NULL,
  PRIMARY KEY (`qualification_degree`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `residencial_address_proof`
--

DROP TABLE IF EXISTS `residencial_address_proof`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `residencial_address_proof` (
  `id` bigint(20) NOT NULL,
  `proof` mediumblob NOT NULL,
  `filename` varchar(300) NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `residencial_address_proof_ibfk_1` FOREIGN KEY (`id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `staff`
--

DROP TABLE IF EXISTS `staff`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `staff` (
  `id` bigint(20) NOT NULL,
  `password` varchar(200) NOT NULL DEFAULT '',
  `fullname` varchar(100) DEFAULT NULL,
  `dob` date DEFAULT NULL,
  `residencial_address` varchar(1000) NOT NULL,
  `residencial_phone` varchar(15) NOT NULL,
  `office_phone` varchar(15) NOT NULL,
  `mobile` varchar(15) NOT NULL,
  `email` varchar(100) NOT NULL,
  `catagory` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `staff.visible`
--

DROP TABLE IF EXISTS `staff.visible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `staff.visible` (
  `id` bigint(20) NOT NULL,
  `password` varchar(200) NOT NULL DEFAULT '',
  `fullname` varchar(100) DEFAULT NULL,
  `dob` date DEFAULT NULL,
  `residencial_address` varchar(1000) NOT NULL,
  `residencial_phone` varchar(15) NOT NULL,
  `office_phone` varchar(15) NOT NULL,
  `mobile` varchar(15) NOT NULL,
  `email` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `staff_movement`
--

DROP TABLE IF EXISTS `staff_movement`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `staff_movement` (
  `movement_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `staff_id` bigint(20) NOT NULL,
  `institute` varchar(300) NOT NULL,
  `department` varchar(300) NOT NULL,
  `post` varchar(300) NOT NULL,
  `from_date` date DEFAULT NULL,
  `from_time` varchar(20) NOT NULL,
  `to_date` date DEFAULT NULL,
  `to_time` varchar(20) NOT NULL,
  `type` varchar(100) NOT NULL,
  PRIMARY KEY (`movement_id`),
  KEY `sidsm` (`staff_id`),
  CONSTRAINT `staff_movement_ibfk_1` FOREIGN KEY (`staff_id`) REFERENCES `staff` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1377 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `staff_movement_attachment`
--

DROP TABLE IF EXISTS `staff_movement_attachment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `staff_movement_attachment` (
  `attachment_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `movement_id` bigint(20) NOT NULL,
  `type` varchar(200) NOT NULL,
  `attachment` mediumblob NOT NULL,
  `attachment_filename` varchar(300) NOT NULL,
  PRIMARY KEY (`attachment_id`),
  KEY `movement_id` (`movement_id`),
  CONSTRAINT `staff_movement_attachment_ibfk_1` FOREIGN KEY (`movement_id`) REFERENCES `staff_movement` (`movement_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=483 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `view_data`
--

DROP TABLE IF EXISTS `view_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `view_data` (
  `id` int(11) NOT NULL,
  `info` varchar(50) NOT NULL,
  `sql` varchar(1000) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2017-07-28 11:20:21
* {
box-sizing: border-box;
}

*:focus {
	outline: none;
}
body {
font-family: Arial;
background-color: #696969;
padding: 50px;
}
.login {
margin: 20px auto;
width: 300px;
}
.login-screen {
background-color: #FFF;
padding: 20px;
border-radius: 5px
}
container{width:100%;}
#left{
float:left;width:50%;
}
h1{
 font-size: 25px;
}
h2{
 font-size: 28px;
background-color: #FFF;
}
h3{

 font-size: 22px;
color:white;
}
h4{
  font-size: 20px;
}
h4 li{
font-size: 23px;
color:white;

}

#right{
float:right;width:50%;
}
.app-title {
text-align: center;
color: #777;
}
.login-form {
text-align: center;
}
.control-group {
margin-bottom: 10px;
}


/*input {
text-align: center;
background-color: #ECF0F1;
border: 2px solid transparent;
border-radius: 3px;
font-size: 16px;
font-weight: 200;
padding: 10px 0;
width: 250px;
transition: border .5s;
}

input:focus {
border: 2px solid #696969;
box-shadow: none;
}*/

.btn {
  border: 2px solid transparent;
  background: #696969;
  color: #ffffff;
  font-size: 20px;
  line-height: 25px;
  padding: 10px 0;
  text-decoration: none;
  text-shadow: none;
  border-radius: 3px;
  box-shadow: none;
  transition: 0.25s;
  display: block;
  width: 250px;
  margin: 0 auto;
}

.btn:hover {

  background-color:#808080;
}

.login-link {
  font-size: 12px;
  color: #444;
  display: block;
  margin-top: 12px;
}
.b1 {
  font: bold 11px Arial;
  text-decoration: none;
  font-size: 20px;
  border-radius: 15px;
  background-color: #EEEEEE;
  color: #333333;
  padding: 6px 12px 6px 12px;
  border-top: 1px solid #CCCCCC;
  border-right: 1px solid #333333;
  border-bottom: 1px solid #333333;
  border-left: 1px solid #CCCCCC;
}

a:link {
    color: red;
}
a:visited {
    color: #696969;
}
a:hover {
    color:blue;
}
a:active {
    color: blue;
}
.button {
  padding: 15px 25px;
  font-size: 24px;
  text-align: center;
  cursor: pointer;
  outline: none;
  color: #fff;
  background-color: #4CAF50;
  border: none;
  border-radius: 15px;
  box-shadow: 0 9px #999;
}

.button:hover {background-color: #3e8e41}

.button:active {
  background-color: #3e8e41;
  box-shadow: 0 5px #666;
  transform: translateY(4px);
}


table {
    border-collapse: collapse;
    
}

table,tr,td{
font-size:20px;
}



h4 li{
color:black;
}
	
	.menu {border:0px;border-spacing: 0;border-collapse: collapse;background-color:gray;}
	
	button {    
    
	background-color: lightgray;
    color: white;
    padding:4px 4px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;}

 
	.dropdownbutton {    
		width:100%;
		background-color: lightgray;	
		border: 2px solid lightgray;
		color: black;
		} 
		
	.dropdownbutton:hover
	{
		background-color: gray;	
		color: white;
		border: 2px solid gray;
	}
    
	.mainmenubutton {  
	    color: white;
		background-color: black;	  
		border: 2px solid black;
	}
	
	.mainmenubutton:hover
	{
		background-color:black;
		border-color:black;	
		border-bottom: 4px solid red;
    }
   .menub:hover{
        color: blue;
		background-color: black;	  
		border: 2px solid black;
    }
    .menub{
    
		color:black;
		font-size: 20px;
		background-color: black;	  
		border: 2px solid black;
    }
	.submit
	{
		background-color:red;
		border-color:red;	
		border-bottom: 2px solid red;
	    color: white;
    }
 
	.submit:hover
	{
		background-color:red;
		border-color:red;	
		border-bottom: 2px solid black;
	    color: white;
    }
 
   p {
    font-size : 24px;
    padding : 0;
    margin : 0;
    line-height : 20px;
 }

	.tabbutton {  
	    color: white;
		background-color: black;	  
		border: 1px solid black;
		
		
		border-top-right-radius: 1em;
		border-top-left-radius: 1em;
	}
	
	.tabbutton:hover
	{
		background-color:black;
		border-color:black;	
	 border-bottom: 1px solid red;
    }
    .... ----------------------------------
.submitbutton{
    font-size: 25px;
    padding: 12px;

    border-radius: 3px;
    cursor:allowed;
    background-color: white;
    color: black;
    width: 250px;
    border: 4px solid #4CAF50;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
}
.submitbutton:hover{
    background-color:lightgreen; /* Green */
    color: black;
        
}
/*input {
text-align: center;
background-color: #ECF0F1;
border: 2px solid transparent;
border-radius: 3px;
font-size: 16px;
font-weight: 200;
padding: 10px 0;
width: 250px;
transition: border .5s;
}
*/
input:focus {
border: 2px solid gray;
box-shadow: none;
}

input[type=text,password] {
    width: 200px;
    text-align: center;
    padding: 12px 20px;
    font-size: 16px;
    font-weight: 200;
    border-radius: 3px;
    background-color:  #ECF0F1;
 
}

.submitbutton{
    text-align: center;
    font-size: 22px;
    padding: 8px;
    border-radius: 12px;
    cursor:allowed;
    background-color: white;
    color: black;
    width: 220px;
    border: 4px solid #4CAF50;
    -webkit-transition-duration: 0.4s; 
    transition-duration: 0.4s;
}
.submitbutton:hover{
    background-color:lightgreen; 
        
}
/*! jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),
a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}function $(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=Z(c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=$(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e,e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;function ma(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(oa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c){k=0;while(f=g[k++])ka.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return!0}function va(){return!1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)xa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=va;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=va),this.each(function(){r.event.remove(this,a,c,b)})}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Aa.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)});if(m&&(e=pa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(ma(e,"script"),Ea),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++)j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=ma(h),f=ma(a),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);if(b)if(c)for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);else Ga(a,h);return g=ma(h,"script"),g.length>0&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.appendChild(a)}})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Na(a,b,c){var d,e,f,g,h=a.style;return c=c||Ma(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta)return a;var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;while(c--)if(a=Sa[c]+b,a in Ta)return a}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)));return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Na(a,b,f),(d<0||null==d)&&(d=a.style[b]),La.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(a,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ba[d]+b]=f[d]||f[d-2]||f[0];return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.Tween=Ya,Ya.prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}},Ya.prototype.init.prototype=Ya.prototype,Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Ya.propHooks.scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ba[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function fb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){p||ha([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function gb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(gb(k,j.opts.specialEasing);f<g;f++)if(d=hb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)},prefilters:[fb],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),
void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function mb(a){var b=a.match(K)||[];return b.join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=nb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(nb(c))+" ").indexOf(b)>-1)return!0;return!1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ob,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c)return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});

<?php

if(isset($_GET['message'])){echo "<h3 align=center style='color:red;'>".$_GET['message']."</h3>";}
echo '<html lang="en" >
<head>
  <title>Login Form</title>
      <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <body>
	  <div >
		 <img src="image/college_logo.png"  width="15%" height="130">
	     <img src="image/hostel.png" width="65%" height="130">
	     <img src="image/gujarat.png"  width="15%" height="130">
	  </div>
	
	</form>
</body>';

echo '<br>
     <div id="container">
       <div  id="left">
          <h1 style=\'color:white;\'>Staff Database</h1><br>
          <a href="common/index.php" class="b1">Login For Teaching Staff</a><br><br><br><br>
          <a href="common/index_office.php" class="b1">Login For Administrative Office Staff</a><br><br><br><br>
           <a href="" class="b1">HOME</a><br><br>
       </div>
       <div  id="right">
           
          <center><h2 style=\'color:#ff0000;\' >Instruction for filling Declaration form 2018-19 </h2></center>
        <ol>
          <h3><li>If your current institute is changed due to transfer perform following steps after login.</li></h3>
          <h3><li> Edit last entry to replace "till_date" to date of releaving.</li></h3>
          <h3><li> Add current institute experience with till_date entry.</li></h3>
          <h3><li> After complating declaration form use Declaration->Print menu to print.</li></h3>
          <h3><li> Read printed declaration and fill remaining details by pen. Apply photo and signature.</li></h3>
        </ol>
       </div>
     </div>';


//echo  $_SERVER['REMOTE_ADDR'];
?>
<?php
session_start();


require_once '../common/common.php';

function view_data($link,$dept)
{


	//$sql='select photo from photo where id=587632527681'; 
	//$sql='select photo from photo,fullname,'; 

        $sql='select staff_id,fullname,permanent_residential_address,dob,mobile,email ,from_date,post,institute
			from  staff,staff_movement
			where
			staff.staff.id=staff_movement.staff_id  and
	                to_date is null and 
                        institute="Government Medical College Surat"  and
                        department=\''.$dept.'\'
                        order by department,post';
	

	$sql_photo='select photo from photo,staff,staff_movement 
		where staff.staff.id=staff_movement.staff_id  and
			photo.staff_id=staff.staff_id and
			to_date is null and 
			institute="Government Medical College Surat"  and
			department=\''.$dept.'\'
			order by department,post';

	//echo $sql;

	if(!$result=mysqli_query($link,$sql)){echo 'error:'.mysqli_error($link);}
	//if(!$result=mysqli_query($link,$sql_photo)){echo 'error:'.mysqli_error($link);}
	echo '<table border=1>';
	                echo '<tr>
                                <th>Sr</th>
                                <th>Photo</th>
                                <th>Name</th>
                                <th>Post</th>
                                <th>Place</th>
                                <th>Permanent Address</th>
                                <th>DOB</th>
                                <th>Date of Joining Service</th>
                                <th>Qual</th>
                                <th>Qaal. after joining</th>
                                <th>Mobile</th>
                                <th>Email</th>
                        </tr>';

	$counter=1;
	while($array=mysqli_fetch_assoc($result))
	{

	        $sql_photo='select photo from photo where id=\''.$array['staff_id'].'\'';
		//echo $sql_photo;
		if(!$result_photo=mysqli_query($link,$sql_photo)){echo 'error:'.mysqli_error($link);}
	        $array_photo=mysqli_fetch_assoc($result_photo);


                $sql_fd='select from_date from staff_movement where staff_id=\''.$array['staff_id'].'\' order by from_date';
                //echo $sql_photo;
                if(!$result_fd=mysqli_query($link,$sql_fd)){echo 'error:'.mysqli_error($link);}
                $array_fd=mysqli_fetch_assoc($result_fd);	//first result


                $sql_dg='select year ,qualification,subject from qualification where staff_id=\''.$array['staff_id'].'\' order by year desc';
                //echo $sql_dg;
                if(!$result_dg=mysqli_query($link,$sql_dg)){echo 'error:'.mysqli_error($link);}
                $array_dg=mysqli_fetch_assoc($result_dg);

			echo '<tr>';
			echo '<td>'.$counter.'</td>';
			echo '<td><img style="width:3cm;height:4cm;" src="data:image/jpeg;base64,'.base64_encode($array_photo['photo']).'"/></td>';
			echo '<td>'.$array['fullname'].'</td>';
			echo '<td>'.$array['post'].'</td>';
			echo '<td>'.$array['institute'].'</td>';
			echo '<td>'.$array['permanent_residential_address'].'</td>';
			echo '<td>'.mysql_to_india_date($array['dob']).'</td>';
			echo '<td>'.mysql_to_india_date($array_fd['from_date']).'</td>';
			echo '<td>'.$array_dg['qualification'].','.$array_dg['subject'].'</td>';
			echo '<td>-</td>';
			echo '<td>'.$array['mobile'].'</td>';
			echo '<td>'.$array['email'].'</td>';
			echo '</tr>';
			$counter++;
	}
	echo '</table>';
}



$link=connect_office();

menu_office();

$sql='select * from department';
if(!$result=mysqli_query($link,$sql)){echo 'error:'.mysqli_error($link);}
echo '<form method=post>';
while($array=mysqli_fetch_assoc($result))
{
	echo '<input type=submit name=department value=\''.$array['department'].'\'>';
}
echo '</form>';

echo '<h2 style="page-break-before: always;"></h2>';	
	view_data($link,$_POST['department']);

//print_r($_POST);
?>
<?php
session_start();


require_once '../common/common.php';

function view_data($link,$id)
{
	if(!$result_id=mysqli_query($link,'select * from view_data where id=\''.$id.'\'')){echo mysqli_error($link);}
	$array_id=mysqli_fetch_assoc($result_id);
	
	$sql=$array_id['sql'];
	$info=$array_id['info'];
		
	$first_data='yes';
	
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);}
	echo '<table border=1><tr><th colspan=20 bgcolor=lightblue>'.$info.'</th></tr>';
	
	$first_data='yes';
	
	while($array=mysqli_fetch_assoc($result))
	{
		if($first_data=='yes')
		{
			echo '<tr bgcolor=lightgreen>';
			foreach($array as $key=>$value)
			{
				echo '<th>'.$key.'</hd>';
			}
			echo '</tr>';
			$first_data='no';
		}
		foreach($array as $key=>$value)
		{
			echo '<td>'.$value.'</td>';
		}
		echo '</tr>';

	}
	echo '</table>';
}


function get_sql($link)
{
	if(!$result=mysqli_query($link,'select * from view_data')){echo mysqli_error($link);}
	echo '<form method=post>';
	echo '<table border=1><tr><th colspan=20>Select the data to view</th></tr>';
	
	$first_data='yes';
	
	while($array=mysqli_fetch_assoc($result))
	{
		if($first_data=='yes')
		{
			echo '<tr>';
			foreach($array as $key=>$value)
			{
				echo '<th bgcolor=lightgreen>'.$key.'</th>';
			}
			echo '</tr>';
			$first_data='no';
		}
		foreach($array as $key=>$value)
		{
			if($key=='id')
			{
				echo '<td><input type=submit name=id value=\''.$value.'\'></td>';
			}
			else
			{
				echo '<td>'.$value.'</td>';
			}
		}
		echo '</tr>';

	}
	echo '</table>';
	echo '</form>';
}


$link=connect_office();

menu_office();

echo '<h2 style="page-break-before: always;"></h2>';	
if(isset($_POST['id']))
{
	view_data($link,$_POST['id']);
}
get_sql($link);
?>
<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();
menu();


echo '<h2>Please note following. It will help you to complate declaration form</h2>'; 
echo '<h2>Correct errors and refresh this page</h2>'; 
echo '<h2>Ensure there are errors displayed below, for better use of staff data in future</h2>'; 


/////////////staff table////////////////

$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');

if(strlen($staff_detail['fullname'])==0){echo '<h4><li>Write fullname with surname first, as in service records</li></h4>'; }

if(
	strlen($staff_detail['dob'])==0 
	||
	$staff_detail['dob']=='0000-00-00'
	)
	{echo '<h4><li>Write proper date of birth</li></h4>'; }
	
if(strlen($staff_detail['residencial_address'])==0){echo '<h4><li>Write proper recidencial address</li></h4>'; }

if(strlen($staff_detail['residencial_phone'])==0){echo '<h4><li>Write proper residencial phone</li></h4>'; }
if(strlen($staff_detail['mobile'])<10){echo '<h4><li>Write proper mobile number</li></h4>'; }
if(strlen($staff_detail['email'])==0 || !filter_var($staff_detail['email'],FILTER_VALIDATE_EMAIL))
	{echo '<h4><li>Write proper email</li></h4>'; }
if(strlen($staff_detail['catagory'])==0){echo '<h4><li>Select catagory as in service records</li></h4>'; }

/////////////staff table complate////////////////

/////////////photo table////////////////

$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');
if(strlen($photo['proof_type'])==0){echo '<h4><li>Select photo id proof type</li></h4>'; }
if(strlen($photo['proof_number'])==0){echo '<h4><li>Write photo id proof number</li></h4>'; }
if(strlen($photo['proof_issued_by'])==0){echo '<h4><li>Write issue authority of photo id proof</li></h4>'; }
if(strlen($photo['photo_id'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo id. preferably in jpg or pdf format</li></h4>'; }
if(strlen($photo['photo'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo. If it is not jpg format, it will fail to display</li></h4>'; }

/////////////photo table complate////////////////

/////////////departmental_exam table ////////////////
$dep_ex=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['cccplus'])==0){echo '<h4><li>Select CCC+ exam status as per service records</li></h4>'; }
if(strlen($dep_ex['gujarati'])==0){echo '<h4><li>Select GUJARATI exam status as per service records</li></h4>'; }
if(strlen($dep_ex['hindi'])==0){echo '<h4><li>Select HINDI exam status as per service records</li></h4>'; }

/////////////departmental_exam table complate////////////////
 
//////////////Qualification,experience, check for at least one raw/////////

function count_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}
if(count_qualification($link)==0){echo '<h4><li>Add Qualification. You must be having at least one!!</li></h4>'; }

function check_current_experience($link)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is null ';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}

$cur_exp_num=check_current_experience($link);

if($cur_exp_num==0)
{
	echo '<h4><li>Add CURRENT job details in Experience tab. <li>Have you forgotten to select til_date in current experience? <li>current experience needs to be added before its appointment orders, joining order and previous relieving order is uploaded</li></h4>'; 
}
elseif($cur_exp_num>1)
{
	echo '<h4><li>There can not be more than two current experience. Have you added more than one "<span style="background:lightpink;"> till_date"</span></li></h4>';
	
}
else
{
	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
		
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
			
	if($current_appointment_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> Current appointment order</li></h4>'; }
	
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');
	if($current_joining_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> joining order at current institute</li></h4>'; }

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');
	if($previous_relieving_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> relieving order from previous institute</li></h4>'; }
	
}
	
///////PAN card////////////
$dep_ex=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['attachment'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> PAN card</li></h4>'; }

?>

<?php
session_start();
require_once '../common/common.php';
require_once 'save.php';

$link=connect();
menu();


echo '<h2>Please note following. It will help you to maintain staff database uptodate</h2>'; 

/////////////staff table////////////////

$staff_detail=get_raw($link,'select * from staff where id=\''.$_SESSION['login'].'\'');

if(strlen($staff_detail['fullname'])==0){echo '<h4><li>Write fullname with surname first, as in service records</li></h4>'; }

if(
	strlen($staff_detail['dob'])==0 
	||
	$staff_detail['dob']=='0000-00-00'
	)
	{echo '<h4><li>Write proper date of birth</li></h4>'; }
	
if(strlen($staff_detail['residencial_address'])==0){echo '<h4><li>Write proper recidencial address</li></h4>'; }

if(strlen($staff_detail['residencial_phone'])==0){echo '<h4><li>Write proper residencial phone</li></h4>'; }
if(strlen($staff_detail['mobile'])<10){echo '<h4><li>Write proper mobile number</li></h4>'; }
if(strlen($staff_detail['email'])==0 || !filter_var($staff_detail['email'],FILTER_VALIDATE_EMAIL))
	{echo '<h4><li>Write proper email</li></h4>'; }
if(strlen($staff_detail['catagory'])==0){echo '<h4><li>Select catagory as in service records</li></h4>'; }

/////////////staff table complate////////////////

/////////////photo table////////////////

$photo=get_raw($link,'select * from photo where id=\''.$_SESSION['login'].'\'');
if(strlen($photo['proof_type'])==0){echo '<h4><li>Select photo id proof type</li></h4>'; }
if(strlen($photo['proof_number'])==0){echo '<h4><li>Write photo id proof number</li></h4>'; }
if(strlen($photo['proof_issued_by'])==0){echo '<h4><li>Write issue authority of photo id proof</li></h4>'; }
if(strlen($photo['photo_id'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo id. preferably in jpg or pdf format</li></h4>'; }
if(strlen($photo['photo'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> photo. If it is not jpg format, it will fail to display</li></h4>'; }

/////////////photo table complate////////////////

/////////////departmental_exam table ////////////////
$dep_ex=get_raw($link,'select * from departmental_exam where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['cccplus'])==0){echo '<h4><li>Select CCC+ exam status as per service records</li></h4>'; }
if(strlen($dep_ex['gujarati'])==0){echo '<h4><li>Select GUJARATI exam status as per service records</li></h4>'; }
if(strlen($dep_ex['hindi'])==0){echo '<h4><li>Select HINDI exam status as per service records</li></h4>'; }

/////////////departmental_exam table complate////////////////
 
//////////////Qualification,experience, check for at least one raw/////////

function count_qualification($link)
{
	$sql='select * from qualification where staff_id=\''.$_SESSION['login'].'\'';
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}
if(count_qualification($link)==0){echo '<h4><li>Add Qualification. You must be having at least one!!</li></h4>'; }

function check_current_experience($link)
{
	$sql='select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is null ';
	//echo $sql;
	if(!$result=mysqli_query($link,$sql)){return 0;}
	return mysqli_num_rows($result);
}

$cur_exp_num=check_current_experience($link);

if($cur_exp_num==0)
{
	echo '<h4><li>Add CURRENT job details in Experience tab. <li>Have you forgotten to select til_date in current experience? <li>current experience needs to be added before its appointment orders, joining order and previous relieving order is uploaded</li></h4>'; 
}
elseif($cur_exp_num>1)
{
	echo '<h4><li>There can not be more than two current experience. Have you added more than one "<span style="background:lightpink;"> till_date"</span></li></h4>';
	
}
else
{
	$current_appointment=get_raw($link,'select * from staff_movement where staff_id=\''.$_SESSION['login'].'\' and to_date is NULL');
		
	$current_appointment_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'appointment_order\'');
			
	if($current_appointment_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> Current appointment order</li></h4>'; }
	
	$current_joining_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'joining_order\'');
	if($current_joining_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> joining order at current institute</li></h4>'; }

	$previous_relieving_order=get_raw($link,'select * from staff_movement_attachment 
			where movement_id=\''.$current_appointment['movement_id'].'\' and type=\'relieving_order\'');
	if($previous_relieving_order===FALSE)
	{echo '<h4><li><span style="background:lightpink;">Upload</span> relieving order from previous institute</li></h4>'; }
	
}
	
///////PAN card////////////
$dep_ex=get_raw($link,'select * from pan where staff_id=\''.$_SESSION['login'].'\'');

if(strlen($dep_ex['attachment'])==0){echo '<h4><li><span style="background:lightpink;">Upload</span> PAN card</li></h4>'; }

?>

<?php
session_start();
require_once '../common/common.php';

function read_sms()
{
	echo '<form method=post>';
	echo '<table border=1>';
	echo '<tr><th colspan=2>Send SMS</th></tr>'; 
	echo '<tr><td>Mobile</td><td><input type=text name=num></td></tr>';
	echo '<tr><td>SMS</td><td><input type=text name=sms></td></tr>';
	echo '<tr><td colspan=2><input name=submit type=submit value=send></td></tr>';
	echo '</form>';
	echo '</table>';
}

function send_sms_mobi1()
{
	$str='http://mobi1.blogdns.com/httpmsgid/SMSSenders.aspx';
	$getdata = http_build_query
		(
		array(
			'UserID' => 'gmcsrttr',
			'UserPass' => 'gmc123',
			'Message'=>$_POST['sms'],
			'MobileNo'=>$_POST['num'],
			'GSMID'=>'GMCSRT'
			)
		);
								
	$hdr = "Content-Type: application/x-www-form-urlencoded";
                    
	$opts = array('http' =>
					array(
						'method'  => 'GET',
						'content' => $getdata,
						'header'  => $hdr
						)
				);

	$context  = stream_context_create($opts);
	//echo $str;
	$ret=file_get_contents($str,false,$context);
	return $ret;
}

$link=connect_office();
menu_office();

read_sms();

if(isset($_POST['submit']))
{
	$result=send_sms_mobi1();
	echo 'Report:'.$result;
}

/*
if(!isset($_POST['submit']))
{
print_r($_POST);
$getdata = http_build_query(
array(
    'UserID' => 'gmcsrttr',
    'UserPass' => 'gmc123',
 'Message'=>'sms with space',
 'MobileNo'=>'9426328832',
 'GSMID'=>'GMCSRT'
 )
);
echo $getdata;
exit();
}
*/

//print_r($_POST);


//$str='http://mobi1.blogdns.com/httpmsgid/SMSSenders.aspx?UserID=gmcsrttr&UserPass=gmc123&Message='
//					.$_POST['sms'].'&MobileNo='.$_POST['num'].'&GSMID=GMCSRT';




?>
<?php
session_start();
require_once '../common/common.php';

$link=connect_office();
if(!isset($_POST['experience']))
{
	menu_office();
	echo '<form method=post target=_blank>';
	get_staff_id($link);
	echo '<input type=submit name=experience>';
	echo '</form>';
}


echo '<pre>';
if(isset($_POST['experience']) && isset($_POST['staff_id']))
{

	$staff_detail=get_raw($link,'select * from staff where id=\''.$_POST['staff_id'].'\'');
	
	$ex=get_experience_good($link,$_POST['staff_id']);
	//print_r($ex);	
	
	$ce=get_current_experience($link,$_POST['staff_id']);
	//print_r($ce);	

	$pe=get_experience_good_previous($link,$_POST['staff_id'],$ce['from_date']);
	//print_r($pe);	
	
	$str1='This is to certify that Dr. '
			.$staff_detail['fullname'].' is working as '
			.$ce['post'].' in the department of '
			.$ce['department'].' of this college('.$ce['institute'].') since '.mysql_to_india_date($ce['from_date']) ;
//	echo $str1;
	echo '<br>';
	$str2='Before joining this institute the officer has worked in Medical Colleges 
			under Medical Education Research department, Government of Gujarat as follows.';
	echo '<table border=1>';

echo '<table style="width:20cm;background-color:lightgray;" align=center>';
echo '<tr><td align=center><h1>'.$ce['institute'].'</h1></td></tr>';
echo '<tr><td align=center><h2>Experience Certificate</h2></td></tr>';
echo '<tr><td>'.$str1.'</td></tr>';
if($pe!==false)
{

	echo '<tr><td>'.$str2.'</td></tr>';
	echo '<tr><td>.</td></tr>';
	echo '<tr><td>.</td></tr>';
	echo '<tr><td>.</td></tr>';

	echo '<tr><td><table align=center border=1>';
	foreach($pe as $key=>$value)
	{

                        $ex_dym=get_date_diff_as_ymd($value['from_date'],$value['to_date']);
			//<td>'.$ex_dym.'</td>

		echo '<tr>
			<td>'.$value['department'].'</td>
			<td>'.$value['post'].'</td>
			<td>'.mysql_to_india_date($value['from_date']).'</td>
			<td>'.mysql_to_india_date($value['to_date']).'</td>
			</tr>';
	}
}
	echo '</table></td></tr>';
	echo '<tr><td>.</td></tr>';
	echo '<tr><td>.</td></tr>';
	echo '<tr><td>.</td></tr>';
	echo '<tr><td>.</td></tr>';
	echo '<tr><td><table width="100%">';
	echo '<tr><td width="50%"></td><td>The Dean</td><tr>';
	echo '<tr><td></td><td>'.$ce['institute'].'</td><tr>';
	echo '</table></td></tr>';
	//print_r($pe);
}
echo '</table>';



function get_current_experience($link,$id)
{

	$sql='select * from staff_movement where staff_id=\''.$id.'\' order by `from_date` ';
	echo '<table border=1>';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	while($ra=mysqli_fetch_assoc($result))
	{
		$raw_data[]=$ra;
	}

		$institute=null;
	foreach($raw_data as $key=>$value)
	{
		if($institute===null)
		{
			$institute=$value['institute'];
			$post=$value['post'];
			$department=$value['department'];
			$from_date=$value['from_date'];
		}
		else
		{
			if($institute==$value['institute'] &&	$post==$value['post'] && $department==$value['department'])
			{
				
			}
			else
			{
				$institute=$value['institute'];
				$post=$value['post'];
				$department=$value['department'];
				$from_date=$value['from_date'];				
			}
			
		}
	}
		$ar=array('institute'=>$institute,'post'=>$post,'department'=>$department,'from_date'=>$from_date);
		return $ar;
		//print_r($ar);
}


function get_experience_good_previous($link,$id,$date)
{

	$sql='select * from staff_movement where staff_id=\''.$id.'\' and from_date< \''.$date.'\' order by `from_date` ';
	
	//echo $sql;
	
	echo '<table border=1>';
	if(!$result=mysqli_query($link,$sql)){return FALSE;}
	
	$raw_data=null;
	while($ra=mysqli_fetch_assoc($result))
	{
		$raw_data[]=$ra;
	}

	if($raw_data==null){return false;}

	foreach($raw_data as $key=>$value)
	{
		$first_summary[]=array('department'=>$value['department'],'post'=>$value['post'],'from_date'=>$value['from_date'],'to_date'=>$value['to_date']);
	}
	
	$num=count($first_summary);

	$mrg=array();
	$final_count=0;
	for($i=0;$i<$num;$i++)
	{
		if(count($mrg)==0)
		{
				$mrg[$final_count]=array('department'=>$first_summary[$i]['department'],'post'=>$first_summary[$i]['post'],
								'from_date'=>$first_summary[$i]['from_date'], 
								'to_date'=>$first_summary[$i]['to_date']);					
		}
		else
		{
			$ddiff=date_diff_grand($mrg[$final_count]['to_date'],$first_summary[$i]['from_date']);
			$days_diff=date_interval_format($ddiff,'%r%a');
			//echo $days_diff.'<br>';
			if($first_summary[$i]['department']==$mrg[$final_count]['department'] 
			&& $first_summary[$i]['post']==$mrg[$final_count]['post']
			&& $days_diff<=1)
			{
				$mrg[$final_count]['to_date']=$first_summary[$i]['to_date'];
			}
			else
			{
				$final_count++;
				$mrg[$final_count]=array('department'=>$first_summary[$i]['department'],'post'=>$first_summary[$i]['post'],
								'from_date'=>$first_summary[$i]['from_date'],
								'to_date'=>$first_summary[$i]['to_date']);				
			}
		}
		
	}
	return $mrg;
	//print_r($mrg);
}

function get_staff_id($link)
{
	$sql='select id,fullname,institute,department,post from staff,staff_movement
						where 
							staff.id=staff_movement.staff_id
							and
							to_date is null
							order by department,post';
							
	if(!$result=mysqli_query($link,$sql)){echo mysqli_error($link);return FALSE;}
	echo '<select name=staff_id>';
	while($ar=mysqli_fetch_assoc($result))
	{
		echo '<option value=\''.$ar['id'].'\'>'.'['.$ar['department'].']'.'['.$ar['post'].']'.
					$ar['fullname'].'['.$ar['id'].']'.'['.$ar['institute'].']'.'</option>';
	}
	echo '</select>';	
}

?>

<<<<<<< HEAD
# staff database management
Download project
Copy it to its own folder in webroot.
 
database/staff.sql is a blank database.
restore it as "staff" database
Create a user with SCUD rights for only this database

read conf/staff.conf.example and make necessary changes in it after copying it outside webroot

for each form, a new folder may be created and managed as independent project


2016-12-17 
==========
blank database and scripts were taken from gmcsurat.edu.in
Thhere after Changes made in silver computer
Same, needs to be done in gmcsurat.edu.in
==========
deleted TABLE20			-->done
primary key defined in photo_id_proof_type -->done
blank value added in photo_id_proof_type -->done
		(photo_id_proof_type , and institute , designation ,appoi_type, dept table needs to be filled to preven Notice issued when scripts are run)

save.php changed to effect save button for adding experience and qualifications -->done
added check.php for declaration -->done
Changed Menu php to add office menu and check.php -->done


Added index_office, start_office, change_pass_office php (in common folder) -->done
Changed Menu php to add office menu -->done
Changed index.php of /staff (root) folder to show login link for office staff -->Done
Changed common php (added database check and connect_office function, changed connect() to syncronize with office login -->done
Created office_staff table, added dummy entry -->Done
changed index_office to differenciate it in color from index.php(for teaching staff) -->done


2016-12-21
==========
sr/view_data.php added		-->done
view_data table added		-->done
edited common/menu.php to view data added in staff_menu()		-->done

2016-12-22
==========
date difference function altered in common.php	-->done

2016-12-24
==========
logout.php and logout() in common.php fixed to get starting index.php	-->done
common/index.php modified to include message by GET variable			-->done

=======
# staff
>>>>>>> d86d58346dc484f64ebc74011145810cadf3b3ee
